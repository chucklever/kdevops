<!DOCTYPE html>
<html lang="en" class="Internet-Draft">
<head>
<meta charset="utf-8">
<meta content="Common,Latin" name="scripts">
<meta content="initial-scale=1.0" name="viewport">
<title>The Network File System Access Control List Protocol</title>
<meta content="Chuck Lever" name="author">
<meta content="
       This Informational document describes the NFSACL protocol.
NFSACL is a legacy member of the Network File System family
of protocols that NFS clients use to access and modify Access
Control Lists stored on an NFS version 2 or version 3 server. 
    " name="description">
<meta content="xml2rfc 3.23.1" name="generator">
<meta content="NFS" name="keyword">
<meta content="ACL" name="keyword">
<meta content="draft-cel-nfsv4-nfsacl-latest" name="ietf.draft">
<!-- Generator version information:
  xml2rfc 3.23.1
    Python 3.9.6
    ConfigArgParse 1.7
    google-i18n-address 3.1.1
    intervaltree 3.1.0
    Jinja2 3.1.4
    lxml 4.9.4
    platformdirs 4.3.6
    pycountry 24.6.1
    PyYAML 6.0.2
    requests 2.32.3
    setuptools 75.1.0
    wcwidth 0.2.13
-->
<link href="draft-cel-nfsv4-nfsacl.xml" rel="alternate" type="application/rfc+xml">
<link href="#copyright" rel="license">
<style type="text/css">@font-face {
  font-family: 'Lora';
  font-style: italic;
  font-weight: 400;
  font-display: swap;
  src: local('Lora Italic'), local('Lora-Italic'), url('https://martinthomson.github.io/rfc-css/fonts/lora-italic-cyrillic-ext.woff2') format('woff2');
  unicode-range: U+0460-052F, U+1C80-1C88, U+20B4, U+2DE0-2DFF, U+A640-A69F, U+FE2E-FE2F;
}
@font-face {
  font-family: 'Lora';
  font-style: italic;
  font-weight: 400;
  font-display: swap;
  src: local('Lora Italic'), local('Lora-Italic'), url('https://martinthomson.github.io/rfc-css/fonts/lora-italic-cyrillic-ext.woff2') format('woff2');
  unicode-range: U+0400-045F, U+0490-0491, U+04B0-04B1, U+2116;
}
@font-face {
  font-family: 'Lora';
  font-style: italic;
  font-weight: 400;
  font-display: swap;
  src: local('Lora Italic'), local('Lora-Italic'), url('https://martinthomson.github.io/rfc-css/fonts/lora-italic-vietnamese.woff2') format('woff2');
  unicode-range: U+0102-0103, U+0110-0111, U+1EA0-1EF9, U+20AB;
}
@font-face {
  font-family: 'Lora';
  font-style: italic;
  font-weight: 400;
  font-display: swap;
  src: local('Lora Italic'), local('Lora-Italic'), url('https://martinthomson.github.io/rfc-css/fonts/lora-italic-latin-ext.woff2') format('woff2');
  unicode-range: U+0100-024F, U+0259, U+1E00-1EFF, U+2020, U+20A0-20AB, U+20AD-20CF, U+2113, U+2C60-2C7F, U+A720-A7FF;
}

@font-face {
  font-family: 'Lora';
  font-style: italic;
  font-weight: 400;
  font-display: swap;
  src: local('Lora Italic'), local('Lora-Italic'), url('https://martinthomson.github.io/rfc-css/fonts/lora-italic-latin.woff2') format('woff2');
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
}
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 400;
  font-display: swap;
  src: local('Lora Regular'), local('Lora-Regular'), url('https://martinthomson.github.io/rfc-css/fonts/lora-regular-cyrillic-ext.woff2') format('woff2');
  unicode-range: U+0460-052F, U+1C80-1C88, U+20B4, U+2DE0-2DFF, U+A640-A69F, U+FE2E-FE2F;
}
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 400;
  font-display: swap;
  src: local('Lora Regular'), local('Lora-Regular'), url('https://martinthomson.github.io/rfc-css/fonts/lora-regular-cyrillic.woff2') format('woff2');
  unicode-range: U+0400-045F, U+0490-0491, U+04B0-04B1, U+2116;
}
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 400;
  font-display: swap;
  src: local('Lora Regular'), local('Lora-Regular'), url('https://martinthomson.github.io/rfc-css/fonts/lora-regular-vietnamese.woff2') format('woff2');
  unicode-range: U+0102-0103, U+0110-0111, U+1EA0-1EF9, U+20AB;
}
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 400;
  font-display: swap;
  src: local('Lora Regular'), local('Lora-Regular'), url('https://martinthomson.github.io/rfc-css/fonts/lora-regular-latin-ext.woff2') format('woff2');
  unicode-range: U+0100-024F, U+0259, U+1E00-1EFF, U+2020, U+20A0-20AB, U+20AD-20CF, U+2113, U+2C60-2C7F, U+A720-A7FF;
}
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 400;
  font-display: swap;
  src: local('Lora Regular'), local('Lora-Regular'), url('https://martinthomson.github.io/rfc-css/fonts/lora-regular-latin.woff2') format('woff2');
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
}

@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 700;
  font-display: swap;
  src: local('Lora Bold'), local('Lora-Bold'), url('https://martinthomson.github.io/rfc-css/fonts/lora-bold-cyrillic-ext.woff2') format('woff2');
  unicode-range: U+0460-052F, U+1C80-1C88, U+20B4, U+2DE0-2DFF, U+A640-A69F, U+FE2E-FE2F;
}
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 700;
  font-display: swap;
  src: local('Lora Bold'), local('Lora-Bold'), url('https://martinthomson.github.io/rfc-css/fonts/lora-bold-cyrillic.woff2') format('woff2');
  unicode-range: U+0400-045F, U+0490-0491, U+04B0-04B1, U+2116;
}
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 700;
  font-display: swap;
  src: local('Lora Bold'), local('Lora-Bold'), url('https://martinthomson.github.io/rfc-css/fonts/lora-bold-vietnamese.woff2') format('woff2');
  unicode-range: U+0102-0103, U+0110-0111, U+1EA0-1EF9, U+20AB;
}
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 700;
  font-display: swap;
  src: local('Lora Bold'), local('Lora-Bold'), url('https://martinthomson.github.io/rfc-css/fonts/lora-bold-latin-ext.woff2') format('woff2');
  unicode-range: U+0100-024F, U+0259, U+1E00-1EFF, U+2020, U+20A0-20AB, U+20AD-20CF, U+2113, U+2C60-2C7F, U+A720-A7FF;
}
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 700;
  font-display: swap;
  src: local('Lora Bold'), local('Lora-Bold'), url('https://martinthomson.github.io/rfc-css/fonts/lora-bold-latin.woff2') format('woff2');
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
}
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 600;
  font-display: swap;
  src: local('Lora SemiBold'), local('Lora-SemiBold'), url('https://martinthomson.github.io/rfc-css/fonts/lora-semibold-latin.woff2') format('woff2');
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
}

@font-face {
  font-family: 'Cabin Condensed';
  font-style: normal;
  font-weight: 600;
  font-display: swap;
  src: local('Cabin Condensed SemiBold'), local('CabinCondensed-SemiBold'), url('https://martinthomson.github.io/rfc-css/fonts/cabincondensed-semibold-vietnamese.woff2') format('woff2');
  unicode-range: U+0102-0103, U+0110-0111, U+1EA0-1EF9, U+20AB;
}
@font-face {
  font-family: 'Cabin Condensed';
  font-style: normal;
  font-weight: 600;
  font-display: swap;
  src: local('Cabin Condensed SemiBold'), local('CabinCondensed-SemiBold'), url('https://martinthomson.github.io/rfc-css/fonts/cabincondensed-semibold-latin-ext.woff2') format('woff2');
  unicode-range: U+0100-024F, U+0259, U+1E00-1EFF, U+2020, U+20A0-20AB, U+20AD-20CF, U+2113, U+2C60-2C7F, U+A720-A7FF;
}
@font-face {
  font-family: 'Cabin Condensed';
  font-style: normal;
  font-weight: 600;
  font-display: swap;
  src: local('Cabin Condensed SemiBold'), local('CabinCondensed-SemiBold'), url('https://martinthomson.github.io/rfc-css/fonts/cabincondensed-semibold-latin.woff2') format('woff2');
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
}

@font-face {
  font-family: 'Oxygen Mono';
  font-style: normal;
  font-weight: 400;
  font-display: swap;
  src: local('Oxygen Mono'), local('OxygenMono-Regular'), url('https://martinthomson.github.io/rfc-css/fonts/oxygenmono-regular-latin-ext.woff2') format('woff2');
  unicode-range: U+0100-024F, U+0259, U+1E00-1EFF, U+2020, U+20A0-20AB, U+20AD-20CF, U+2113, U+2C60-2C7F, U+A720-A7FF;
}
@font-face {
  font-family: 'Oxygen Mono';
  font-style: normal;
  font-weight: 400;
  font-display: swap;
  src: local('Oxygen Mono'), local('OxygenMono-Regular'), url('https://martinthomson.github.io/rfc-css/fonts/oxygenmono-regular-latin.woff2') format('woff2');
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
}

:root {
  color-scheme: light dark;
  --background-color: #fff;
  --text-color: #222;
  --title-color: #191919;
  --link-color: #2a6496;
  --highlight-color: #f9f9f9;
  --line-color: #eee;
  --pilcrow-weak: #ddd;
  --pilcrow-strong: #bbb;
  --small-font-size: 14.5px;
  --font-mono: 'Oxygen Mono', monospace;
  scrollbar-color: #bbb #eee;
}
body {
  max-width: 600px;
  margin: 75px auto;
  padding: 0 5px;
  color: var(--text-color);
  background-color: var(--background-color);
  font: 16px/22px "Lora", serif;
  scroll-behavior: smooth;
}

.ears {
  display: none;
}

/* headings */
h1, h2, h3, h4, h5, h6 {
  font-family: "Cabin Condensed", sans-serif;
  font-weight: 600;
  margin: 0.8em 0 0.3em;
  font-size-adjust: 0.5;
  color: var(--title-color);
}
h1#title {
  font-size: 32px;
  line-height: 40px;
  clear: both;
}
h1#title, h1#rfcnum {
  margin: 1.5em 0 0.2em;
}
h1#rfcnum + h1#title {
  margin: 0.2em 0;
}

h1, h2, h3 {
  font-size: 22px;
  line-height: 27px;
}
h4, h5, h6 {
  font-size: 20px;
  line-height: 24px;
}

/* general structure */
.author {
  padding-bottom: 0.3em;
}
#abstract+p {
  font-size: 18px;
  line-height: 24px;
}
#abstract+p code, #abstract+p samp, #abstract+p tt {
  font-size: 16px;
  line-height: 0;
}

p {
  padding: 0;
  margin: 0.5em 0;
  text-align: left;
}
div {
  margin: 0;
}
.alignRight.art-text {
  background-color: var(--highlight-color);
  border: 1px solid var(--line-color);
  border-radius: 3px;
  padding: 0.5em 1em 0;
  margin-bottom: 0.5em;
}
.alignRight.art-text pre {
  padding: 0;
  width: auto;
}
.alignRight {
  margin: 1em 0;
}
.alignRight > *:first-child {
  border: none;
  margin: 0;
  float: right;
  clear: both;
}
.alignRight > *:nth-child(2) {
  clear: both;
  display: block;
  border: none;
}
svg {
  display: block;
}
/* font-family isn't space-separated, but =~ will have to do */
svg[font-family~="monospace" i], svg [font-family~="monospace" i] {
  font-family: var(--font-mono);
}
.alignCenter.art-text {
  background-color: var(--highlight-color);
  border: 1px solid var(--line-color);
  border-radius: 3px;
  padding: 0.5em 1em 0;
  margin-bottom: 0.5em;
}
.alignCenter.art-text pre {
  padding: 0;
  width: auto;
}
.alignCenter {
  margin: 1em 0;
}
.alignCenter > *:first-child {
  border: none;
  /* this isn't optimal, but it's an existence proof.  PrinceXML doesn't
     support flexbox yet.
  */
  display: table;
  margin: 0 auto;
}

/* lists */
ol, ul {
  padding: 0;
  margin: 0 0 0.5em 2em;
}
:is(ol, ul) :is(ol, ul) {
  margin-left: 1em;
}
li {
  margin: 0 0 0.25em 0;
}
.ulCompact li {
  margin: 0;
}
ul.empty, .ulEmpty {
  list-style-type: none;
}
ul.empty li, .ulEmpty li {
  margin-top: 0.5em;
}
:is(ul, ol).compact, .ulCompact, .olCompact {
  line-height: 1;
  margin: 0 0 0 2em;
}

/* definition lists */
dl {
  clear: left;
  --indent: 3ch;
  /* --indent: attr(indent ch); not supported in any browser, but we can dream */
}
dl.olPercent {
  --indent: 5ch;
}
dl > dt {
  float: left;
  margin-right: 2ch;
  min-width: 8ch;
}
dl.dlNewline > dt {
  float: none;
}
dl > dd {
  margin-bottom: .8em;
  margin-left: var(--indent) !important; /* stupid element overrides */
  min-height: 2ex;
}
dl.olPercent > dt {
  min-width: calc(var(--indent) - 2ch);
}
:is(dl.compact, .dlCompact) > dd {
  margin-bottom: 0;
}
:is(dl.compact, .dlCompact) > dd > :is(:first-child, .break:first-child + *) {
  margin-top: 0;
}
:is(dl.compact, .dlCompact) > dd > :is(:last-child) {
  margin-bottom: 0;
}
dl > dd > dl {
  margin-top: 0.5em;
  margin-bottom: 0;
}
:is(dd, span).break {
  display: none;
}

/* links */
a, a[href].selfRef:hover {
  text-decoration: none;
}
a[href] {
  color: var(--link-color);
}
a[href].selfRef, .iref + a[href].internal {
  color: var(--text-color);
}
a[href]:hover {
  text-decoration: underline;
}
a[href].selfRef:hover {
  background-color: var(--highlight-color);
}
a.xref:is(.cite, .auto), :is(#status-of-memo, #copyright) a {
  white-space: nowrap;
}

/* Figures */
tt, code, pre {
  background-color: var(--highlight-color);
  font: 14px/22px var(--font-mono);
}
tt, code {
  /* changing the font for inline elements leads to different ascender
     and descender heights; as we want to retain baseline alignment,
     remove leading to avoid altering the final height of lines
     note: this fails if these blocks take an entire line,
     a different solution would be great */
  line-height: 0;
}
:is(h1, h2, h3, h4, h5, h6) :is(tt, code) {
  font-size: 84%;
}
pre {
  border: 1px solid var(--line-color);
  font-size: 13.5px;
  line-height: 16px;
  letter-spacing: -0.2px;
  margin: 5px;
  padding: 5px;
}
img {
  max-width: 100%;
}
figure {
  margin: 0.5em 0;
  padding: 0;
}
figure blockquote {
  margin: 0.8em 0.4em 0.4em;
}
figcaption, caption {
  font-style: italic;
  margin: 0.5em 1.5em;
  text-align: left;
}
@media screen {
  /* Auto-collapse boilerplate. */
  :is(#status-of-memo, #copyright) p {
    margin: -2px 0;
    max-height: 0;
    transition: max-height 2s ease, margin 0.5s ease 0.5s;
    overflow: hidden;
  }
  :is(#status-of-memo, #copyright):hover p,
  :is(#status-of-memo, #copyright) h2:target ~ p {
    margin: 0.5em 0;
    max-height: 500px;
    overflow: auto;
  }
  pre, svg {
    display: inline-block;
    overflow-x: auto;
  }
  pre {
    max-width: 100%;
    width: calc(100% - 22px - 1em);
  }
  svg {
    max-width: calc(100% - 22px - 1em);
  }
  figure pre {
    display: block;
    width: calc(100% - 25px);
  }
  :is(pre, svg) + .pilcrow {
    display: inline-block;
    vertical-align: text-bottom;
    padding-bottom: 8px;
  }
}

/* aside, blockquote */
aside, blockquote {
  margin-left: 0;
  padding: 0 2em;
  font-style: italic;
}
blockquote {
  margin: 1em 0;
}
cite {
  display: block;
  text-align: right;
  font-style: italic;
}

/* tables */
table {
  max-width: 100%;
  margin: 0 0 1em;
  border-collapse: collapse;
}
table.right {
  margin-left: auto;
}
table.center {
  margin-left: auto;
  margin-right: auto;
}
table.left {
  margin-right: auto;
}
thead, tbody {
  border: 1px solid var(--line-color);
}
th, td {
  text-align: left;
  vertical-align: top;
  padding: 5px 10px;
}
th {
  background-color: var(--line-color);
}
:is(tr:nth-child(2n), thead+tbody > tr:nth-child(2n+1)) > td {
  background-color: var(--background-color);
}
:is(tr:nth-child(2n+1), thead+tbody > tr:nth-child(2n)) > td {
  background-color: var(--highlight-color);
}
table caption {
  margin: 0;
  padding: 3px 0 3px 1em;
}
table p {
  margin: 0;
}

/* pilcrow */
a.pilcrow {
  margin-left: 3px;
  opacity: 0.2;
  user-select: none;
}
a.pilcrow[href] { color: var(--pilcrow-weak); }
a.pilcrow[href]:hover { text-decoration: none; }
@media not print {
  :hover > a.pilcrow {
    opacity: 1;
  }
  a.pilcrow[href]:hover {
    color: var(--pilcrow-strong);
    background-color: transparent;
  }
}
@media print {
  a.pilcrow {
    display: none;
  }
}

/* misc */
hr {
  border: 0;
  border-top: 1px solid var(--line-color);
}
.bcp14 {
  font-variant: small-caps;
  font-weight: 600;
  font-size: var(--small-font-size);
}
.role {
  font-variant: all-small-caps;
}
sub, sup {
  line-height: 1;
  font-size: 80%;
}

/* info block */
#identifiers {
  margin: 0;
  font-size: var(--small-font-size);
  line-height: 18px;
  --identifier-width: 15ch;
}
#identifiers dt {
  width: var(--identifier-width);
  min-width: var(--identifier-width);
  clear: left;
  float: left;
  text-align: right;
  margin-right: 1ch;
}
#identifiers dd {
  margin: 0;
  margin-left: calc(1em + var(--identifier-width)) !important;
  min-width: 5em;
}
#identifiers .authors .author {
  display: inline-block;
  margin-right: 1.5em;
}
#identifiers .authors .org {
  font-style: italic;
}

/* The prepared/rendered info at the very bottom of the page */
.docInfo {
  color: #999;
  font-size: 0.9em;
  font-style: italic;
  margin-top: 2em;
}
.docInfo .prepared {
  float: left;
}
.docInfo .prepared {
  float: right;
}

/* table of contents */
#toc {
  padding: 0.75em 0 2em 0;
  margin-bottom: 1em;
}
#toc nav ul {
  margin: 0 0.5em 0 0;
  padding: 0;
  list-style: none;
}
#toc nav li {
  line-height: 1.3em;
  margin: 2px 0;
  padding-left: 1.2em;
  text-indent: -1.2em;
}
#toc a.xref {
  white-space: normal;
}
/* references */
.references dt {
  text-align: right;
  font-weight: bold;
  min-width: 10ch;
  margin-right: 1.5ch;
}
.references dt:target::before {
  content: "⇒";
  width: 15px;
  margin: 0 10px 0 -25px;
}
.references dd {
  margin-left: 12ch !important;
  overflow: auto;
}

.refInstance {
  margin-bottom: 1.25em;
}

.references .ascii {
  margin-bottom: 0.25em;
}

/* index */
#rfc\.index\.index + ul {
  margin-left: 0;
}

/* authors */
address.vcard {
  font-style: normal;
  margin: 1em 0;
}
address.vcard .nameRole {
  font-weight: 700;
  margin-left: 0;
}
address.vcard .label {
  margin: 0.5em 0;
}
address.vcard .type {
  display: none;
}
.alternative-contact {
  margin: 1.5em 0 1em;
}
hr.addr {
  border-top: 1px dashed;
  margin: 0;
  color: #ddd;
  max-width: calc(100% - 16px);
}
@media (min-width: 500px) {
  #authors-addresses > section {
    column-count: 2;
    column-gap: 20px;
  }
  #authors-addresses > section > h2 {
    column-span: all;
  }
  /* hack for break-inside: avoid-column */
  #authors-addresses address {
    display: inline-block;
    break-inside: avoid-column;
  }
}

.rfcEditorRemove p:first-of-type {
  font-style: italic;
}
.cref {
  background-color: rgba(249, 232, 105, 0.3);
  padding: 2px 4px;
}
.crefSource {
  font-style: italic;
}
/* alternative layout for smaller screens */
@media screen and (max-width: 929px) {
  #toc {
    position: fixed;
    z-index: 2;
    top: 0;
    right: 0;
    padding: 1px 0 0 0;
    margin: 0;
    border-bottom: 1px solid #ccc;
    opacity: 0.6;
  }
  #toc.active {
      opacity: 1;
  }
  #toc h2 {
    margin: 0;
    padding: 2px 0 2px 6px;
    padding-right: 1em;
    font-size: 18px;
    line-height: 24px;
    min-width: 190px;
    text-align: right;
    background-color: #444;
    color: white;
    cursor: pointer;
  }
  #toc h2::before { /* css hamburger */
    float: right;
    position: relative;
    width: 1em;
    height: 1px;
    left: -164px;
    margin: 8px 0 0 0;
    background: white none repeat scroll 0 0;
    box-shadow: 0 4px 0 0 white, 0 8px 0 0 white;
    content: "";
  }
  #toc nav {
    display: none;
    background-color: var(--background-color);
    padding: 0.5em 1em 1em;
    overflow: auto;
    overscroll-behavior: contain;
    height: calc(100vh - 48px);
    border-left: 1px solid #ddd;
  }
  #toc.active nav {
    display: block;
  }
  /* Make the collapsed ToC header render white on gray also when it's a link */
  #toc h2 a,
  #toc h2 a:link,
  #toc h2 a:focus,
  #toc h2 a:hover,
  #toc a.toplink,
  #toc a.toplink:hover {
    color: white;
    background-color: #444;
    text-decoration: none;
  }
  #toc a.toplink {
    margin-top: 2px;
  }
}

/* alternative layout for wide screens */
@media screen and (min-width: 930px) {
  body {
    padding-right: 360px;
    padding-right: calc(min(180px + 20%, 500px));
  }
  #toc {
    position: fixed;
    bottom: 0;
    right: 0;
    right: calc(50vw - 480px);
    width: 312px;
    margin: 0;
    padding: 0;
    z-index: 1;
  }
  #toc h2 {
    margin: 0;
    padding: 0.25em 1em 1em 0;
  }
  #toc nav {
    display: block;
    height: calc(90vh - 84px);
    bottom: 0;
    padding: 0.5em 0 2em;
    overflow: auto;
    overscroll-behavior: contain;
    scrollbar-width: thin;
  }
  #toc nav > ul  {
    margin-bottom: 2em;
  }
  #toc ul {
    margin: 0 0 0 4px;
    font-size: var(--small-font-size);
  }
  #toc ul :is(p, li) {
    margin: 2px 0;
    line-height: 22px;
  }
  img { /* future proofing */
    max-width: 100%;
    height: auto;
  }
}

/* pagination */
@media print {
  body {
    width: 100%;
  }
  p {
    orphans: 3;
    widows: 3;
  }
  #n-copyright-notice {
    border-bottom: none;
  }
  #toc, #n-introduction {
    page-break-before: always;
  }
  #toc {
    border-top: none;
    padding-top: 0;
  }
  figure, pre, .vcard {
    page-break-inside: avoid;
  }
  h1, h2, h3, h4, h5, h6 {
    page-break-after: avoid;
  }
  :is(h2, h3, h4, h5, h6)+*, dd {
    page-break-before: avoid;
  }
  pre {
    white-space: pre-wrap;
    word-wrap: break-word;
    font-size: 10pt;
  }
  table {
    border: 1px solid #ddd;
  }
  td {
    border-top: 1px solid #ddd;
  }
  .toplink {
    display: none;
  }
}

@page :first {
  padding-top: 0;
  @top-left {
    content: normal;
    border: none;
  }
  @top-center {
    content: normal;
    border: none;
  }
  @top-right {
    content: normal;
    border: none;
  }
}

@page {
  size: A4;
  margin-bottom: 45mm;
  padding-top: 20px;
}

/* Changes introduced to fix issues found during implementation */

/* Separate body from document info even without intervening H1 */
section {
  clear: both;
}

/* Top align author divs, to avoid names without organization dropping level with org names */
.author {
  vertical-align: top;
}

/* Style section numbers with more space between number and title */
.section-number {
  padding-right: 0.5em;
}

/* Add styling for a link in the ToC that points to the top of the document */
a.toplink {
  float: right;
  margin: 8px 0.5em 0;
}

/* Provide styling for table cell text alignment */
table .text-left {
  text-align: left;
}
table .text-center {
  text-align: center;
}
table .text-right {
  text-align: right;
}

/* Make the alternative author contact information look less like just another
   author, and group it closer with the primary author contact information */
.alternative-contact {
  margin: 0.5em 0 0.25em 0;
}
address .non-ascii {
  margin: 0 0 0 2em;
}

/* With it being possible to set tables with alignment
  left, center, and right, { width: 100%; } does not make sense */
table {
  width: auto;
}

/* Avoid reference text that sits in a block with very wide left margin,
   because of a long floating dt label.*/
.references dd {
  overflow: visible;
}

/* Control caption placement */
caption {
  caption-side: bottom;
}

/* Limit the width of the author address vcard, so names in right-to-left
   script don't end up on the other side of the page. */

address.vcard {
  max-width: 20em;
  margin-right: auto;
}

/* For address alignment dependent on LTR or RTL scripts */
address div.left {
  text-align: left;
}
address div.right {
  text-align: right;
}

/* Dark mode. */
@media (prefers-color-scheme: dark) {
:root {
  --background-color: #121212;
  --text-color: #f0f0f0;
  --title-color: #fff;
  --link-color: #4da4f0;
  --highlight-color: #282828;
  --line-color: #444;
  --pilcrow-weak: #444;
  --pilcrow-strong: #666;
  scrollbar-color: #777 #333;
}
}

/* SVG Trick: a prefix match works because only black and white are allowed */
svg :is([stroke="black"], [stroke^="#000"]) {
  stroke: var(--text-color);
}
svg :is([stroke="white"], [stroke^="#fff"]) {
  stroke: var(--background-color);
}
svg :is([fill="black"], [fill^="#000"], :not([fill])) {
  fill: var(--text-color);
}
svg :is([fill="white"], [fill^="#fff"]) {
  fill: var(--background-color);
}
</style>

</head>
<body class="xml2rfc">
<table class="ears">
<thead><tr>
<td class="left">Internet-Draft</td>
<td class="center">NFS ACL Protocol</td>
<td class="right">January 2025</td>
</tr></thead>
<tfoot><tr>
<td class="left">Lever</td>
<td class="center">Expires 26 July 2025</td>
<td class="right">[Page]</td>
</tr></tfoot>
</table>
<div id="external-metadata" class="document-information"></div>
<div id="internal-metadata" class="document-information">
<dl id="identifiers">
<dt class="label-workgroup">Workgroup:</dt>
<dd class="workgroup">Network File System Version 4</dd>
<dt class="label-internet-draft">Internet-Draft:</dt>
<dd class="internet-draft">draft-cel-nfsv4-nfsacl-latest</dd>
<dt class="label-published">Published:</dt>
<dd class="published">
<time datetime="2025-01-22" class="published">22 January 2025</time>
    </dd>
<dt class="label-intended-status">Intended Status:</dt>
<dd class="intended-status">Informational</dd>
<dt class="label-expires">Expires:</dt>
<dd class="expires"><time datetime="2025-07-26">26 July 2025</time></dd>
<dt class="label-authors">Author:</dt>
<dd class="authors">
<div class="author">
      <div class="author-name">C. Lever, <span class="editor">Ed.</span>
</div>
<div class="org">Oracle</div>
</div>
</dd>
</dl>
</div>
<h1 id="title">The Network File System Access Control List Protocol</h1>
<section id="section-abstract">
      <h2 id="abstract"><a href="#abstract" class="selfRef">Abstract</a></h2>
<p id="section-abstract-1">This Informational document describes the NFSACL protocol.
NFSACL is a legacy member of the Network File System family
of protocols that NFS clients use to access and modify Access
Control Lists stored on an NFS version 2 or version 3 server.<a href="#section-abstract-1" class="pilcrow">¶</a></p>
</section>
<section class="note rfcEditorRemove" id="section-note.1">
      <h2 id="name-about-this-document">
<a href="#name-about-this-document" class="section-name selfRef">About This Document</a>
      </h2>
<p id="section-note.1-1">This note is to be removed before publishing as an RFC.<a href="#section-note.1-1" class="pilcrow">¶</a></p>
<p id="section-note.1-2">
        The latest revision of this draft can be found at <span><a href="https://chucklever.github.io/i-d-nfs-acl/draft-cel-nfsv4-nfsacl.html">https://chucklever.github.io/i-d-nfs-acl/draft-cel-nfsv4-nfsacl.html</a></span>.
        Status information for this document may be found at <span><a href="https://datatracker.ietf.org/doc/draft-cel-nfsv4-nfsacl/">https://datatracker.ietf.org/doc/draft-cel-nfsv4-nfsacl/</a></span>.<a href="#section-note.1-2" class="pilcrow">¶</a></p>
<p id="section-note.1-3">
        Discussion of this document takes place on the
        Network File System Version 4 Working Group mailing list (<span><a href="mailto:nfsv4@ietf.org">mailto:nfsv4@ietf.org</a></span>),
        which is archived at <span><a href="https://mailarchive.ietf.org/arch/browse/nfsv4/">https://mailarchive.ietf.org/arch/browse/nfsv4/</a></span>.
        Subscribe at <span><a href="https://www.ietf.org/mailman/listinfo/nfsv4/">https://www.ietf.org/mailman/listinfo/nfsv4/</a></span>.<a href="#section-note.1-3" class="pilcrow">¶</a></p>
<p id="section-note.1-4">Source for this draft and an issue tracker can be found at
        <span><a href="https://github.com/chucklever/i-d-nfs-acl">https://github.com/chucklever/i-d-nfs-acl</a></span>.<a href="#section-note.1-4" class="pilcrow">¶</a></p>
</section>
<div id="status-of-memo">
<section id="section-boilerplate.1">
        <h2 id="name-status-of-this-memo">
<a href="#name-status-of-this-memo" class="section-name selfRef">Status of This Memo</a>
        </h2>
<p id="section-boilerplate.1-1">
        This Internet-Draft is submitted in full conformance with the
        provisions of BCP 78 and BCP 79.<a href="#section-boilerplate.1-1" class="pilcrow">¶</a></p>
<p id="section-boilerplate.1-2">
        Internet-Drafts are working documents of the Internet Engineering Task
        Force (IETF). Note that other groups may also distribute working
        documents as Internet-Drafts. The list of current Internet-Drafts is
        at <span><a href="https://datatracker.ietf.org/drafts/current/">https://datatracker.ietf.org/drafts/current/</a></span>.<a href="#section-boilerplate.1-2" class="pilcrow">¶</a></p>
<p id="section-boilerplate.1-3">
        Internet-Drafts are draft documents valid for a maximum of six months
        and may be updated, replaced, or obsoleted by other documents at any
        time. It is inappropriate to use Internet-Drafts as reference
        material or to cite them other than as "work in progress."<a href="#section-boilerplate.1-3" class="pilcrow">¶</a></p>
<p id="section-boilerplate.1-4">
        This Internet-Draft will expire on 26 July 2025.<a href="#section-boilerplate.1-4" class="pilcrow">¶</a></p>
</section>
</div>
<div id="copyright">
<section id="section-boilerplate.2">
        <h2 id="name-copyright-notice">
<a href="#name-copyright-notice" class="section-name selfRef">Copyright Notice</a>
        </h2>
<p id="section-boilerplate.2-1">
            Copyright (c) 2025 IETF Trust and the persons identified as the
            document authors. All rights reserved.<a href="#section-boilerplate.2-1" class="pilcrow">¶</a></p>
<p id="section-boilerplate.2-2">
            This document is subject to BCP 78 and the IETF Trust's Legal
            Provisions Relating to IETF Documents
            (<span><a href="https://trustee.ietf.org/license-info">https://trustee.ietf.org/license-info</a></span>) in effect on the date of
            publication of this document. Please review these documents
            carefully, as they describe your rights and restrictions with
            respect to this document. Code Components extracted from this
            document must include Revised BSD License text as described in
            Section 4.e of the Trust Legal Provisions and are provided without
            warranty as described in the Revised BSD License.<a href="#section-boilerplate.2-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="toc">
<section id="section-toc.1">
        <a href="#" onclick="scroll(0,0)" class="toplink">▲</a><h2 id="name-table-of-contents">
<a href="#name-table-of-contents" class="section-name selfRef">Table of Contents</a>
        </h2>
<nav class="toc"><ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.1">
            <p id="section-toc.1-1.1.1" class="keepWithNext"><a href="#section-1" class="auto internal xref">1</a>.  <a href="#name-introduction" class="internal xref">Introduction</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2">
            <p id="section-toc.1-1.2.1" class="keepWithNext"><a href="#section-2" class="auto internal xref">2</a>.  <a href="#name-conventions-and-definitions" class="internal xref">Conventions and Definitions</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3">
            <p id="section-toc.1-1.3.1"><a href="#section-3" class="auto internal xref">3</a>.  <a href="#name-general-concepts" class="internal xref">General Concepts</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3.2.1">
                <p id="section-toc.1-1.3.2.1.1" class="keepWithNext"><a href="#section-3.1" class="auto internal xref">3.1</a>.  <a href="#name-a-glossary-of-useful-terms" class="internal xref">A Glossary of Useful Terms</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3.2.2">
                <p id="section-toc.1-1.3.2.2.1"><a href="#section-3.2" class="auto internal xref">3.2</a>.  <a href="#name-remote-procedure-call" class="internal xref">Remote Procedure Call</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3.2.3">
                <p id="section-toc.1-1.3.2.3.1"><a href="#section-3.3" class="auto internal xref">3.3</a>.  <a href="#name-external-data-representatio" class="internal xref">External Data Representation</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3.2.4">
                <p id="section-toc.1-1.3.2.4.1"><a href="#section-3.4" class="auto internal xref">3.4</a>.  <a href="#name-authentication-and-authoriz" class="internal xref">Authentication and Authorization</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3.2.5">
                <p id="section-toc.1-1.3.2.5.1"><a href="#section-3.5" class="auto internal xref">3.5</a>.  <a href="#name-file-access-control" class="internal xref">File Access Control</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3.2.5.2.1">
                    <p id="section-toc.1-1.3.2.5.2.1.1"><a href="#section-3.5.1" class="auto internal xref">3.5.1</a>.  <a href="#name-file-ownership" class="internal xref">File Ownership</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3.2.5.2.2">
                    <p id="section-toc.1-1.3.2.5.2.2.1"><a href="#section-3.5.2" class="auto internal xref">3.5.2</a>.  <a href="#name-categories-of-access" class="internal xref">Categories of Access</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3.2.5.2.3">
                    <p id="section-toc.1-1.3.2.5.2.3.1"><a href="#section-3.5.3" class="auto internal xref">3.5.3</a>.  <a href="#name-traditional-permission-bits" class="internal xref">Traditional Permission Bits</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3.2.5.2.4">
                    <p id="section-toc.1-1.3.2.5.2.4.1"><a href="#section-3.5.4" class="auto internal xref">3.5.4</a>.  <a href="#name-access-control-lists" class="internal xref">Access Control Lists</a></p>
</li>
                </ul>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4">
            <p id="section-toc.1-1.4.1"><a href="#section-4" class="auto internal xref">4</a>.  <a href="#name-protocol-elements-common-to" class="internal xref">Protocol Elements Common to Both Versions</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.1">
                <p id="section-toc.1-1.4.2.1.1"><a href="#section-4.1" class="auto internal xref">4.1</a>.  <a href="#name-rpc-authentication" class="internal xref">RPC Authentication</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.2">
                <p id="section-toc.1-1.4.2.2.1"><a href="#section-4.2" class="auto internal xref">4.2</a>.  <a href="#name-constants" class="internal xref">Constants</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.3">
                <p id="section-toc.1-1.4.2.3.1"><a href="#section-4.3" class="auto internal xref">4.3</a>.  <a href="#name-transport-address" class="internal xref">Transport address</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.4">
                <p id="section-toc.1-1.4.2.4.1"><a href="#section-4.4" class="auto internal xref">4.4</a>.  <a href="#name-sizes" class="internal xref">Sizes</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.5">
                <p id="section-toc.1-1.4.2.5.1"><a href="#section-4.5" class="auto internal xref">4.5</a>.  <a href="#name-basic-data-types" class="internal xref">Basic Data Types</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.6">
                <p id="section-toc.1-1.4.2.6.1"><a href="#section-4.6" class="auto internal xref">4.6</a>.  <a href="#name-structured-data-types" class="internal xref">Structured Data types</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.6.2.1">
                    <p id="section-toc.1-1.4.2.6.2.1.1"><a href="#section-4.6.1" class="auto internal xref">4.6.1</a>.  <a href="#name-aclent" class="internal xref">aclent</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.6.2.2">
                    <p id="section-toc.1-1.4.2.6.2.2.1"><a href="#section-4.6.2" class="auto internal xref">4.6.2</a>.  <a href="#name-secattr" class="internal xref">secattr</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.6.2.3">
                    <p id="section-toc.1-1.4.2.6.2.3.1"><a href="#section-4.6.3" class="auto internal xref">4.6.3</a>.  <a href="#name-interoperability-considerat" class="internal xref">Interoperability Considerations</a></p>
</li>
                </ul>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5">
            <p id="section-toc.1-1.5.1"><a href="#section-5" class="auto internal xref">5</a>.  <a href="#name-nfsacl-version-2" class="internal xref">NFSACL Version 2</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5.2.1">
                <p id="section-toc.1-1.5.2.1.1"><a href="#section-5.1" class="auto internal xref">5.1</a>.  <a href="#name-nfs-version-2-behavior-chan" class="internal xref">NFS Version 2 Behavior Changes</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5.2.2">
                <p id="section-toc.1-1.5.2.2.1"><a href="#section-5.2" class="auto internal xref">5.2</a>.  <a href="#name-data-types-inherited-from-n" class="internal xref">Data types inherited from NFS version 2</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5.2.2.2.1">
                    <p id="section-toc.1-1.5.2.2.2.1.1"><a href="#section-5.2.1" class="auto internal xref">5.2.1</a>.  <a href="#name-ftype" class="internal xref">ftype</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5.2.2.2.2">
                    <p id="section-toc.1-1.5.2.2.2.2.1"><a href="#section-5.2.2" class="auto internal xref">5.2.2</a>.  <a href="#name-fhandle_t" class="internal xref">fhandle_t</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5.2.2.2.3">
                    <p id="section-toc.1-1.5.2.2.2.3.1"><a href="#section-5.2.3" class="auto internal xref">5.2.3</a>.  <a href="#name-timeval" class="internal xref">timeval</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5.2.2.2.4">
                    <p id="section-toc.1-1.5.2.2.2.4.1"><a href="#section-5.2.4" class="auto internal xref">5.2.4</a>.  <a href="#name-nfsfattr" class="internal xref">nfsfattr</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5.2.2.2.5">
                    <p id="section-toc.1-1.5.2.2.2.5.1"><a href="#section-5.2.5" class="auto internal xref">5.2.5</a>.  <a href="#name-defined-error-numbers" class="internal xref">Defined Error Numbers</a></p>
</li>
                </ul>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5.2.3">
                <p id="section-toc.1-1.5.2.3.1"><a href="#section-5.3" class="auto internal xref">5.3</a>.  <a href="#name-server-procedures" class="internal xref">Server Procedures</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5.2.3.2.1">
                    <p id="section-toc.1-1.5.2.3.2.1.1"><a href="#section-5.3.1" class="auto internal xref">5.3.1</a>.  <a href="#name-procedure-0-null-no-operati" class="internal xref">Procedure 0: NULL - No Operation</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5.2.3.2.2">
                    <p id="section-toc.1-1.5.2.3.2.2.1"><a href="#section-5.3.2" class="auto internal xref">5.3.2</a>.  <a href="#name-procedure-1-getacl-retrieve" class="internal xref">Procedure 1: GETACL - Retrieve an Access Control List</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5.2.3.2.3">
                    <p id="section-toc.1-1.5.2.3.2.3.1"><a href="#section-5.3.3" class="auto internal xref">5.3.3</a>.  <a href="#name-procedure-2-setacl-set-or-r" class="internal xref">Procedure 2: SETACL - Set or replace an Access Control List</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5.2.3.2.4">
                    <p id="section-toc.1-1.5.2.3.2.4.1"><a href="#section-5.3.4" class="auto internal xref">5.3.4</a>.  <a href="#name-procedure-3-getattr-get-fil" class="internal xref">Procedure 3: GETATTR - Get file attributes</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5.2.3.2.5">
                    <p id="section-toc.1-1.5.2.3.2.5.1"><a href="#section-5.3.5" class="auto internal xref">5.3.5</a>.  <a href="#name-procedure-4-access-check-ac" class="internal xref">Procedure 4: ACCESS - Check access permission</a></p>
</li>
                </ul>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6">
            <p id="section-toc.1-1.6.1"><a href="#section-6" class="auto internal xref">6</a>.  <a href="#name-nfsacl-version-3" class="internal xref">NFSACL Version 3</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6.2.1">
                <p id="section-toc.1-1.6.2.1.1"><a href="#section-6.1" class="auto internal xref">6.1</a>.  <a href="#name-nfs-version-3-behavior-chan" class="internal xref">NFS Version 3 Behavior Changes</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6.2.2">
                <p id="section-toc.1-1.6.2.2.1"><a href="#section-6.2" class="auto internal xref">6.2</a>.  <a href="#name-data-types-inherited-from-nf" class="internal xref">Data types inherited from NFS version 3</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6.2.2.2.1">
                    <p id="section-toc.1-1.6.2.2.2.1.1"><a href="#section-6.2.1" class="auto internal xref">6.2.1</a>.  <a href="#name-scalar-data-types" class="internal xref">Scalar Data types</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6.2.2.2.2">
                    <p id="section-toc.1-1.6.2.2.2.2.1"><a href="#section-6.2.2" class="auto internal xref">6.2.2</a>.  <a href="#name-ftype3" class="internal xref">ftype3</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6.2.2.2.3">
                    <p id="section-toc.1-1.6.2.2.2.3.1"><a href="#section-6.2.3" class="auto internal xref">6.2.3</a>.  <a href="#name-specdata3" class="internal xref">specdata3</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6.2.2.2.4">
                    <p id="section-toc.1-1.6.2.2.2.4.1"><a href="#section-6.2.4" class="auto internal xref">6.2.4</a>.  <a href="#name-nfs_fh3" class="internal xref">nfs_fh3</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6.2.2.2.5">
                    <p id="section-toc.1-1.6.2.2.2.5.1"><a href="#section-6.2.5" class="auto internal xref">6.2.5</a>.  <a href="#name-nfstime3" class="internal xref">nfstime3</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6.2.2.2.6">
                    <p id="section-toc.1-1.6.2.2.2.6.1"><a href="#section-6.2.6" class="auto internal xref">6.2.6</a>.  <a href="#name-nfsfattr3" class="internal xref">nfsfattr3</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6.2.2.2.7">
                    <p id="section-toc.1-1.6.2.2.2.7.1"><a href="#section-6.2.7" class="auto internal xref">6.2.7</a>.  <a href="#name-post_op_attr" class="internal xref">post_op_attr</a></p>
</li>
                </ul>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6.2.3">
                <p id="section-toc.1-1.6.2.3.1"><a href="#section-6.3" class="auto internal xref">6.3</a>.  <a href="#name-error-values" class="internal xref">Error Values</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6.2.4">
                <p id="section-toc.1-1.6.2.4.1"><a href="#section-6.4" class="auto internal xref">6.4</a>.  <a href="#name-server-procedures-2" class="internal xref">Server Procedures</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6.2.4.2.1">
                    <p id="section-toc.1-1.6.2.4.2.1.1"><a href="#section-6.4.1" class="auto internal xref">6.4.1</a>.  <a href="#name-procedure-0-null-no-operatio" class="internal xref">Procedure 0: NULL - No Operation</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6.2.4.2.2">
                    <p id="section-toc.1-1.6.2.4.2.2.1"><a href="#section-6.4.2" class="auto internal xref">6.4.2</a>.  <a href="#name-procedure-1-getacl-retrieve-" class="internal xref">Procedure 1: GETACL - Retrieve an Access Control List</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6.2.4.2.3">
                    <p id="section-toc.1-1.6.2.4.2.3.1"><a href="#section-6.4.3" class="auto internal xref">6.4.3</a>.  <a href="#name-setacl-procedure" class="internal xref">SETACL Procedure</a></p>
</li>
                </ul>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.7">
            <p id="section-toc.1-1.7.1"><a href="#section-7" class="auto internal xref">7</a>.  <a href="#name-implementation-issues" class="internal xref">Implementation Issues</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.7.2.1">
                <p id="section-toc.1-1.7.2.1.1"><a href="#section-7.1" class="auto internal xref">7.1</a>.  <a href="#name-permission-issues" class="internal xref">Permission issues</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.7.2.2">
                <p id="section-toc.1-1.7.2.2.1"><a href="#section-7.2" class="auto internal xref">7.2</a>.  <a href="#name-duplicate-request-cache" class="internal xref">Duplicate Request Cache</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.7.2.3">
                <p id="section-toc.1-1.7.2.3.1"><a href="#section-7.3" class="auto internal xref">7.3</a>.  <a href="#name-caching-policies" class="internal xref">Caching Policies</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.8">
            <p id="section-toc.1-1.8.1"><a href="#section-8" class="auto internal xref">8</a>.  <a href="#name-xdr-protocol-definition" class="internal xref">XDR Protocol Definition</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.8.2.1">
                <p id="section-toc.1-1.8.2.1.1"><a href="#section-8.1" class="auto internal xref">8.1</a>.  <a href="#name-code-component-license" class="internal xref">Code Component License</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.9">
            <p id="section-toc.1-1.9.1"><a href="#section-9" class="auto internal xref">9</a>.  <a href="#name-implementation-status" class="internal xref">Implementation Status</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.9.2.1">
                <p id="section-toc.1-1.9.2.1.1"><a href="#section-9.1" class="auto internal xref">9.1</a>.  <a href="#name-solaris-nfs-server-and-clie" class="internal xref">Solaris NFS server and client</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.9.2.2">
                <p id="section-toc.1-1.9.2.2.1"><a href="#section-9.2" class="auto internal xref">9.2</a>.  <a href="#name-linux-nfs-server-and-client" class="internal xref">Linux NFS server and client</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.10">
            <p id="section-toc.1-1.10.1"><a href="#section-10" class="auto internal xref">10</a>. <a href="#name-security-considerations" class="internal xref">Security Considerations</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.11">
            <p id="section-toc.1-1.11.1"><a href="#section-11" class="auto internal xref">11</a>. <a href="#name-iana-considerations" class="internal xref">IANA Considerations</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.12">
            <p id="section-toc.1-1.12.1"><a href="#section-12" class="auto internal xref">12</a>. <a href="#name-references" class="internal xref">References</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.12.2.1">
                <p id="section-toc.1-1.12.2.1.1"><a href="#section-12.1" class="auto internal xref">12.1</a>.  <a href="#name-normative-references" class="internal xref">Normative References</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.12.2.2">
                <p id="section-toc.1-1.12.2.2.1"><a href="#section-12.2" class="auto internal xref">12.2</a>.  <a href="#name-informative-references" class="internal xref">Informative References</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.13">
            <p id="section-toc.1-1.13.1"><a href="#appendix-A" class="auto internal xref">Appendix A</a>.  <a href="#name-source-material" class="internal xref">Source Material</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.13.2.1">
                <p id="section-toc.1-1.13.2.1.1"><a href="#appendix-A.1" class="auto internal xref">A.1</a>.  <a href="#name-redaction-of-nfsacl-version" class="internal xref">Redaction of NFSACL Version 4</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.13.2.2">
                <p id="section-toc.1-1.13.2.2.1"><a href="#appendix-A.2" class="auto internal xref">A.2</a>.  <a href="#name-redaction-of-getxattrdir-pr" class="internal xref">Redaction of GETXATTRDIR Procedures</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.13.2.3">
                <p id="section-toc.1-1.13.2.3.1"><a href="#appendix-A.3" class="auto internal xref">A.3</a>.  <a href="#name-code-compilation-requiremen" class="internal xref">Code Compilation Requirements</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.14">
            <p id="section-toc.1-1.14.1"><a href="#appendix-B" class="auto internal xref">Appendix B</a>.  <a href="#name-open-questions" class="internal xref">Open Questions</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.15">
            <p id="section-toc.1-1.15.1"><a href="#appendix-C" class="auto internal xref"></a><a href="#name-acknowledgments" class="internal xref">Acknowledgments</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.16">
            <p id="section-toc.1-1.16.1"><a href="#appendix-D" class="auto internal xref"></a><a href="#name-authors-address" class="internal xref">Author's Address</a></p>
</li>
        </ul>
</nav>
</section>
</div>
<div id="introduction">
<section id="section-1">
      <h2 id="name-introduction">
<a href="#section-1" class="section-number selfRef">1. </a><a href="#name-introduction" class="section-name selfRef">Introduction</a>
      </h2>
<p id="section-1-1">The Network File System protocol (NFS) was introduced by Sun
Microsystems in the 1980s. This protocol enabled applications
to access and modify files, via local POSIX system interfaces,
that reside on a remote host <span>[<a href="#RFC1094" class="cite xref">RFC1094</a>]</span>.<a href="#section-1-1" class="pilcrow">¶</a></p>
<p id="section-1-2">Traditionally, permission to access files stored in NFS file
systems is granted by permission bits, mimicking <span>[<a href="#POSIX" class="cite xref">POSIX</a>]</span>.
Permission bits provide coarse-grained access control. The
file owner can control only whether members of her group can
read, write, or execute the file contents, or whether anyone
else (without exception) has those rights.<a href="#section-1-2" class="pilcrow">¶</a></p>
<p id="section-1-3">An Access Control List, or ACL, is a mechanism that enables
file owners to grant specific users fine-grained access
rights to file content <span>[<a href="#IEEE" class="cite xref">IEEE</a>]</span>.<a href="#section-1-3" class="pilcrow">¶</a></p>
<p id="section-1-4">Version 2 of NFS is described in <span>[<a href="#RFC1094" class="cite xref">RFC1094</a>]</span>, and version 3
in <span>[<a href="#RFC1813" class="cite xref">RFC1813</a>]</span>. Neither of these protocols include a
method for accessing or managing ACLs associated
with files shared via the NFS protocol, even though the
local file systems shared via NFS often implemented ACLs and
gave local users mechanisms to read and update them.<a href="#section-1-4" class="pilcrow">¶</a></p>
<p id="section-1-5">Sun created the NFSACL protocol to provide that
mechanism for files accessed remotely via NFS.<a href="#section-1-5" class="pilcrow">¶</a></p>
<p id="section-1-6">This document describes the protocol based on the nfs_acl.x
file that is publicly available in the OpenSolaris
code base <span>[<a href="#OpenSolaris" class="cite xref">OpenSolaris</a>]</span>. The editor has attempted to
introduce no changes to the protocol as it is implemented
in those operating systems and in Linux.<a href="#section-1-6" class="pilcrow">¶</a></p>
<p id="section-1-7">This document assumes readers are familiar with the NFS version
2 or 3 protocols and at least one implementation of them.<a href="#section-1-7" class="pilcrow">¶</a></p>
<p id="section-1-8">Issues of compatibility between the protocol described in
this document and NFSv4 ACLs (as described by <span>[<a href="#RFC8881" class="cite xref">RFC8881</a>]</span>)
are considered out of scope. More information on this topic
is available in Section 6 of draft-rmacklem-nfsv4-posix-acls.<a href="#section-1-8" class="pilcrow">¶</a></p>
</section>
</div>
<div id="conventions-and-definitions">
<section id="section-2">
      <h2 id="name-conventions-and-definitions">
<a href="#section-2" class="section-number selfRef">2. </a><a href="#name-conventions-and-definitions" class="section-name selfRef">Conventions and Definitions</a>
      </h2>
<p id="section-2-1">The key words "<span class="bcp14">MUST</span>", "<span class="bcp14">MUST NOT</span>", "<span class="bcp14">REQUIRED</span>", "<span class="bcp14">SHALL</span>", "<span class="bcp14">SHALL NOT</span>", "<span class="bcp14">SHOULD</span>", "<span class="bcp14">SHOULD NOT</span>", "<span class="bcp14">RECOMMENDED</span>", "<span class="bcp14">NOT RECOMMENDED</span>",
"<span class="bcp14">MAY</span>", and "<span class="bcp14">OPTIONAL</span>" in this document are to be interpreted as
described in BCP 14 <span>[<a href="#RFC2119" class="cite xref">RFC2119</a>]</span> <span>[<a href="#RFC8174" class="cite xref">RFC8174</a>]</span> when, and only when, they
appear in all capitals, as shown here.<a href="#section-2-1" class="pilcrow">¶</a></p>
<p id="section-2-2">As with most publications by standards bodies, this document
has been published so that people may continue to create
compatible implementations. However, note that, as an
Informational document, this RFC does not make any compliance
mandates on implementations of the protocol described herein.<a href="#section-2-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="general-concepts">
<section id="section-3">
      <h2 id="name-general-concepts">
<a href="#section-3" class="section-number selfRef">3. </a><a href="#name-general-concepts" class="section-name selfRef">General Concepts</a>
      </h2>
<div id="a-glossary-of-useful-terms">
<section id="section-3.1">
        <h3 id="name-a-glossary-of-useful-terms">
<a href="#section-3.1" class="section-number selfRef">3.1. </a><a href="#name-a-glossary-of-useful-terms" class="section-name selfRef">A Glossary of Useful Terms</a>
        </h3>
<p id="section-3.1-1">The following are a set of foundational terms used throughout
this document.<a href="#section-3.1-1" class="pilcrow">¶</a></p>
<span class="break"></span><dl class="dlParallel" id="section-3.1-2">
          <dt id="section-3.1-2.1">application:</dt>
          <dd style="margin-left: 1.5em" id="section-3.1-2.2">
            <p id="section-3.1-2.2.1">A program that executes on a client system.<a href="#section-3.1-2.2.1" class="pilcrow">¶</a></p>
</dd>
          <dd class="break"></dd>
<dt id="section-3.1-2.3">client:</dt>
          <dd style="margin-left: 1.5em" id="section-3.1-2.4">
            <p id="section-3.1-2.4.1">A computer system that utilizes compute resources provided by one or
more servers.<a href="#section-3.1-2.4.1" class="pilcrow">¶</a></p>
</dd>
          <dd class="break"></dd>
<dt id="section-3.1-2.5">file:</dt>
          <dd style="margin-left: 1.5em" id="section-3.1-2.6">
            <p id="section-3.1-2.6.1">A unit of data storage consisting of an ordered stream of
bytes and a set of metadata attributes.<a href="#section-3.1-2.6.1" class="pilcrow">¶</a></p>
</dd>
          <dd class="break"></dd>
<dt id="section-3.1-2.7">gid:</dt>
          <dd style="margin-left: 1.5em" id="section-3.1-2.8">
            <p id="section-3.1-2.8.1">A 32-bit unsigned integer that represents a group of users.<a href="#section-3.1-2.8.1" class="pilcrow">¶</a></p>
</dd>
          <dd class="break"></dd>
<dt id="section-3.1-2.9">server:</dt>
          <dd style="margin-left: 1.5em" id="section-3.1-2.10">
            <p id="section-3.1-2.10.1">A computer system that provides compute resources to network peers.<a href="#section-3.1-2.10.1" class="pilcrow">¶</a></p>
</dd>
          <dd class="break"></dd>
<dt id="section-3.1-2.11">uid:</dt>
          <dd style="margin-left: 1.5em" id="section-3.1-2.12">
            <p id="section-3.1-2.12.1">A 32-bit unsigned integer that represents a specific user.<a href="#section-3.1-2.12.1" class="pilcrow">¶</a></p>
</dd>
          <dd class="break"></dd>
<dt id="section-3.1-2.13">user:</dt>
          <dd style="margin-left: 1.5em" id="section-3.1-2.14">
            <p id="section-3.1-2.14.1">A person logged in on a client system.<a href="#section-3.1-2.14.1" class="pilcrow">¶</a></p>
</dd>
        <dd class="break"></dd>
</dl>
</section>
</div>
<div id="remote-procedure-call">
<section id="section-3.2">
        <h3 id="name-remote-procedure-call">
<a href="#section-3.2" class="section-number selfRef">3.2. </a><a href="#name-remote-procedure-call" class="section-name selfRef">Remote Procedure Call</a>
        </h3>
<p id="section-3.2-1">The Sun Remote Procedure Call (SunRPC) specification provides
a procedure-oriented interface to remote services. Each server
supplies a program, which is a set of procedures. The NFS
service is one such program. The combination of host address,
program number, version number, and procedure number specify one
remote service procedure.  Servers can support multiple versions
of a program by using different protocol version numbers.<a href="#section-3.2-1" class="pilcrow">¶</a></p>
<p id="section-3.2-2">The NFS and NFSACL protocols are both based on SunRPC. The
remainder of this document assumes an NFS environment that is
implemented on top of SunRPC, as it is specified in <span>[<a href="#RFC5531" class="cite xref">RFC5531</a>]</span>.<a href="#section-3.2-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="external-data-representation">
<section id="section-3.3">
        <h3 id="name-external-data-representatio">
<a href="#section-3.3" class="section-number selfRef">3.3. </a><a href="#name-external-data-representatio" class="section-name selfRef">External Data Representation</a>
        </h3>
<p id="section-3.3-1">The eXternal Data Representation (XDR) specification provides a
standard way of representing a set of data types on a network.
XDR addresses the problem of communication between network
peers with different byte orders, structure alignment, and data
type representation.<a href="#section-3.3-1" class="pilcrow">¶</a></p>
<p id="section-3.3-2">This document utilizes the RPC Data Description Language to
specify the XDR format arguments and results to each of the RPC
service procedures that an NFSACL server provides.<a href="#section-3.3-2" class="pilcrow">¶</a></p>
<p id="section-3.3-3">Readers can find a full guide to XDR and the RPC Data Description
Language in <span>[<a href="#RFC4506" class="cite xref">RFC4506</a>]</span>.<a href="#section-3.3-3" class="pilcrow">¶</a></p>
</section>
</div>
<div id="authentication-and-authorization">
<section id="section-3.4">
        <h3 id="name-authentication-and-authoriz">
<a href="#section-3.4" class="section-number selfRef">3.4. </a><a href="#name-authentication-and-authoriz" class="section-name selfRef">Authentication and Authorization</a>
        </h3>
<p id="section-3.4-1">The RPC protocol includes a slot in every procedure call for
user authentication parameters. The specific content of the
authentication parameters is determined by the type of
authentication used by the server and client. A discussion
of the mechanics of RPC user authentication appears in
<span>[<a href="#RFC5531" class="cite xref">RFC5531</a>]</span>, in particular Sections 9 and 10.<a href="#section-3.4-1" class="pilcrow">¶</a></p>
<p id="section-3.4-2">For NFS ACLs, the user ID carried in RPC calls is used
for two purposes:<a href="#section-3.4-2" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-3.4-3.1">
            <p id="section-3.4-3.1.1">When setting an ACL via the SETACL procedure or retrieving
an ACL via the GETACL procedure, the NFSACL service verifies
that the calling user has been granted permission to perform
the procedure.<a href="#section-3.4-3.1.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-3.4-3.2">
            <p id="section-3.4-3.2.1">Each Access Control Entry (see below) contains an element
that identifies the user to which the ACE applies. That
user is represented by a 32-bit user ID. The value of the
user ID in each ACE has the same meaning and mapping as
the value of incoming RPC calls.<a href="#section-3.4-3.2.1" class="pilcrow">¶</a></p>
</li>
        </ul>
<p id="section-3.4-4">Using user ids and group ids implies that the client and
server either share the same ID list or do local user and
group ID mapping. Servers and clients must agree on the
mapping from user to uid and from group to gid, for those
sites that do not implement a consistent user ID and group
ID number space. In practice, such mapping is typically
performed on the server, following a static mapping scheme
or a mapping established by the user from a client at
mount time.<a href="#section-3.4-4" class="pilcrow">¶</a></p>
<p id="section-3.4-5">The AUTH_GSS style of authentication provides stronger
security through the use of cryptographic authentication.
The server and client must agree on the mapping of the
user's GSS principal to a local UID on the server, but
the name to identity mapping is more operating system
independent than the uid and gid mapping in AUTH_UNIX.<a href="#section-3.4-5" class="pilcrow">¶</a></p>
</section>
</div>
<div id="file-access-control">
<section id="section-3.5">
        <h3 id="name-file-access-control">
<a href="#section-3.5" class="section-number selfRef">3.5. </a><a href="#name-file-access-control" class="section-name selfRef">File Access Control</a>
        </h3>
<p id="section-3.5-1">This section describes the abstractions that a server uses to
determine whether an access or modification to a file is permitted.<a href="#section-3.5-1" class="pilcrow">¶</a></p>
<div id="file-ownership">
<section id="section-3.5.1">
          <h4 id="name-file-ownership">
<a href="#section-3.5.1" class="section-number selfRef">3.5.1. </a><a href="#name-file-ownership" class="section-name selfRef">File Ownership</a>
          </h4>
<p id="section-3.5.1-1">A file’s "owner" is the designated user that is always granted
permission to update that file’s security attributes. As part of
creating a file, the NFS server assigns the file’s owner. Under
normal circumstances the initial file owner is the RPC user who
issued the NFS CREATE procedure. However, server security policies
can mandate replacement of that user (also known as user squashing)
as part of processing a CREATE procedure.<a href="#section-3.5.1-1" class="pilcrow">¶</a></p>
<p id="section-3.5.1-2">An existing file’s designated owner can subsequently be changed by
an NFS SETATTR procedure. After that change, the new owner is
granted permission to update the file’s security attributes and
the old owner is no longer treated specially.<a href="#section-3.5.1-2" class="pilcrow">¶</a></p>
<p id="section-3.5.1-3">A file’s "owner group" is a short list of users that have
similar privileges as the file’s owner, but are treated as a
separate category for the purpose of permission checking.<a href="#section-3.5.1-3" class="pilcrow">¶</a></p>
<p id="section-3.5.1-4">Any user who is not a file's owner or a member of its owner
group falls into the third category, known as "everyone" or
"other".<a href="#section-3.5.1-4" class="pilcrow">¶</a></p>
<div id="superuser-access">
<section id="section-3.5.1.1">
            <h5 id="name-superuser-access">
<a href="#section-3.5.1.1" class="section-number selfRef">3.5.1.1. </a><a href="#name-superuser-access" class="section-name selfRef">Superuser Access</a>
            </h5>
<p id="section-3.5.1.1-1">On most operating systems, there is a category of users known as
privileged users or superusers. These users can bypass most or
all access controls on files.<a href="#section-3.5.1.1-1" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
<div id="categories-of-access">
<section id="section-3.5.2">
          <h4 id="name-categories-of-access">
<a href="#section-3.5.2" class="section-number selfRef">3.5.2. </a><a href="#name-categories-of-access" class="section-name selfRef">Categories of Access</a>
          </h4>
<p id="section-3.5.2-1">In NFS versions 2 and 3, there are three rudimentary categories
of access:<a href="#section-3.5.2-1" class="pilcrow">¶</a></p>
<span class="break"></span><dl class="dlParallel" id="section-3.5.2-2">
            <dt id="section-3.5.2-2.1">Read access:</dt>
            <dd style="margin-left: 1.5em" id="section-3.5.2-2.2">
              <p id="section-3.5.2-2.2.1">Read access grants permission for a user to read a file or
directory.<a href="#section-3.5.2-2.2.1" class="pilcrow">¶</a></p>
</dd>
            <dd class="break"></dd>
<dt id="section-3.5.2-2.3">Write access:</dt>
            <dd style="margin-left: 1.5em" id="section-3.5.2-2.4">
              <p id="section-3.5.2-2.4.1">Write access grants permission for a user to modify a file
or directory.<a href="#section-3.5.2-2.4.1" class="pilcrow">¶</a></p>
</dd>
            <dd class="break"></dd>
<dt id="section-3.5.2-2.5">Execute access:</dt>
            <dd style="margin-left: 1.5em" id="section-3.5.2-2.6">
              <p id="section-3.5.2-2.6.1">For a file, execute access grants permission for the user to
treat the file content as executable. For a directory object,
execute access grants permission for the user to perform a
lookup in that directory.<a href="#section-3.5.2-2.6.1" class="pilcrow">¶</a></p>
</dd>
          <dd class="break"></dd>
</dl>
</section>
</div>
<div id="traditional-permission-bits">
<section id="section-3.5.3">
          <h4 id="name-traditional-permission-bits">
<a href="#section-3.5.3" class="section-number selfRef">3.5.3. </a><a href="#name-traditional-permission-bits" class="section-name selfRef">Traditional Permission Bits</a>
          </h4>
<p id="section-3.5.3-1">Permission bits, or mode bits, are the simplest and perhaps
oldest form of access control. Each file object has a set
of mode bits <span>[<a href="#POSIX" class="cite xref">POSIX</a>]</span>.<a href="#section-3.5.3-1" class="pilcrow">¶</a></p>
<p id="section-3.5.3-2">Each of the user categories is given a set of three access
type bits. Altogether there are then nine bit flags for
every file object.<a href="#section-3.5.3-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="access-control-lists">
<section id="section-3.5.4">
          <h4 id="name-access-control-lists">
<a href="#section-3.5.4" class="section-number selfRef">3.5.4. </a><a href="#name-access-control-lists" class="section-name selfRef">Access Control Lists</a>
          </h4>
<p id="section-3.5.4-1">An Access Control Entry, or ACE, represents a set of access categories
and a specific user or group. An Access Control List is a list of ACEs.<a href="#section-3.5.4-1" class="pilcrow">¶</a></p>
<p id="section-3.5.4-2">Mode bits, as explained in the previous section, are essentially an
ACL that always contains exactly three ACEs: one for the file's owner,
one for the file's owner group, and one for everyone else.<a href="#section-3.5.4-2" class="pilcrow">¶</a></p>
<div id="interpreting-access-control-lists">
<section id="section-3.5.4.1">
            <h5 id="name-interpreting-access-control">
<a href="#section-3.5.4.1" class="section-number selfRef">3.5.4.1. </a><a href="#name-interpreting-access-control" class="section-name selfRef">Interpreting Access Control Lists</a>
            </h5>
<p id="section-3.5.4.1-1">An NFS Access Control List is a list of three or more
Access Control Entries (ACEs) associated with one file
system object. Each Access Control Entry in this list
specifies a user and a set of access types granted to
that user.<a href="#section-3.5.4.1-1" class="pilcrow">¶</a></p>
<p id="section-3.5.4.1-2">Only ACEs that match the requester are considered. Each
ACE is processed until all of the bits of the requester's
access have been ALLOWED. Once a bit has been ALLOWED,
that bit is no longer considered in the processing
of subsequent ACEs in the list.<a href="#section-3.5.4.1-2" class="pilcrow">¶</a></p>
<p id="section-3.5.4.1-3">When the ACL has been fully processed, if there are bits
in the requester's mask that have not been ALLOWED,
access of that type is denied.<a href="#section-3.5.4.1-3" class="pilcrow">¶</a></p>
<p id="section-3.5.4.1-4">Note that an ACL might not be the sole determiner of access. For example:<a href="#section-3.5.4.1-4" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-3.5.4.1-5.1">
                <p id="section-3.5.4.1-5.1.1">In the case of a file system exported as read-only,
the server may deny write access even though an object's
ACL grants it.<a href="#section-3.5.4.1-5.1.1" class="pilcrow">¶</a></p>
</li>
              <li class="normal" id="section-3.5.4.1-5.2">
                <p id="section-3.5.4.1-5.2.1">Server implementations can grant some limited permission
to update an ACL in order to prevent a situation from
rising in which there is no valid way to ever modify the ACL.<a href="#section-3.5.4.1-5.2.1" class="pilcrow">¶</a></p>
</li>
              <li class="normal" id="section-3.5.4.1-5.3">
                <p id="section-3.5.4.1-5.3.1">All servers will allow a user the ability to read the
data of the file when only the execute permission is granted
(i.e., if the ACL denies the user the NA_READ access and
allows the user NA_EXEC, the server will allow the user to
read the data of the file).<a href="#section-3.5.4.1-5.3.1" class="pilcrow">¶</a></p>
</li>
              <li class="normal" id="section-3.5.4.1-5.4">
                <p id="section-3.5.4.1-5.4.1">Some server implementations have the notion of
owner-override, in which the owner of the object is allowed
to override accesses that are denied by the ACL. This can be
helpful, for example, to allow users continued access to
open files on which the permissions have changed.<a href="#section-3.5.4.1-5.4.1" class="pilcrow">¶</a></p>
</li>
              <li class="normal" id="section-3.5.4.1-5.5">
                <p id="section-3.5.4.1-5.5.1">Some server implementations have the notion of a
"superuser" that has privileges beyond an ordinary user.
The superuser may be able to read or write data or metadata
in ways that would otherwise not be permitted by the object's
ACL.<a href="#section-3.5.4.1-5.5.1" class="pilcrow">¶</a></p>
</li>
            </ul>
<p id="section-3.5.4.1-6">Clients do not perform their own access checks based
on their interpretation of an ACL, but rather use either
the NFSACL version 2 ACCESS procedure or the NFS version 3
ACCESS procedure to perform access checks. This enables a
client to act on the results of having the server determine
whether or not access should be granted based on its
interpretation of the ACL.<a href="#section-3.5.4.1-6" class="pilcrow">¶</a></p>
<p id="section-3.5.4.1-7">In particular, clients must be aware of situations in which
an object's ACL grants a certain access even though the
server will not enforce it. A client sends an appropriate
ACCESS operation prior to servicing an application request
to determine whether the user or application should be
granted the access requested.<a href="#section-3.5.4.1-7" class="pilcrow">¶</a></p>
</section>
</div>
<div id="acls-in-operation">
<section id="section-3.5.4.2">
            <h5 id="name-acls-in-operation">
<a href="#section-3.5.4.2" class="section-number selfRef">3.5.4.2. </a><a href="#name-acls-in-operation" class="section-name selfRef">ACLs in Operation</a>
            </h5>
<p id="section-3.5.4.2-1">The SETACL procedure sets two types of Access Control Lists:<a href="#section-3.5.4.2-1" class="pilcrow">¶</a></p>
<span class="break"></span><dl class="dlParallel" id="section-3.5.4.2-2">
              <dt id="section-3.5.4.2-2.1">Access:</dt>
              <dd style="margin-left: 1.5em" id="section-3.5.4.2-2.2">
                <p id="section-3.5.4.2-2.2.1">An NFS access ACL specifies the access permission
for a file object. Access Control Entries in an ACL's
"aclent" field comprise the object's access ACL.<a href="#section-3.5.4.2-2.2.1" class="pilcrow">¶</a></p>
</dd>
              <dd class="break"></dd>
<dt id="section-3.5.4.2-2.3">Default:</dt>
              <dd style="margin-left: 1.5em" id="section-3.5.4.2-2.4">
                <p id="section-3.5.4.2-2.4.1">An NFS default ACL specifies the default ACL that
is set on objects that are children of a directory.
Access Control Entries in an ACL's "dfaclent" comprise
an object's default ACL. The default ACL does not affect
access to the object on which it is set.<a href="#section-3.5.4.2-2.4.1" class="pilcrow">¶</a></p>
</dd>
            <dd class="break"></dd>
</dl>
<aside id="section-3.5.4.2-3">
              <p id="section-3.5.4.2-3.1">What error, if any, is returned if a client attempts to set
a default ACL on a non-directory object?
What error is returned if an invalid mask bit is set or
the ACL argument has too many ACEs?<a href="#section-3.5.4.2-3.1" class="pilcrow">¶</a></p>
</aside>
<p id="section-3.5.4.2-4">Each NFS ACL must have one ACE for each of
NA_USER_OBJ, NA_GROUP_OBJ and NA_OTHER_OBJ.
An NFS ACL that consists only of these
three ACEs is referred to as a minimal NFS ACL.
A server responds with ACL2ERR_IO or ACL3ERR_INVAL,
depending on the version of NFSACL that is in use,
if a client attempts to set an NFS ACL that does not
contain these ACEs.<a href="#section-3.5.4.2-4" class="pilcrow">¶</a></p>
<p id="section-3.5.4.2-5">An NFS ACL may zero or more NA_USER and/or NA_GROUP
ACEs.<a href="#section-3.5.4.2-5" class="pilcrow">¶</a></p>
<aside id="section-3.5.4.2-6">
              <p id="section-3.5.4.2-6.1">What happens when more than one bit is set in the
"type" field? What does the NA_ACL_DEFAULT bit do?<a href="#section-3.5.4.2-6.1" class="pilcrow">¶</a></p>
</aside>
<p id="section-3.5.4.2-7">The "id" field in an Access Control Entry is interpreted as follows:<a href="#section-3.5.4.2-7" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-3.5.4.2-8.1">
                <p id="section-3.5.4.2-8.1.1">For an ACE that specifies an NA_USER_OBJ, NA_USER,
NA_GROUP, and NA_GROUP_OBJ, the "id" field contains
a UID or GID value that identifies the user on the
server whose access permission is being set.<a href="#section-3.5.4.2-8.1.1" class="pilcrow">¶</a></p>
</li>
              <li class="normal" id="section-3.5.4.2-8.2">
                <p id="section-3.5.4.2-8.2.1">For an ACE that specifies other types of permission,
the "id" field is ignored.<a href="#section-3.5.4.2-8.2.1" class="pilcrow">¶</a></p>
</li>
            </ul>
</section>
</div>
<div id="relationship-between-acls-and-other-file-attributes">
<section id="section-3.5.4.3">
            <h5 id="name-relationship-between-acls-a">
<a href="#section-3.5.4.3" class="section-number selfRef">3.5.4.3. </a><a href="#name-relationship-between-acls-a" class="section-name selfRef">Relationship Between ACLs and Other File Attributes</a>
            </h5>
<p id="section-3.5.4.3-1">How file ownership relates to @OWNER, @GROUP, and @EVERYONE<a href="#section-3.5.4.3-1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-3.5.4.3-2.1">
                <p id="section-3.5.4.3-2.1.1">chown changes the meaning of @OWNER<a href="#section-3.5.4.3-2.1.1" class="pilcrow">¶</a></p>
</li>
              <li class="normal" id="section-3.5.4.3-2.2">
                <p id="section-3.5.4.3-2.2.1">Does chmod change the content of the file's ACL as well, and if so, how?<a href="#section-3.5.4.3-2.2.1" class="pilcrow">¶</a></p>
</li>
              <li class="normal" id="section-3.5.4.3-2.3">
                <p id="section-3.5.4.3-2.3.1">Are changes to the file's ACL reflected in the file's mode bits, and if so, how?<a href="#section-3.5.4.3-2.3.1" class="pilcrow">¶</a></p>
</li>
            </ul>
<aside id="section-3.5.4.3-3">
              <p id="section-3.5.4.3-3.1">From rmacklem's draft. Is the following true of legacy NFS ACLs?<a href="#section-3.5.4.3-3.1" class="pilcrow">¶</a></p>
</aside>
<p id="section-3.5.4.3-4">Setting a file object's mode bits via the NFS SETATTR procedure
can change the ACL and setting the NFS access ACL can change
the file object's mode mode bits. As such, the order of setting
the attributes related to mode and NFS ACLs is important.<a href="#section-3.5.4.3-4" class="pilcrow">¶</a></p>
</section>
</div>
<div id="acl-inheritance">
<section id="section-3.5.4.4">
            <h5 id="name-acl-inheritance">
<a href="#section-3.5.4.4" class="section-number selfRef">3.5.4.4. </a><a href="#name-acl-inheritance" class="section-name selfRef">ACL Inheritance</a>
            </h5>
<aside id="section-3.5.4.4-1">
              <p id="section-3.5.4.4-1.1">Section needs to explain how default ACLs work and what
impact they have on the mode bits of the new file.<a href="#section-3.5.4.4-1.1" class="pilcrow">¶</a></p>
</aside>
<p id="section-3.5.4.4-2">A client uses one of the NFS CREATE, MKDIR, or MKNOD procedures
to request instantiatiation of a new file object. The server uses
the default ACL from the parent directory as the initial access
ACL on the new object.<a href="#section-3.5.4.4-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="historical-references">
<section id="section-3.5.4.5">
            <h5 id="name-historical-references">
<a href="#section-3.5.4.5" class="section-number selfRef">3.5.4.5. </a><a href="#name-historical-references" class="section-name selfRef">Historical References</a>
            </h5>
<p id="section-3.5.4.5-1">The section entitled "The POSIX 1003.1e/1003.2c Working Group"
in <span>[<a href="#Gruenbacher" class="cite xref">Gruenbacher</a>]</span> details the history of POSIX standards efforts
with regard to file access control.<a href="#section-3.5.4.5-1" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
</section>
</div>
</section>
</div>
<div id="protocol-elements-common-to-both-versions">
<section id="section-4">
      <h2 id="name-protocol-elements-common-to">
<a href="#section-4" class="section-number selfRef">4. </a><a href="#name-protocol-elements-common-to" class="section-name selfRef">Protocol Elements Common to Both Versions</a>
      </h2>
<div id="rpc-authentication">
<section id="section-4.1">
        <h3 id="name-rpc-authentication">
<a href="#section-4.1" class="section-number selfRef">4.1. </a><a href="#name-rpc-authentication" class="section-name selfRef">RPC Authentication</a>
        </h3>
<p id="section-4.1-1">The NFSACL service uses AUTH_NONE in the NULL procedure.
All RPC authentication flavors can be used for other procedures.<a href="#section-4.1-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="constants">
<section id="section-4.2">
        <h3 id="name-constants">
<a href="#section-4.2" class="section-number selfRef">4.2. </a><a href="#name-constants" class="section-name selfRef">Constants</a>
        </h3>
<p id="section-4.2-1">These are the RPC constants needed to call the NFS Version 3
service.  They are given in decimal.<a href="#section-4.2-1" class="pilcrow">¶</a></p>
<span class="break"></span><dl class="dlParallel" id="section-4.2-2">
          <dt id="section-4.2-2.1">100227</dt>
          <dd style="margin-left: 1.5em" id="section-4.2-2.2">
            <p id="section-4.2-2.2.1">The RPC program number for the NFSACL protocol<a href="#section-4.2-2.2.1" class="pilcrow">¶</a></p>
</dd>
        <dd class="break"></dd>
</dl>
<p id="section-4.2-3">Only versions 2 and 3 of this RPC program are valid.<a href="#section-4.2-3" class="pilcrow">¶</a></p>
</section>
</div>
<div id="transport-address">
<section id="section-4.3">
        <h3 id="name-transport-address">
<a href="#section-4.3" class="section-number selfRef">4.3. </a><a href="#name-transport-address" class="section-name selfRef">Transport address</a>
        </h3>
<p id="section-4.3-1">The NFSACL protocol can operate over the TCP, UDP, and RDMA
transport protocols.
For TCP and UDP, it uses port 2049, and for RDMA, it uses 20049.
In both cases, this is the same as the base NFS protocol.<a href="#section-4.3-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="sizes">
<section id="section-4.4">
        <h3 id="name-sizes">
<a href="#section-4.4" class="section-number selfRef">4.4. </a><a href="#name-sizes" class="section-name selfRef">Sizes</a>
        </h3>
<span class="break"></span><dl class="dlParallel" id="section-4.4-1">
          <dt id="section-4.4-1.1">NFS_ACL_MAX_ENTRIES 1024</dt>
          <dd style="margin-left: 1.5em" id="section-4.4-1.2">
            <p id="section-4.4-1.2.1">The maximum number of Access Control Entries allowed in one Access Control List array.<a href="#section-4.4-1.2.1" class="pilcrow">¶</a></p>
</dd>
        <dd class="break"></dd>
</dl>
</section>
</div>
<div id="basic-data-types">
<section id="section-4.5">
        <h3 id="name-basic-data-types">
<a href="#section-4.5" class="section-number selfRef">4.5. </a><a href="#name-basic-data-types" class="section-name selfRef">Basic Data Types</a>
        </h3>
<p id="section-4.5-1">The following XDR definitions are basic scalar types that are used in other structures.<a href="#section-4.5-1" class="pilcrow">¶</a></p>
<span class="break"></span><dl class="dlParallel" id="section-4.5-2">
          <dt id="section-4.5-2.1">uid:</dt>
          <dd style="margin-left: 1.5em" id="section-4.5-2.2">
            <p id="section-4.5-2.2.1">typedef int uid;
o_mode:<a href="#section-4.5-2.2.1" class="pilcrow">¶</a></p>
</dd>
          <dd class="break"></dd>
<dt id="section-4.5-2.3"></dt>
          <dd style="margin-left: 1.5em" id="section-4.5-2.4">
            <p id="section-4.5-2.4.1">typedef unsigned short o_mode;<a href="#section-4.5-2.4.1" class="pilcrow">¶</a></p>
</dd>
        <dd class="break"></dd>
</dl>
</section>
</div>
<div id="structured-data-types">
<section id="section-4.6">
        <h3 id="name-structured-data-types">
<a href="#section-4.6" class="section-number selfRef">4.6. </a><a href="#name-structured-data-types" class="section-name selfRef">Structured Data types</a>
        </h3>
<p id="section-4.6-1">The following XDR definitions are common structured data types
that are used in all versions of the NFSACL protocol.<a href="#section-4.6-1" class="pilcrow">¶</a></p>
<div id="aclent">
<section id="section-4.6.1">
          <h4 id="name-aclent">
<a href="#section-4.6.1" class="section-number selfRef">4.6.1. </a><a href="#name-aclent" class="section-name selfRef">aclent</a>
          </h4>
<p id="section-4.6.1-1">This structure represents a single entry in an Access Control List.<a href="#section-4.6.1-1" class="pilcrow">¶</a></p>
<div class="lang-xdr sourcecode" id="section-4.6.1-2">
<pre>
struct aclent {
    int type;
    uid id;
    o_mode perm;
};
</pre><a href="#section-4.6.1-2" class="pilcrow">¶</a>
</div>
<p id="section-4.6.1-3">The "type" element in an Access Control Entry is a bit mask.
The bit field values in this mask are defined as follows:<a href="#section-4.6.1-3" class="pilcrow">¶</a></p>
<div class="lang-xdr sourcecode" id="section-4.6.1-4">
<pre>
const NA_USER_OBJ = 0x1;        /* object owner */
const NA_USER = 0x2;            /* additional users */
const NA_GROUP_OBJ = 0x4;       /* owning group of the object */
const NA_GROUP = 0x8;           /* additional groups */
const NA_CLASS_OBJ = 0x10;      /* file group class and mask entry */
const NA_OTHER_OBJ = 0x20;      /* other entry for the object */
const NA_ACL_DEFAULT = 0x1000;  /* default flag */
</pre><a href="#section-4.6.1-4" class="pilcrow">¶</a>
</div>
<p id="section-4.6.1-5">The "perm" element in an Access Control Entry is also a bit mask.
The bit field values in this mask are defined as follows:<a href="#section-4.6.1-5" class="pilcrow">¶</a></p>
<div class="lang-xdr sourcecode" id="section-4.6.1-6">
<pre>
const NA_READ = 0x4;            /* read permission */
const NA_WRITE = 0x2;           /* write permission */
const NA_EXEC = 0x1;            /* exec permission */
</pre><a href="#section-4.6.1-6" class="pilcrow">¶</a>
</div>
</section>
</div>
<div id="secattr">
<section id="section-4.6.2">
          <h4 id="name-secattr">
<a href="#section-4.6.2" class="section-number selfRef">4.6.2. </a><a href="#name-secattr" class="section-name selfRef">secattr</a>
          </h4>
<p id="section-4.6.2-1">The secattr structure represents, on the wire, the full Access Control
List for one file system object. This list contains an array of
Access Control Entries that apply to the object, plus an array of
default Access Control Entries that are inherited by the object's
children.<a href="#section-4.6.2-1" class="pilcrow">¶</a></p>
<div class="lang-xdr sourcecode" id="section-4.6.2-2">
<pre>
struct secattr {
    u_int mask;
    int aclcnt;
    aclent aclent&lt;NFS_ACL_MAX_ENTRIES&gt;;
    int dfaclcnt;
    aclent dfaclent&lt;NFS_ACL_MAX_ENTRIES&gt;;
};
</pre><a href="#section-4.6.2-2" class="pilcrow">¶</a>
</div>
<p id="section-4.6.2-3">The "mask" element of the secattr structure is a bit mask. The
bit field vvalues in this mask are defined as follows:<a href="#section-4.6.2-3" class="pilcrow">¶</a></p>
<div class="lang-xdr sourcecode" id="section-4.6.2-4">
<pre>
const NA_ACL = 0x1;         /* aclent contains a valid list */
const NA_ACLCNT = 0x2;      /* number of entries in the aclent list */
const NA_DFACL = 0x4;       /* dfaclent contains a valid list */
const NA_DFACLCNT = 0x8;    /* number of entries in the dfaclent list */
</pre><a href="#section-4.6.2-4" class="pilcrow">¶</a>
</div>
<p id="section-4.6.2-5">These bit field values are also used in the "mask" element of the
GETACL2args and GETACL3args structures.<a href="#section-4.6.2-5" class="pilcrow">¶</a></p>
</section>
</div>
<div id="interoperability-considerations">
<section id="section-4.6.3">
          <h4 id="name-interoperability-considerat">
<a href="#section-4.6.3" class="section-number selfRef">4.6.3. </a><a href="#name-interoperability-considerat" class="section-name selfRef">Interoperability Considerations</a>
          </h4>
<p id="section-4.6.3-1">Interoperability between NFS peers that do not implement
the NFSACL protocol is what we already have today.
Interoperability between peers that both implement the NFSACL
protocol is described in the rest of this document.<a href="#section-4.6.3-1" class="pilcrow">¶</a></p>
<p id="section-4.6.3-2">The following subsections briefly discuss three new
interoperability scenarios.<a href="#section-4.6.3-2" class="pilcrow">¶</a></p>
<div id="client-implements-nfsacl-server-does-not">
<section id="section-4.6.3.1">
            <h5 id="name-client-implements-nfsacl-se">
<a href="#section-4.6.3.1" class="section-number selfRef">4.6.3.1. </a><a href="#name-client-implements-nfsacl-se" class="section-name selfRef">Client Implements NFSACL, Server Does Not</a>
            </h5>
<p id="section-4.6.3.1-1">Typically an NFS server that implements the NFSACL program will
advertise the presence of NFSACL via an rpcbind registration.
An NFS client that implements NFSACL should perform an rpcbind
query before attempting any NFSACL procedure <span>[<a href="#RFC1833" class="cite xref">RFC1833</a>]</span>.<a href="#section-4.6.3.1-1" class="pilcrow">¶</a></p>
<p id="section-4.6.3.1-2">If the client sends any NFSACL procedure without sending an
rpcbind query first, and the server does not implement the
NFSACL program, the server responds with an RPC access_stat
of PROG_UNAVAIL.<a href="#section-4.6.3.1-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="server-implements-nfsacl-client-does-not">
<section id="section-4.6.3.2">
            <h5 id="name-server-implements-nfsacl-cl">
<a href="#section-4.6.3.2" class="section-number selfRef">4.6.3.2. </a><a href="#name-server-implements-nfsacl-cl" class="section-name selfRef">Server Implements NFSACL, Client Does Not</a>
            </h5>
<p id="section-4.6.3.2-1">An NFS server that implements advanced access control can
deny requests made by a client by responding with
NFS2ERR_ACCESS or NFS3ERR_ACCESS status codes, and an
NFS client has no visibility as to why the denial occurred.
Neither can that client send operations to update
the access control on file objects.<a href="#section-4.6.3.2-1" class="pilcrow">¶</a></p>
<p id="section-4.6.3.2-2">This is a quality of implementation issue for the client.<a href="#section-4.6.3.2-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="client-implements-exported-file-system-does-not">
<section id="section-4.6.3.3">
            <h5 id="name-client-implements-exported-">
<a href="#section-4.6.3.3" class="section-number selfRef">4.6.3.3. </a><a href="#name-client-implements-exported-" class="section-name selfRef">Client Implements, Exported File System Does Not</a>
            </h5>
<p id="section-4.6.3.3-1">An NFS server that implements the NFSACL protocol might
share both file systems that implement ACLs and
file systems that do not. In this case, NFS clients
detect the presence of an NFSACL service on the NFS
server.<a href="#section-4.6.3.3-1" class="pilcrow">¶</a></p>
<p id="section-4.6.3.3-2">For file objects that do not implement ACL support:<a href="#section-4.6.3.3-2" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-4.6.3.3-3.1">
                <p id="section-4.6.3.3-3.1.1">The server responds to a GETACL procedure by returning
a manufactured minimal ACL (ie., only three ACEs) that
reflects the current mode bits of the object.<a href="#section-4.6.3.3-3.1.1" class="pilcrow">¶</a></p>
</li>
              <li class="normal" id="section-4.6.3.3-3.2">
                <p id="section-4.6.3.3-3.2.1">The server responds to a SETACL version 3 procedure by
returning ACL3ERR_NOTSUPP.<a href="#section-4.6.3.3-3.2.1" class="pilcrow">¶</a></p>
</li>
            </ul>
<aside id="section-4.6.3.3-4">
              <p id="section-4.6.3.3-4.1">Linux returns NFS3ERR_NOTSUPP even for NFSACLv2. Check Solaris.<a href="#section-4.6.3.3-4.1" class="pilcrow">¶</a></p>
</aside>
</section>
</div>
</section>
</div>
</section>
</div>
</section>
</div>
<div id="nfsacl-version-2">
<section id="section-5">
      <h2 id="name-nfsacl-version-2">
<a href="#section-5" class="section-number selfRef">5. </a><a href="#name-nfsacl-version-2" class="section-name selfRef">NFSACL Version 2</a>
      </h2>
<p id="section-5-1">Version 2 of the NFSACL protocol is used in conjunction only with
version 2 of the NFS protocol.<a href="#section-5-1" class="pilcrow">¶</a></p>
<div id="nfs-version-2-behavior-changes">
<section id="section-5.1">
        <h3 id="name-nfs-version-2-behavior-chan">
<a href="#section-5.1" class="section-number selfRef">5.1. </a><a href="#name-nfs-version-2-behavior-chan" class="section-name selfRef">NFS Version 2 Behavior Changes</a>
        </h3>
<p id="section-5.1-1">When an NFS version 2 server receives an NFS request on a file
object where an ACL denies permission, the server responds by
terminating the procedure before it is executed and returning
a status value of NFSERR_ACCESS.<a href="#section-5.1-1" class="pilcrow">¶</a></p>
<p id="section-5.1-2">If an Access Control List does not contain an ACE that grants a
requesting user "read" or execute access to the object represented
by the procedure's file handle argument, the following NFS
procedures fail with a status of NFSERR_ACCESS:<a href="#section-5.1-2" class="pilcrow">¶</a></p>
<p id="section-5.1-3">READ, READDIR<a href="#section-5.1-3" class="pilcrow">¶</a></p>
<p id="section-5.1-4">If an Access Control List does not contain an ACE that grants a
requesting user "write" access to the object represented by the
procedure's file handle argument, the following NFS procedures
fail with a status of NFSERR_ACCESS:<a href="#section-5.1-4" class="pilcrow">¶</a></p>
<p id="section-5.1-5">WRITE, CREATE, MKNOD, MKDIR, SYMLINK<a href="#section-5.1-5" class="pilcrow">¶</a></p>
<p id="section-5.1-6">If an Access Control List does not contain an ACE that grants a
requesting user "execute" access to the object represented by the
procedure's file handle argument, the following NFS procedures
fail with a status of NFSERR_ACCESS:<a href="#section-5.1-6" class="pilcrow">¶</a></p>
<p id="section-5.1-7">LOOKUP<a href="#section-5.1-7" class="pilcrow">¶</a></p>
</section>
</div>
<div id="data-types-inherited-from-nfs-version-2">
<section id="section-5.2">
        <h3 id="name-data-types-inherited-from-n">
<a href="#section-5.2" class="section-number selfRef">5.2. </a><a href="#name-data-types-inherited-from-n" class="section-name selfRef">Data types inherited from NFS version 2</a>
        </h3>
<div id="ftype">
<section id="section-5.2.1">
          <h4 id="name-ftype">
<a href="#section-5.2.1" class="section-number selfRef">5.2.1. </a><a href="#name-ftype" class="section-name selfRef">ftype</a>
          </h4>
<p id="section-5.2.1-1">The enumeration "ftype" gives the type of an NFS version 3 file.
This definition comes from <span><a href="https://rfc-editor.org/rfc/rfc1094#section-2.3.2" class="relref">Section 2.3.2</a> of [<a href="#RFC1094" class="cite xref">RFC1094</a>]</span>:<a href="#section-5.2.1-1" class="pilcrow">¶</a></p>
<div class="lang-xdr sourcecode" id="section-5.2.1-2">
<pre>
enum ftype {
    NFNON = 0,
    NFREG = 1,
    NFDIR = 2,
    NFBLK = 3,
    NFCHR = 4,
    NFLNK = 5,
};
</pre><a href="#section-5.2.1-2" class="pilcrow">¶</a>
</div>
</section>
</div>
<div id="fhandlet">
<section id="section-5.2.2">
          <h4 id="name-fhandle_t">
<a href="#section-5.2.2" class="section-number selfRef">5.2.2. </a><a href="#name-fhandle_t" class="section-name selfRef">fhandle_t</a>
          </h4>
<p id="section-5.2.2-1">NFS version 2 uses a fixed-size file handle. The following definition
comes from <span><a href="https://rfc-editor.org/rfc/rfc1094#section-2.3.3" class="relref">Section 2.3.3</a> of [<a href="#RFC1094" class="cite xref">RFC1094</a>]</span>:<a href="#section-5.2.2-1" class="pilcrow">¶</a></p>
<div class="lang-xdr sourcecode" id="section-5.2.2-2">
<pre>
typedef opaque fhandle[FHSIZE];
</pre><a href="#section-5.2.2-2" class="pilcrow">¶</a>
</div>
</section>
</div>
<div id="timeval">
<section id="section-5.2.3">
          <h4 id="name-timeval">
<a href="#section-5.2.3" class="section-number selfRef">5.2.3. </a><a href="#name-timeval" class="section-name selfRef">timeval</a>
          </h4>
<p id="section-5.2.3-1">NFS version 2's "timeval" structure represents the number of seconds
and microseconds since midnight January 1, 1970, Greenwich Mean Time.
This definition comes from <span><a href="https://rfc-editor.org/rfc/rfc1094#section-2.3.4" class="relref">Section 2.3.4</a> of [<a href="#RFC1094" class="cite xref">RFC1094</a>]</span>:<a href="#section-5.2.3-1" class="pilcrow">¶</a></p>
<div class="lang-xdr sourcecode" id="section-5.2.3-2">
<pre>
struct timeval {
    unsigned int seconds;
    unsigned int useconds;
};
</pre><a href="#section-5.2.3-2" class="pilcrow">¶</a>
</div>
</section>
</div>
<div id="nfsfattr">
<section id="section-5.2.4">
          <h4 id="name-nfsfattr">
<a href="#section-5.2.4" class="section-number selfRef">5.2.4. </a><a href="#name-nfsfattr" class="section-name selfRef">nfsfattr</a>
          </h4>
<p id="section-5.2.4-1">This document refers to NFS version 2's file attribute structure
as "nfsfattr". This is the same as the fattr structure described
in <span><a href="https://rfc-editor.org/rfc/rfc1094#section-2.3.5" class="relref">Section 2.3.5</a> of [<a href="#RFC1094" class="cite xref">RFC1094</a>]</span>:<a href="#section-5.2.4-1" class="pilcrow">¶</a></p>
<div class="lang-xdr sourcecode" id="section-5.2.4-2">
<pre>
struct fattr {
    ftype        type;
    unsigned int mode;
    unsigned int nlink;
    unsigned int uid;
    unsigned int gid;
    unsigned int size;
    unsigned int blocksize;
    unsigned int rdev;
    unsigned int blocks;
    unsigned int fsid;
    unsigned int fileid;
    timeval      atime;
    timeval      mtime;
    timeval      ctime;
};
</pre><a href="#section-5.2.4-2" class="pilcrow">¶</a>
</div>
</section>
</div>
<div id="defined-error-numbers">
<section id="section-5.2.5">
          <h4 id="name-defined-error-numbers">
<a href="#section-5.2.5" class="section-number selfRef">5.2.5. </a><a href="#name-defined-error-numbers" class="section-name selfRef">Defined Error Numbers</a>
          </h4>
<p id="section-5.2.5-1"><span><a href="https://rfc-editor.org/rfc/rfc1094#section-2.3.1" class="relref">Section 2.3.1</a> of [<a href="#RFC1094" class="cite xref">RFC1094</a>]</span> describes an enumerated type called
"stat" which provides a status code for NFS version 2 results.
A matching type called "aclstat2" is defined in this document
for the similar purpose of returning NFSACL version 2 procedure
status codes. The numeric values of these two types match up,
though aclstat2 omits some codes that are not relevant to the
NFSACL protocol.<a href="#section-5.2.5-1" class="pilcrow">¶</a></p>
<div class="lang-xdr sourcecode" id="section-5.2.5-2">
<pre>
enum aclstat2 {
    ACL2_OK = 0,
    ACL2ERR_PERM = 1,
    ACL2ERR_IO = 5,
    ACL2ERR_ACCES = 13,
    ACL2ERR_NOSPC = 28,
    ACL2ERR_ROFS = 30,
    ACL2ERR_DQUOT = 69,
    ACL2ERR_STALE = 70,
};
</pre><a href="#section-5.2.5-2" class="pilcrow">¶</a>
</div>
<p id="section-5.2.5-3">These status codes carry the following meanings:<a href="#section-5.2.5-3" class="pilcrow">¶</a></p>
<span class="break"></span><dl class="dlParallel" id="section-5.2.5-4">
            <dt id="section-5.2.5-4.1">ACL2ERR_PERM</dt>
            <dd style="margin-left: 1.5em" id="section-5.2.5-4.2">
              <p id="section-5.2.5-4.2.1">Not owner. The caller does not have correct ownership to perform the requested operation.<a href="#section-5.2.5-4.2.1" class="pilcrow">¶</a></p>
</dd>
            <dd class="break"></dd>
<dt id="section-5.2.5-4.3">ACL2ERR_IO</dt>
            <dd style="margin-left: 1.5em" id="section-5.2.5-4.4">
              <p id="section-5.2.5-4.4.1">Some sort of hard error occurred when the operation was in progress.  This could be a disk error, for example.<a href="#section-5.2.5-4.4.1" class="pilcrow">¶</a></p>
</dd>
            <dd class="break"></dd>
<dt id="section-5.2.5-4.5">ACL2ERR_ACCES</dt>
            <dd style="margin-left: 1.5em" id="section-5.2.5-4.6">
              <p id="section-5.2.5-4.6.1">Permission denied.  The caller does not have the correct permission to perform the requested operation.<a href="#section-5.2.5-4.6.1" class="pilcrow">¶</a></p>
</dd>
            <dd class="break"></dd>
<dt id="section-5.2.5-4.7">ACL2ERR_NOSPC</dt>
            <dd style="margin-left: 1.5em" id="section-5.2.5-4.8">
              <p id="section-5.2.5-4.8.1">No space left on device.  The operation caused the server's file system to reach its limit.<a href="#section-5.2.5-4.8.1" class="pilcrow">¶</a></p>
</dd>
            <dd class="break"></dd>
<dt id="section-5.2.5-4.9">ACL2ERR_ROFS</dt>
            <dd style="margin-left: 1.5em" id="section-5.2.5-4.10">
              <p id="section-5.2.5-4.10.1">Read-only file system.  Write attempted on a read-only file system.<a href="#section-5.2.5-4.10.1" class="pilcrow">¶</a></p>
</dd>
            <dd class="break"></dd>
<dt id="section-5.2.5-4.11">ACL2ERR_DQUOT</dt>
            <dd style="margin-left: 1.5em" id="section-5.2.5-4.12">
              <p id="section-5.2.5-4.12.1">Disk quota exceeded.  The client's disk quota on the server has been exceeded.<a href="#section-5.2.5-4.12.1" class="pilcrow">¶</a></p>
</dd>
            <dd class="break"></dd>
<dt id="section-5.2.5-4.13">ACL2ERR_STALE</dt>
            <dd style="margin-left: 1.5em" id="section-5.2.5-4.14">
              <p id="section-5.2.5-4.14.1">The "fhandle" given in the arguments was invalid.  That is, the file referred to by that file handle no longer exists, or access to it has been revoked.<a href="#section-5.2.5-4.14.1" class="pilcrow">¶</a></p>
</dd>
          <dd class="break"></dd>
</dl>
</section>
</div>
</section>
</div>
<div id="server-procedures">
<section id="section-5.3">
        <h3 id="name-server-procedures">
<a href="#section-5.3" class="section-number selfRef">5.3. </a><a href="#name-server-procedures" class="section-name selfRef">Server Procedures</a>
        </h3>
<div id="procedure-0-null-no-operation">
<section id="section-5.3.1">
          <h4 id="name-procedure-0-null-no-operati">
<a href="#section-5.3.1" class="section-number selfRef">5.3.1. </a><a href="#name-procedure-0-null-no-operati" class="section-name selfRef">Procedure 0: NULL - No Operation</a>
          </h4>
<div id="arguments">
<section id="section-5.3.1.1">
            <h5 id="name-arguments">
<a href="#section-5.3.1.1" class="section-number selfRef">5.3.1.1. </a><a href="#name-arguments" class="section-name selfRef">ARGUMENTS</a>
            </h5>
<div class="lang-xdr sourcecode" id="section-5.3.1.1-1">
<pre>
void;
</pre><a href="#section-5.3.1.1-1" class="pilcrow">¶</a>
</div>
</section>
</div>
<div id="results">
<section id="section-5.3.1.2">
            <h5 id="name-results">
<a href="#section-5.3.1.2" class="section-number selfRef">5.3.1.2. </a><a href="#name-results" class="section-name selfRef">RESULTS</a>
            </h5>
<div class="lang-xdr sourcecode" id="section-5.3.1.2-1">
<pre>
void;
</pre><a href="#section-5.3.1.2-1" class="pilcrow">¶</a>
</div>
</section>
</div>
<div id="description">
<section id="section-5.3.1.3">
            <h5 id="name-description">
<a href="#section-5.3.1.3" class="section-number selfRef">5.3.1.3. </a><a href="#name-description" class="section-name selfRef">DESCRIPTION</a>
            </h5>
<p id="section-5.3.1.3-1">This is the usual NULL procedure with a void argument and void result.<a href="#section-5.3.1.3-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="implementation">
<section id="section-5.3.1.4">
            <h5 id="name-implementation">
<a href="#section-5.3.1.4" class="section-number selfRef">5.3.1.4. </a><a href="#name-implementation" class="section-name selfRef">IMPLEMENTATION</a>
            </h5>
<p id="section-5.3.1.4-1">It is important that this procedure do no work at all so that clients
can use it to measure the overhead of processing a service request.
By convention, the NULL procedure should never require any
authentication.
A server implementation may choose to ignore this convention, if
responding to the NULL procedure call acknowledges the existence
of a resource to an unauthenticated client.<a href="#section-5.3.1.4-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="errors">
<section id="section-5.3.1.5">
            <h5 id="name-errors">
<a href="#section-5.3.1.5" class="section-number selfRef">5.3.1.5. </a><a href="#name-errors" class="section-name selfRef">ERRORS</a>
            </h5>
<p id="section-5.3.1.5-1">Since the NULL procedure returns no result, it can not return an
NFSACL error status code. However, some server implementations may
return RPC-level errors based on security or authentication policy
settings.<a href="#section-5.3.1.5-1" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
<div id="procedure-1-getacl-retrieve-an-access-control-list">
<section id="section-5.3.2">
          <h4 id="name-procedure-1-getacl-retrieve">
<a href="#section-5.3.2" class="section-number selfRef">5.3.2. </a><a href="#name-procedure-1-getacl-retrieve" class="section-name selfRef">Procedure 1: GETACL - Retrieve an Access Control List</a>
          </h4>
<div id="arguments-1">
<section id="section-5.3.2.1">
            <h5 id="name-arguments-2">
<a href="#section-5.3.2.1" class="section-number selfRef">5.3.2.1. </a><a href="#name-arguments-2" class="section-name selfRef">ARGUMENTS</a>
            </h5>
<div class="lang-xdr sourcecode" id="section-5.3.2.1-1">
<pre>
struct GETACL2args {
    fhandle_t fh;
    u_int mask;
};
</pre><a href="#section-5.3.2.1-1" class="pilcrow">¶</a>
</div>
</section>
</div>
<div id="results-1">
<section id="section-5.3.2.2">
            <h5 id="name-results-2">
<a href="#section-5.3.2.2" class="section-number selfRef">5.3.2.2. </a><a href="#name-results-2" class="section-name selfRef">RESULTS</a>
            </h5>
<div class="lang-xdr sourcecode" id="section-5.3.2.2-1">
<pre>
struct GETACL2resok {
    struct nfsfattr attr;
    secattr acl;
};

union GETACL2res switch (enum nfsstat status) {
case ACL2_OK:
    GETACL2resok resok;
default:
    void;
};
</pre><a href="#section-5.3.2.2-1" class="pilcrow">¶</a>
</div>
</section>
</div>
<div id="description-1">
<section id="section-5.3.2.3">
            <h5 id="name-description-2">
<a href="#section-5.3.2.3" class="section-number selfRef">5.3.2.3. </a><a href="#name-description-2" class="section-name selfRef">DESCRIPTION</a>
            </h5>
<p id="section-5.3.2.3-1">The GETACL procedure retrieves Access Control List
information associated with the file system object
specified by the GETACL2args.fh field. The client
obtains this file handle using one of the NFS
version 2 LOOKUP, CREATE, MKDIR, or SYMLINK procedures,
or the MOUNT service, as described in <span>[<a href="#RFC1094" class="cite xref">RFC1094</a>]</span>.<a href="#section-5.3.2.3-1" class="pilcrow">¶</a></p>
<p id="section-5.3.2.3-2">The GETACL2args.mask field specifies which information
is to be returned in the response:<a href="#section-5.3.2.3-2" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-5.3.2.3-3.1">
                <p id="section-5.3.2.3-3.1.1">If the NA_ACL bit is set, the server fills in the
object's access ACL.<a href="#section-5.3.2.3-3.1.1" class="pilcrow">¶</a></p>
</li>
              <li class="normal" id="section-5.3.2.3-3.2">
                <p id="section-5.3.2.3-3.2.1">If the NA_ACLCNT bit is set, the server fills in
the number of ACEs that are in the object's access ACL.<a href="#section-5.3.2.3-3.2.1" class="pilcrow">¶</a></p>
</li>
              <li class="normal" id="section-5.3.2.3-3.3">
                <p id="section-5.3.2.3-3.3.1">If the NA_DFACL bit is set, the server fills in
the object's default ACL.<a href="#section-5.3.2.3-3.3.1" class="pilcrow">¶</a></p>
</li>
              <li class="normal" id="section-5.3.2.3-3.4">
                <p id="section-5.3.2.3-3.4.1">if the NA_DFACLCNT bit is set, the server fills in
the number of ACEs that are in the object's default ACL.<a href="#section-5.3.2.3-3.4.1" class="pilcrow">¶</a></p>
</li>
            </ul>
<p id="section-5.3.2.3-4">If the GETACL procedure is successful, the server sets the
GETACL2res.status field to ACL2_OK. It fills in the
GETACL2resok.attr field with the file object's current
file attributes, as detailed in <span>[<a href="#RFC1094" class="cite xref">RFC1094</a>]</span>. Lastly,
it fills in the GETACL2res.acl field with two counted
arrays of Access Control Entries (ACEs).<a href="#section-5.3.2.3-4" class="pilcrow">¶</a></p>
<p id="section-5.3.2.3-5">Otherwise, GETACL2res.status contains an error status
on failure and no other results are returned.<a href="#section-5.3.2.3-5" class="pilcrow">¶</a></p>
</section>
</div>
<div id="implementation-1">
<section id="section-5.3.2.4">
            <h5 id="name-implementation-2">
<a href="#section-5.3.2.4" class="section-number selfRef">5.3.2.4. </a><a href="#name-implementation-2" class="section-name selfRef">IMPLEMENTATION</a>
            </h5>
<p id="section-5.3.2.4-1">When GETACL2args.fh represents a file object that does not currently
have an ACL associated with it or does not implement support
for ACLs, the server responds by returning a manufactured
minimal NFS ACL that reflects the current owner, group, and
mode bits of the object (see <a href="#acls-in-operation" class="auto internal xref">Section 3.5.4.2</a>).<a href="#section-5.3.2.4-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="errors-1">
<section id="section-5.3.2.5">
            <h5 id="name-errors-2">
<a href="#section-5.3.2.5" class="section-number selfRef">5.3.2.5. </a><a href="#name-errors-2" class="section-name selfRef">ERRORS</a>
            </h5>
<ul class="normal">
<li class="normal" id="section-5.3.2.5-1.1">
                <p id="section-5.3.2.5-1.1.1">ACL2ERR_IO<a href="#section-5.3.2.5-1.1.1" class="pilcrow">¶</a></p>
</li>
              <li class="normal" id="section-5.3.2.5-1.2">
                <p id="section-5.3.2.5-1.2.1">ACL2ERR_STALE<a href="#section-5.3.2.5-1.2.1" class="pilcrow">¶</a></p>
</li>
            </ul>
</section>
</div>
</section>
</div>
<div id="procedure-2-setacl-set-or-replace-an-access-control-list">
<section id="section-5.3.3">
          <h4 id="name-procedure-2-setacl-set-or-r">
<a href="#section-5.3.3" class="section-number selfRef">5.3.3. </a><a href="#name-procedure-2-setacl-set-or-r" class="section-name selfRef">Procedure 2: SETACL - Set or replace an Access Control List</a>
          </h4>
<div id="arguments-2">
<section id="section-5.3.3.1">
            <h5 id="name-arguments-3">
<a href="#section-5.3.3.1" class="section-number selfRef">5.3.3.1. </a><a href="#name-arguments-3" class="section-name selfRef">ARGUMENTS</a>
            </h5>
<div class="lang-xdr sourcecode" id="section-5.3.3.1-1">
<pre>
struct SETACL2args {
    fhandle_t fh;
    secattr acl;
};
</pre><a href="#section-5.3.3.1-1" class="pilcrow">¶</a>
</div>
</section>
</div>
<div id="results-2">
<section id="section-5.3.3.2">
            <h5 id="name-results-3">
<a href="#section-5.3.3.2" class="section-number selfRef">5.3.3.2. </a><a href="#name-results-3" class="section-name selfRef">RESULTS</a>
            </h5>
<div class="lang-xdr sourcecode" id="section-5.3.3.2-1">
<pre>
struct SETACL2resok {
    struct nfsfattr attr;
};

union SETACL2res switch (enum nfsstat status) {
case ACL2_OK:
    SETACL2resok resok;
default:
    void;
};
</pre><a href="#section-5.3.3.2-1" class="pilcrow">¶</a>
</div>
</section>
</div>
<div id="description-2">
<section id="section-5.3.3.3">
            <h5 id="name-description-3">
<a href="#section-5.3.3.3" class="section-number selfRef">5.3.3.3. </a><a href="#name-description-3" class="section-name selfRef">DESCRIPTION</a>
            </h5>
<p id="section-5.3.3.3-1">The SETACL procedure replaces the Access Control Lists
associated with the file system object specified by the
SETACL2args.fh field with the ACLs specified by the
SETACL2args.acl field.  The client obtains the file
handle using one of the NFS version 2 LOOKUP, CREATE,
MKDIR, SYMLINK procedures, or the MOUNT service, as
described in <span>[<a href="#RFC1094" class="cite xref">RFC1094</a>]</span>.<a href="#section-5.3.3.3-1" class="pilcrow">¶</a></p>
<aside id="section-5.3.3.3-2">
              <p id="section-5.3.3.3-2.1">How are ACLs removed?<a href="#section-5.3.3.3-2.1" class="pilcrow">¶</a></p>
</aside>
<p id="section-5.3.3.3-3">If the SETACL procedure is successful, the server sets the
SETACL2res.status field to ACL2_OK and fills in the
SETACL2resok.attr field with the file object's new
file attributes, as detailed in <span>[<a href="#RFC1094" class="cite xref">RFC1094</a>]</span>.<a href="#section-5.3.3.3-3" class="pilcrow">¶</a></p>
<p id="section-5.3.3.3-4">Otherwise, SETACL2res.status contains an error status
on failure and no other results are returned.<a href="#section-5.3.3.3-4" class="pilcrow">¶</a></p>
</section>
</div>
<div id="implementation-2">
<section id="section-5.3.3.4">
            <h5 id="name-implementation-3">
<a href="#section-5.3.3.4" class="section-number selfRef">5.3.3.4. </a><a href="#name-implementation-3" class="section-name selfRef">IMPLEMENTATION</a>
            </h5>
<p id="section-5.3.3.4-1">On success, the server does not send the reply until
the ACL change is durable locally.<a href="#section-5.3.3.4-1" class="pilcrow">¶</a></p>
<p id="section-5.3.3.4-2">Changing a file object's ACL changes the object's mtime.
The mtime change is reflected in the attributes returned
in the SETACL response.<a href="#section-5.3.3.4-2" class="pilcrow">¶</a></p>
<p id="section-5.3.3.4-3">A high-quality server implementation ensures that a
GETACL procedure running concurrently with a SETACL
procedure does not return partially updated (torn)
ACL contents. However, a failed SETACL may partially
change a file's ACLs.<a href="#section-5.3.3.4-3" class="pilcrow">¶</a></p>
<p id="section-5.3.3.4-4">When SETACL2args.fh represents a file object that does
not implement support for ACLs, or the new ACL does not
contain at least the minimal set of ACEs (as described
in <a href="#acls-in-operation" class="auto internal xref">Section 3.5.4.2</a>), the server responds by
setting SETACL2res.status to ????.<a href="#section-5.3.3.4-4" class="pilcrow">¶</a></p>
</section>
</div>
<div id="errors-2">
<section id="section-5.3.3.5">
            <h5 id="name-errors-3">
<a href="#section-5.3.3.5" class="section-number selfRef">5.3.3.5. </a><a href="#name-errors-3" class="section-name selfRef">ERRORS</a>
            </h5>
<ul class="normal">
<li class="normal" id="section-5.3.3.5-1.1">
                <p id="section-5.3.3.5-1.1.1">ACL2ERR_ROFS<a href="#section-5.3.3.5-1.1.1" class="pilcrow">¶</a></p>
</li>
              <li class="normal" id="section-5.3.3.5-1.2">
                <p id="section-5.3.3.5-1.2.1">ACL2ERR_PERM<a href="#section-5.3.3.5-1.2.1" class="pilcrow">¶</a></p>
</li>
              <li class="normal" id="section-5.3.3.5-1.3">
                <p id="section-5.3.3.5-1.3.1">ACL2ERR_IO<a href="#section-5.3.3.5-1.3.1" class="pilcrow">¶</a></p>
</li>
              <li class="normal" id="section-5.3.3.5-1.4">
                <p id="section-5.3.3.5-1.4.1">ACL2ERR_ACCES<a href="#section-5.3.3.5-1.4.1" class="pilcrow">¶</a></p>
</li>
              <li class="normal" id="section-5.3.3.5-1.5">
                <p id="section-5.3.3.5-1.5.1">ACL2ERR_NOSPC<a href="#section-5.3.3.5-1.5.1" class="pilcrow">¶</a></p>
</li>
              <li class="normal" id="section-5.3.3.5-1.6">
                <p id="section-5.3.3.5-1.6.1">ACL2ERR_DQUOT<a href="#section-5.3.3.5-1.6.1" class="pilcrow">¶</a></p>
</li>
              <li class="normal" id="section-5.3.3.5-1.7">
                <p id="section-5.3.3.5-1.7.1">ACL2ERR_STALE<a href="#section-5.3.3.5-1.7.1" class="pilcrow">¶</a></p>
</li>
            </ul>
</section>
</div>
</section>
</div>
<div id="procedure-3-getattr-get-file-attributes">
<section id="section-5.3.4">
          <h4 id="name-procedure-3-getattr-get-fil">
<a href="#section-5.3.4" class="section-number selfRef">5.3.4. </a><a href="#name-procedure-3-getattr-get-fil" class="section-name selfRef">Procedure 3: GETATTR - Get file attributes</a>
          </h4>
<div id="arguments-3">
<section id="section-5.3.4.1">
            <h5 id="name-arguments-4">
<a href="#section-5.3.4.1" class="section-number selfRef">5.3.4.1. </a><a href="#name-arguments-4" class="section-name selfRef">ARGUMENTS</a>
            </h5>
<div class="lang-xdr sourcecode" id="section-5.3.4.1-1">
<pre>
struct GETATTR2args {
    fhandle_t fh;
};
</pre><a href="#section-5.3.4.1-1" class="pilcrow">¶</a>
</div>
</section>
</div>
<div id="results-3">
<section id="section-5.3.4.2">
            <h5 id="name-results-4">
<a href="#section-5.3.4.2" class="section-number selfRef">5.3.4.2. </a><a href="#name-results-4" class="section-name selfRef">RESULTS</a>
            </h5>
<div class="lang-xdr sourcecode" id="section-5.3.4.2-1">
<pre>
struct GETATTR2resok {
    struct nfsfattr attr;
};

union GETATTR2res switch (enum nfsstat status) {
case ACL2_OK:
    GETATTR2resok resok;
default:
    void;
};
</pre><a href="#section-5.3.4.2-1" class="pilcrow">¶</a>
</div>
</section>
</div>
<div id="description-3">
<section id="section-5.3.4.3">
            <h5 id="name-description-4">
<a href="#section-5.3.4.3" class="section-number selfRef">5.3.4.3. </a><a href="#name-description-4" class="section-name selfRef">DESCRIPTION</a>
            </h5>
<p id="section-5.3.4.3-1">The GETATTR procedure retrieves the current file
attributes associated with the file system object
specified by the GETATTR2args.fh field. The client
obtains this file handle using one of the NFS
version 2 LOOKUP, CREATE, MKDIR, SYMLINK procedures,
or the MOUNT service, as described in <span>[<a href="#RFC1094" class="cite xref">RFC1094</a>]</span>.<a href="#section-5.3.4.3-1" class="pilcrow">¶</a></p>
<p id="section-5.3.4.3-2">If the GETATTR procedure is successful, the server
sets the GETATTR2res.status field to ACL2_OK, and
fills in the GETATTR2resok.attr field with the file
object's current file attributes, as detailed in
<span>[<a href="#RFC1094" class="cite xref">RFC1094</a>]</span>.<a href="#section-5.3.4.3-2" class="pilcrow">¶</a></p>
<p id="section-5.3.4.3-3">Otherwise, GETATTR2res.status contains an error
status on failure and no other results are returned.<a href="#section-5.3.4.3-3" class="pilcrow">¶</a></p>
</section>
</div>
<div id="implementation-3">
<section id="section-5.3.4.4">
            <h5 id="name-implementation-4">
<a href="#section-5.3.4.4" class="section-number selfRef">5.3.4.4. </a><a href="#name-implementation-4" class="section-name selfRef">IMPLEMENTATION</a>
            </h5>
<p id="section-5.3.4.4-1">Refer to <span><a href="https://rfc-editor.org/rfc/rfc1094#section-2.3.5" class="relref">Section 2.3.5</a> of [<a href="#RFC1094" class="cite xref">RFC1094</a>]</span> for details
about the content of the returned file attributes.<a href="#section-5.3.4.4-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="errors-3">
<section id="section-5.3.4.5">
            <h5 id="name-errors-4">
<a href="#section-5.3.4.5" class="section-number selfRef">5.3.4.5. </a><a href="#name-errors-4" class="section-name selfRef">ERRORS</a>
            </h5>
<ul class="normal">
<li class="normal" id="section-5.3.4.5-1.1">
                <p id="section-5.3.4.5-1.1.1">ACL2ERR_IO<a href="#section-5.3.4.5-1.1.1" class="pilcrow">¶</a></p>
</li>
              <li class="normal" id="section-5.3.4.5-1.2">
                <p id="section-5.3.4.5-1.2.1">ACL2ERR_STALE<a href="#section-5.3.4.5-1.2.1" class="pilcrow">¶</a></p>
</li>
            </ul>
</section>
</div>
</section>
</div>
<div id="procedure-4-access-check-access-permission">
<section id="section-5.3.5">
          <h4 id="name-procedure-4-access-check-ac">
<a href="#section-5.3.5" class="section-number selfRef">5.3.5. </a><a href="#name-procedure-4-access-check-ac" class="section-name selfRef">Procedure 4: ACCESS - Check access permission</a>
          </h4>
<div id="arguments-4">
<section id="section-5.3.5.1">
            <h5 id="name-arguments-5">
<a href="#section-5.3.5.1" class="section-number selfRef">5.3.5.1. </a><a href="#name-arguments-5" class="section-name selfRef">ARGUMENTS</a>
            </h5>
<div class="lang-xdr sourcecode" id="section-5.3.5.1-1">
<pre>
struct ACCESS2args {
    fhandle_t fh;
    uint32 access;
};
</pre><a href="#section-5.3.5.1-1" class="pilcrow">¶</a>
</div>
</section>
</div>
<div id="results-4">
<section id="section-5.3.5.2">
            <h5 id="name-results-5">
<a href="#section-5.3.5.2" class="section-number selfRef">5.3.5.2. </a><a href="#name-results-5" class="section-name selfRef">RESULTS</a>
            </h5>
<div class="lang-xdr sourcecode" id="section-5.3.5.2-1">
<pre>
const ACCESS2_READ = 0x1;       /* read data or readdir a directory */
const ACCESS2_LOOKUP = 0x2;     /* lookup a name in a directory */
const ACCESS2_MODIFY = 0x4;     /* rewrite existing file data or */
                                /* modify existing directory entries */
const ACCESS2_EXTEND = 0x8;     /* write new data or add directory entries */
const ACCESS2_DELETE = 0x10;    /* delete existing directory entry */
const ACCESS2_EXECUTE = 0x20;   /* execute file (no meaning for a directory) */

struct ACCESS2resok {
    struct nfsfattr attr;
    uint32 access;
};

union ACCESS2res switch (enum nfsstat status) {
case ACL2_OK:
    ACCESS2resok resok;
default:
    void;
};
</pre><a href="#section-5.3.5.2-1" class="pilcrow">¶</a>
</div>
</section>
</div>
<div id="description-4">
<section id="section-5.3.5.3">
            <h5 id="name-description-5">
<a href="#section-5.3.5.3" class="section-number selfRef">5.3.5.3. </a><a href="#name-description-5" class="section-name selfRef">DESCRIPTION</a>
            </h5>
<p id="section-5.3.5.3-1">The ACCESS procedure determines the access rights
that a user, as identified by the RPC credentials
in the request, has with respect to the file system
specified by the ACCESS2args.fh field. The client
obtains this file handle using one of the NFS
version 2 LOOKUP, CREATE, MKDIR, SYMLINK procedures,
or the MOUNT service, as described in <span>[<a href="#RFC1094" class="cite xref">RFC1094</a>]</span>.
The client encodes the set of permissions that are
to be checked in the ACCESS2args.access field.<a href="#section-5.3.5.3-1" class="pilcrow">¶</a></p>
<p id="section-5.3.5.3-2">The following access permissions may be requested:<a href="#section-5.3.5.3-2" class="pilcrow">¶</a></p>
<span class="break"></span><dl class="dlParallel" id="section-5.3.5.3-3">
              <dt id="section-5.3.5.3-3.1">ACCESS2_READ</dt>
              <dd style="margin-left: 1.5em" id="section-5.3.5.3-3.2">
                <p id="section-5.3.5.3-3.2.1">Read data from file or read a directory.
ACCESS2_LOOKUP<a href="#section-5.3.5.3-3.2.1" class="pilcrow">¶</a></p>
</dd>
              <dd class="break"></dd>
<dt id="section-5.3.5.3-3.3"></dt>
              <dd style="margin-left: 1.5em" id="section-5.3.5.3-3.4">
                <p id="section-5.3.5.3-3.4.1">Look up a name in a directory (no meaning for non-directory objects).
ACCESS2_MODIFY<a href="#section-5.3.5.3-3.4.1" class="pilcrow">¶</a></p>
</dd>
              <dd class="break"></dd>
<dt id="section-5.3.5.3-3.5"></dt>
              <dd style="margin-left: 1.5em" id="section-5.3.5.3-3.6">
                <p id="section-5.3.5.3-3.6.1">Rewrite existing file data or modify existing directory entries.
ACCESS2_EXTEND<a href="#section-5.3.5.3-3.6.1" class="pilcrow">¶</a></p>
</dd>
              <dd class="break"></dd>
<dt id="section-5.3.5.3-3.7"></dt>
              <dd style="margin-left: 1.5em" id="section-5.3.5.3-3.8">
                <p id="section-5.3.5.3-3.8.1">Write new data or add directory entries.
ACCESS2_DELETE<a href="#section-5.3.5.3-3.8.1" class="pilcrow">¶</a></p>
</dd>
              <dd class="break"></dd>
<dt id="section-5.3.5.3-3.9"></dt>
              <dd style="margin-left: 1.5em" id="section-5.3.5.3-3.10">
                <p id="section-5.3.5.3-3.10.1">Delete an existing directory entry.
ACCESS2_EXECUTE<a href="#section-5.3.5.3-3.10.1" class="pilcrow">¶</a></p>
</dd>
              <dd class="break"></dd>
<dt id="section-5.3.5.3-3.11"></dt>
              <dd style="margin-left: 1.5em" id="section-5.3.5.3-3.12">
                <p id="section-5.3.5.3-3.12.1">Execute file (no meaning for a directory).<a href="#section-5.3.5.3-3.12.1" class="pilcrow">¶</a></p>
</dd>
            <dd class="break"></dd>
</dl>
<p id="section-5.3.5.3-4">If the ACCESS procedure is successful, the server
sets the ACCESS2res.status field to ACL2_OK. It
fills in the ACCESS2resok.attr field with the file
object's current file attributes, as detailed in
<span>[<a href="#RFC1094" class="cite xref">RFC1094</a>]</span>. Lastly, it encodes the set of
permissions that the requesting user is granted
in the ACCESS2resok.access field.<a href="#section-5.3.5.3-4" class="pilcrow">¶</a></p>
</section>
</div>
<div id="implementation-4">
<section id="section-5.3.5.4">
            <h5 id="name-implementation-5">
<a href="#section-5.3.5.4" class="section-number selfRef">5.3.5.4. </a><a href="#name-implementation-5" class="section-name selfRef">IMPLEMENTATION</a>
            </h5>
<p id="section-5.3.5.4-1">In the NFS version 2 protocol, the only reliable way to
determine whether an operation is allowed is to try it
and see if it succeeded or failed. Using the ACCESS
procedure in the NFSACL version 2 protocol, a client can
ask the server to indicate whether or not one or more
classes of operations are permitted.<a href="#section-5.3.5.4-1" class="pilcrow">¶</a></p>
<p id="section-5.3.5.4-2">In general, it is not sufficient for a client to attempt
to deduce access permissions by inspecting the uid, gid,
and mode fields in the file attributes, since the server
may perform uid or gid mapping or enforce additional
access control restrictions. It is also possible that the
NFS version 2 protocol server may not be in the same ID
space as the NFS version 2 protocol client. In these cases,
the NFS version 2 protocol client can not reliably perform
an access check with only current file attributes.<a href="#section-5.3.5.4-2" class="pilcrow">¶</a></p>
<p id="section-5.3.5.4-3">The information returned by the server in response to an
ACCESS call is advisory only. It was correct at the exact
time that the server performed the checks, but not
necessarily afterwards. The server can revoke access
permission to a file object at any time.<a href="#section-5.3.5.4-3" class="pilcrow">¶</a></p>
<p id="section-5.3.5.4-4">The NFSACL version 2 protocol client should use the
effective credentials of the user to build the
authentication information in the ACCESS request used
to determine access rights. It is the effective user
and group credentials that are used in subsequent read
and write operations.<a href="#section-5.3.5.4-4" class="pilcrow">¶</a></p>
<p id="section-5.3.5.4-5">Many implementations do not directly support the
ACCESS2_DELETE permission. Operating systems like UNIX
may ignore the ACCESS2_DELETE bit if set on an access
request on a non-directory object. In these systems,
delete permission on a file is determined by the access
permissions on the directory in which the file resides,
instead of being determined by the permissions of the file
itself.  Thus, the bit mask returned for such a request
will have the ACCESS3_DELETE bit set to 0, indicating that
the client does not have this permission.<a href="#section-5.3.5.4-5" class="pilcrow">¶</a></p>
<p id="section-5.3.5.4-6">The server should return a status of ACL2_OK if no
errors occurred that prevented the server from making
the required access checks.<a href="#section-5.3.5.4-6" class="pilcrow">¶</a></p>
</section>
</div>
<div id="errors-4">
<section id="section-5.3.5.5">
            <h5 id="name-errors-5">
<a href="#section-5.3.5.5" class="section-number selfRef">5.3.5.5. </a><a href="#name-errors-5" class="section-name selfRef">ERRORS</a>
            </h5>
<ul class="normal">
<li class="normal" id="section-5.3.5.5-1.1">
                <p id="section-5.3.5.5-1.1.1">ACL2ERR_IO<a href="#section-5.3.5.5-1.1.1" class="pilcrow">¶</a></p>
</li>
              <li class="normal" id="section-5.3.5.5-1.2">
                <p id="section-5.3.5.5-1.2.1">ACL2ERR_STALE<a href="#section-5.3.5.5-1.2.1" class="pilcrow">¶</a></p>
</li>
            </ul>
</section>
</div>
</section>
</div>
</section>
</div>
</section>
</div>
<div id="nfsacl-version-3">
<section id="section-6">
      <h2 id="name-nfsacl-version-3">
<a href="#section-6" class="section-number selfRef">6. </a><a href="#name-nfsacl-version-3" class="section-name selfRef">NFSACL Version 3</a>
      </h2>
<p id="section-6-1">Version 3 of the NFSACL protocol is used in conjunction only with
version 3 of the NFS protocol.<a href="#section-6-1" class="pilcrow">¶</a></p>
<div id="nfs-version-3-behavior-changes">
<section id="section-6.1">
        <h3 id="name-nfs-version-3-behavior-chan">
<a href="#section-6.1" class="section-number selfRef">6.1. </a><a href="#name-nfs-version-3-behavior-chan" class="section-name selfRef">NFS Version 3 Behavior Changes</a>
        </h3>
<p id="section-6.1-1">When an NFS version 3 server receives an NFS request on a file
object where an ACL denies permission, the server responds by
terminating the procedure before it is executed and returning
a status value of NFS3ERR_ACCESS.<a href="#section-6.1-1" class="pilcrow">¶</a></p>
<p id="section-6.1-2">If an Access Control List does not contain an ACE that grants a
requesting user "read" or execute access to the object represented
by the procedure's file handle argument, the following NFS
procedures fail with a status of NFS3ERR_ACCESS:<a href="#section-6.1-2" class="pilcrow">¶</a></p>
<p id="section-6.1-3">READ, READDIR, READDIRPLUS<a href="#section-6.1-3" class="pilcrow">¶</a></p>
<p id="section-6.1-4">If an Access Control List does not contain an ACE that grants a
requesting user "write" access to the object represented by the
procedure's file handle argument, the following NFS procedures
fail with a status of NFS3ERR_ACCESS:<a href="#section-6.1-4" class="pilcrow">¶</a></p>
<p id="section-6.1-5">WRITE, CREATE, MKNOD, MKDIR, SYMLINK<a href="#section-6.1-5" class="pilcrow">¶</a></p>
<p id="section-6.1-6">If an Access Control List does not contain an ACE that grants a
requesting user "execute" access to the object represented by the
procedure's file handle argument, the following NFS procedures
fail with a status of NFS3ERR_ACCESS:<a href="#section-6.1-6" class="pilcrow">¶</a></p>
<p id="section-6.1-7">LOOKUP<a href="#section-6.1-7" class="pilcrow">¶</a></p>
</section>
</div>
<div id="data-types-inherited-from-nfs-version-3">
<section id="section-6.2">
        <h3 id="name-data-types-inherited-from-nf">
<a href="#section-6.2" class="section-number selfRef">6.2. </a><a href="#name-data-types-inherited-from-nf" class="section-name selfRef">Data types inherited from NFS version 3</a>
        </h3>
<div id="scalar-data-types">
<section id="section-6.2.1">
          <h4 id="name-scalar-data-types">
<a href="#section-6.2.1" class="section-number selfRef">6.2.1. </a><a href="#name-scalar-data-types" class="section-name selfRef">Scalar Data types</a>
          </h4>
<p id="section-6.2.1-1">These are defined in <span><a href="https://rfc-editor.org/rfc/rfc1813#section-2.5" class="relref">Section 2.5</a> of [<a href="#RFC1813" class="cite xref">RFC1813</a>]</span>.<a href="#section-6.2.1-1" class="pilcrow">¶</a></p>
<span class="break"></span><dl class="dlParallel" id="section-6.2.1-2">
            <dt id="section-6.2.1-2.1">uint64</dt>
            <dd style="margin-left: 1.5em" id="section-6.2.1-2.2">
              <p id="section-6.2.1-2.2.1">typedef unsigned hyper uint64;
uint32<a href="#section-6.2.1-2.2.1" class="pilcrow">¶</a></p>
</dd>
            <dd class="break"></dd>
<dt id="section-6.2.1-2.3"></dt>
            <dd style="margin-left: 1.5em" id="section-6.2.1-2.4">
              <p id="section-6.2.1-2.4.1">typedef unsigned long uint32;
fileid3<a href="#section-6.2.1-2.4.1" class="pilcrow">¶</a></p>
</dd>
            <dd class="break"></dd>
<dt id="section-6.2.1-2.5"></dt>
            <dd style="margin-left: 1.5em" id="section-6.2.1-2.6">
              <p id="section-6.2.1-2.6.1">typedef uint64 fileid3;
uid3<a href="#section-6.2.1-2.6.1" class="pilcrow">¶</a></p>
</dd>
            <dd class="break"></dd>
<dt id="section-6.2.1-2.7"></dt>
            <dd style="margin-left: 1.5em" id="section-6.2.1-2.8">
              <p id="section-6.2.1-2.8.1">typedef uint32 uid3;
gid3<a href="#section-6.2.1-2.8.1" class="pilcrow">¶</a></p>
</dd>
            <dd class="break"></dd>
<dt id="section-6.2.1-2.9"></dt>
            <dd style="margin-left: 1.5em" id="section-6.2.1-2.10">
              <p id="section-6.2.1-2.10.1">typedef uint32 gid3;
size3<a href="#section-6.2.1-2.10.1" class="pilcrow">¶</a></p>
</dd>
            <dd class="break"></dd>
<dt id="section-6.2.1-2.11"></dt>
            <dd style="margin-left: 1.5em" id="section-6.2.1-2.12">
              <p id="section-6.2.1-2.12.1">typedef uint64 size3;
mode3<a href="#section-6.2.1-2.12.1" class="pilcrow">¶</a></p>
</dd>
            <dd class="break"></dd>
<dt id="section-6.2.1-2.13"></dt>
            <dd style="margin-left: 1.5em" id="section-6.2.1-2.14">
              <p id="section-6.2.1-2.14.1">typedef uint32 mode3;<a href="#section-6.2.1-2.14.1" class="pilcrow">¶</a></p>
</dd>
          <dd class="break"></dd>
</dl>
</section>
</div>
<div id="ftype3">
<section id="section-6.2.2">
          <h4 id="name-ftype3">
<a href="#section-6.2.2" class="section-number selfRef">6.2.2. </a><a href="#name-ftype3" class="section-name selfRef">ftype3</a>
          </h4>
<p id="section-6.2.2-1">The enumeration "ftype3" represents the type of a file object.
This definition is further explained in <span><a href="https://rfc-editor.org/rfc/rfc1813#section-2.6" class="relref">Section 2.6</a> of [<a href="#RFC1813" class="cite xref">RFC1813</a>]</span>.<a href="#section-6.2.2-1" class="pilcrow">¶</a></p>
<div class="lang-xdr sourcecode" id="section-6.2.2-2">
<pre>
enum ftype3 {
    NF3REG    = 1,
    NF3DIR    = 2,
    NF3BLK    = 3,
    NF3CHR    = 4,
    NF3LNK    = 5,
    NF3SOCK   = 6,
    NF3FIFO   = 7
};
</pre><a href="#section-6.2.2-2" class="pilcrow">¶</a>
</div>
</section>
</div>
<div id="specdata3">
<section id="section-6.2.3">
          <h4 id="name-specdata3">
<a href="#section-6.2.3" class="section-number selfRef">6.2.3. </a><a href="#name-specdata3" class="section-name selfRef">specdata3</a>
          </h4>
<div class="lang-xdr sourcecode" id="section-6.2.3-1">
<pre>
struct specdata3 {
    uint32     specdata1;
    uint32     specdata2;
};
</pre><a href="#section-6.2.3-1" class="pilcrow">¶</a>
</div>
<p id="section-6.2.3-2">The interpretation of the two words depends on the type of file
system object. For a block special (NF3BLK) or character special
(NF3CHR) file, specdata1 and specdata2 are the major and minor
device numbers, respectively. For all other file types, these
two elements should either be set to 0 or the values should be
agreed upon by the client and server.<a href="#section-6.2.3-2" class="pilcrow">¶</a></p>
<p id="section-6.2.3-3">Further detail is available in <span><a href="https://rfc-editor.org/rfc/rfc1813#section-2.6" class="relref">Section 2.6</a> of [<a href="#RFC1813" class="cite xref">RFC1813</a>]</span>.<a href="#section-6.2.3-3" class="pilcrow">¶</a></p>
</section>
</div>
<div id="nfsfh3">
<section id="section-6.2.4">
          <h4 id="name-nfs_fh3">
<a href="#section-6.2.4" class="section-number selfRef">6.2.4. </a><a href="#name-nfs_fh3" class="section-name selfRef">nfs_fh3</a>
          </h4>
<p id="section-6.2.4-1">The nfs_fh3 data type is a variable-length opaque object returned
by the NFS version 3 LOOKUP, CREATE, SYMLINK, MKNOD, LINK,
or READDIRPLUS procedures.
A client uses this handle during subsequent NFS operations
to reference the file. This definition comes from
<span><a href="https://rfc-editor.org/rfc/rfc1813#section-2.6" class="relref">Section 2.6</a> of [<a href="#RFC1813" class="cite xref">RFC1813</a>]</span>.<a href="#section-6.2.4-1" class="pilcrow">¶</a></p>
<span class="break"></span><dl class="dlParallel" id="section-6.2.4-2">
            <dt id="section-6.2.4-2.1">NFS3_FHSIZE 64</dt>
            <dd style="margin-left: 1.5em" id="section-6.2.4-2.2">
              <p id="section-6.2.4-2.2.1">The maximum size in bytes of the opaque file handle.<a href="#section-6.2.4-2.2.1" class="pilcrow">¶</a></p>
</dd>
          <dd class="break"></dd>
</dl>
<div class="lang-xdr sourcecode" id="section-6.2.4-3">
<pre>
struct nfs_fh3 {
    opaque       data&lt;NFS3_FHSIZE&gt;;
};
</pre><a href="#section-6.2.4-3" class="pilcrow">¶</a>
</div>
<p id="section-6.2.4-4">To the client, a file handle is opaque. The client stores file
handles for use in a later request and can compare two file
handles from the same server for equality by doing a
byte-by-byte comparison, but cannot otherwise interpret the
contents of file handles. Further, if two file handles from the
same server are equal, they must refer to the same file, but if
they are not equal, no conclusions can be drawn.<a href="#section-6.2.4-4" class="pilcrow">¶</a></p>
<p id="section-6.2.4-5">Servers may revoke access provided by a file handle at any
time. If the file handle passed in a call refers to a file
system object that no longer exists on the server or access for
that file handle has been revoked, the error, ACL3ERR_STALE,
is returned.<a href="#section-6.2.4-5" class="pilcrow">¶</a></p>
</section>
</div>
<div id="nfstime3">
<section id="section-6.2.5">
          <h4 id="name-nfstime3">
<a href="#section-6.2.5" class="section-number selfRef">6.2.5. </a><a href="#name-nfstime3" class="section-name selfRef">nfstime3</a>
          </h4>
<p id="section-6.2.5-1">NFS version 3's "nfstime3" structure represents the number of
seconds and nanoseconds since midnight January 1, 1970 Greenwich
Mean Time. Further details are in <span><a href="https://rfc-editor.org/rfc/rfc1813#section-2.6" class="relref">Section 2.6</a> of [<a href="#RFC1813" class="cite xref">RFC1813</a>]</span>.<a href="#section-6.2.5-1" class="pilcrow">¶</a></p>
<div class="lang-xdr sourcecode" id="section-6.2.5-2">
<pre>
struct nfstime3 {
    uint32   seconds;
    uint32   nseconds;
};
</pre><a href="#section-6.2.5-2" class="pilcrow">¶</a>
</div>
</section>
</div>
<div id="nfsfattr3">
<section id="section-6.2.6">
          <h4 id="name-nfsfattr3">
<a href="#section-6.2.6" class="section-number selfRef">6.2.6. </a><a href="#name-nfsfattr3" class="section-name selfRef">nfsfattr3</a>
          </h4>
<p id="section-6.2.6-1">This document refers to NFS version 3's file attribute structure
as "nfsfattr3". This is the same as the fattr3 structure described
in <span><a href="https://rfc-editor.org/rfc/rfc1813#section-2.6" class="relref">Section 2.6</a> of [<a href="#RFC1813" class="cite xref">RFC1813</a>]</span>. A definition of the bit fields in
the "mode" element, which relate to traditional file system access
permissions, can also be found there.<a href="#section-6.2.6-1" class="pilcrow">¶</a></p>
<div class="lang-xdr sourcecode" id="section-6.2.6-2">
<pre>
struct fattr3 {
    ftype3     type;
    mode3      mode;
    uint32     nlink;
    uid3       uid;
    gid3       gid;
    size3      size;
    size3      used;
    specdata3  rdev;
    uint64     fsid;
    fileid3    fileid;
    nfstime3   atime;
    nfstime3   mtime;
    nfstime3   ctime;
};
</pre><a href="#section-6.2.6-2" class="pilcrow">¶</a>
</div>
</section>
</div>
<div id="postopattr">
<section id="section-6.2.7">
          <h4 id="name-post_op_attr">
<a href="#section-6.2.7" class="section-number selfRef">6.2.7. </a><a href="#name-post_op_attr" class="section-name selfRef">post_op_attr</a>
          </h4>
<p id="section-6.2.7-1">The NFS version 3 "post_op_attr" data type returns file
attributes that are not directly involved in the requested
procedure. See <span><a href="https://rfc-editor.org/rfc/rfc1813#section-2.6" class="relref">Section 2.6</a> of [<a href="#RFC1813" class="cite xref">RFC1813</a>]</span> for more
information.<a href="#section-6.2.7-1" class="pilcrow">¶</a></p>
<div class="lang-xdr sourcecode" id="section-6.2.7-2">
<pre>
union post_op_attr switch (bool attributes_follow) {
case TRUE:
    fattr3   attributes;
case FALSE:
    void;
};
</pre><a href="#section-6.2.7-2" class="pilcrow">¶</a>
</div>
<p id="section-6.2.7-3">The format of this data type appears to make returning file
attributes optional. However, server implementers are strongly
encouraged to make a best effort to return attributes whenever
possible, even when returning an error.<a href="#section-6.2.7-3" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
<div id="error-values">
<section id="section-6.3">
        <h3 id="name-error-values">
<a href="#section-6.3" class="section-number selfRef">6.3. </a><a href="#name-error-values" class="section-name selfRef">Error Values</a>
        </h3>
<p id="section-6.3-1"><span><a href="https://rfc-editor.org/rfc/rfc1813#section-2.5" class="relref">Section 2.5</a> of [<a href="#RFC1813" class="cite xref">RFC1813</a>]</span> describes an enumerated type called
"nfsstat3" which provides a status code for NFS version 3 procedure
results.
A matching type called "aclstat3" is defined in this document
for the similar purpose of returning NFSACL version 3 procedure
status codes. The numeric values of these two types match up,
although aclstat3 omits some codes that are not relevant to the
NFSACL protocol.<a href="#section-6.3-1" class="pilcrow">¶</a></p>
<div class="lang-xdr sourcecode" id="section-6.3-2">
<pre>
enum aclstat3 {
    ACL3_OK             = 0,
    ACL3ERR_PERM        = 1,
    ACL3ERR_IO          = 5,
    ACL3ERR_ACCES       = 13,
    ACL3ERR_INVAL       = 22,
    ACL3ERR_NOSPC       = 28,
    ACL3ERR_ROFS        = 30,
    ACL3ERR_DQUOT       = 69,
    ACL3ERR_STALE       = 70,
    ACL3ERR_BADHANDLE   = 10001,
    ACL3ERR_NOTSUPP     = 10004,
    ACL3ERR_SERVERFAULT = 10006,
    ACL3ERR_JUKEBOX     = 10008
};
</pre><a href="#section-6.3-2" class="pilcrow">¶</a>
</div>
<p id="section-6.3-3">These status codes carry the following meanings:<a href="#section-6.3-3" class="pilcrow">¶</a></p>
<span class="break"></span><dl class="dlParallel" id="section-6.3-4">
          <dt id="section-6.3-4.1">ACL3_OK</dt>
          <dd style="margin-left: 1.5em" id="section-6.3-4.2">
            <p id="section-6.3-4.2.1">Indicates the call completed successfully.<a href="#section-6.3-4.2.1" class="pilcrow">¶</a></p>
</dd>
          <dd class="break"></dd>
<dt id="section-6.3-4.3">ACL3ERR_PERM</dt>
          <dd style="margin-left: 1.5em" id="section-6.3-4.4">
            <p id="section-6.3-4.4.1">Not owner. The operation was not allowed because the caller is either not a privileged user (root) or not the owner of the target of the operation.<a href="#section-6.3-4.4.1" class="pilcrow">¶</a></p>
</dd>
          <dd class="break"></dd>
<dt id="section-6.3-4.5">ACL3ERR_IO</dt>
          <dd style="margin-left: 1.5em" id="section-6.3-4.6">
            <p id="section-6.3-4.6.1">I/O error. A hard error (for example, a disk error) occurred while processing the requested operation.<a href="#section-6.3-4.6.1" class="pilcrow">¶</a></p>
</dd>
          <dd class="break"></dd>
<dt id="section-6.3-4.7">ACL3ERR_ACCES</dt>
          <dd style="margin-left: 1.5em" id="section-6.3-4.8">
            <p id="section-6.3-4.8.1">Permission denied. The caller does not have the correct permission to perform the requested operation. Contrast this with NFS3ERR_PERM, which restricts itself to owner or privileged user permission failures.<a href="#section-6.3-4.8.1" class="pilcrow">¶</a></p>
</dd>
          <dd class="break"></dd>
<dt id="section-6.3-4.9">ACL3ERR_INVAL</dt>
          <dd style="margin-left: 1.5em" id="section-6.3-4.10">
            <p id="section-6.3-4.10.1">An invalid or unsupported argument was specified for procedure.<a href="#section-6.3-4.10.1" class="pilcrow">¶</a></p>
</dd>
          <dd class="break"></dd>
<dt id="section-6.3-4.11">ACL3ERR_NOSPC</dt>
          <dd style="margin-left: 1.5em" id="section-6.3-4.12">
            <p id="section-6.3-4.12.1">No space left on device. The operation would have caused the server's file system to exceed its limit.<a href="#section-6.3-4.12.1" class="pilcrow">¶</a></p>
</dd>
          <dd class="break"></dd>
<dt id="section-6.3-4.13">ACL3ERR_ROFS</dt>
          <dd style="margin-left: 1.5em" id="section-6.3-4.14">
            <p id="section-6.3-4.14.1">Read-only file system. A modifying operation was attempted on a read-only file system.<a href="#section-6.3-4.14.1" class="pilcrow">¶</a></p>
</dd>
          <dd class="break"></dd>
<dt id="section-6.3-4.15">ACL3ERR_DQUOT</dt>
          <dd style="margin-left: 1.5em" id="section-6.3-4.16">
            <p id="section-6.3-4.16.1">Resource (quota) hard limit exceeded. The user's resource limit on the server has been exceeded.<a href="#section-6.3-4.16.1" class="pilcrow">¶</a></p>
</dd>
          <dd class="break"></dd>
<dt id="section-6.3-4.17">ACL3ERR_STALE</dt>
          <dd style="margin-left: 1.5em" id="section-6.3-4.18">
            <p id="section-6.3-4.18.1">Invalid file handle. The file handle given in the arguments was invalid. The file referred to by that file handle no longer exists or access to it has been revoked.<a href="#section-6.3-4.18.1" class="pilcrow">¶</a></p>
</dd>
          <dd class="break"></dd>
<dt id="section-6.3-4.19">ACL3ERR_BADHANDLE</dt>
          <dd style="margin-left: 1.5em" id="section-6.3-4.20">
            <p id="section-6.3-4.20.1">Illegal NFS file handle. The file handle failed internal consistency checks.<a href="#section-6.3-4.20.1" class="pilcrow">¶</a></p>
</dd>
          <dd class="break"></dd>
<dt id="section-6.3-4.21">ACL3ERR_NOTSUPP</dt>
          <dd style="margin-left: 1.5em" id="section-6.3-4.22">
            <p id="section-6.3-4.22.1">Operation is not supported.<a href="#section-6.3-4.22.1" class="pilcrow">¶</a></p>
</dd>
          <dd class="break"></dd>
<dt id="section-6.3-4.23">ACL3ERR_SERVERFAULT</dt>
          <dd style="margin-left: 1.5em" id="section-6.3-4.24">
            <p id="section-6.3-4.24.1">An error occurred on the server which does not map to any of the legal NFS version 3 protocol error values.  The client should translate this into an appropriate error. UNIX clients may choose to translate this to EIO.<a href="#section-6.3-4.24.1" class="pilcrow">¶</a></p>
</dd>
          <dd class="break"></dd>
<dt id="section-6.3-4.25">ACL3ERR_JUKEBOX</dt>
          <dd style="margin-left: 1.5em" id="section-6.3-4.26">
            <p id="section-6.3-4.26.1">The server initiated the request, but was not able to complete it in a timely fashion. The client should wait and then try the request with a new RPC transaction ID. For example, this error should be returned from a server that supports hierarchical storage and receives a request to process a file that has been migrated. In this case, the server should start the immigration process and respond to client with this error.<a href="#section-6.3-4.26.1" class="pilcrow">¶</a></p>
</dd>
        <dd class="break"></dd>
</dl>
</section>
</div>
<div id="server-procedures-1">
<section id="section-6.4">
        <h3 id="name-server-procedures-2">
<a href="#section-6.4" class="section-number selfRef">6.4. </a><a href="#name-server-procedures-2" class="section-name selfRef">Server Procedures</a>
        </h3>
<div id="procedure-0-null-no-operation-1">
<section id="section-6.4.1">
          <h4 id="name-procedure-0-null-no-operatio">
<a href="#section-6.4.1" class="section-number selfRef">6.4.1. </a><a href="#name-procedure-0-null-no-operatio" class="section-name selfRef">Procedure 0: NULL - No Operation</a>
          </h4>
<div id="arguments-5">
<section id="section-6.4.1.1">
            <h5 id="name-arguments-6">
<a href="#section-6.4.1.1" class="section-number selfRef">6.4.1.1. </a><a href="#name-arguments-6" class="section-name selfRef">ARGUMENTS</a>
            </h5>
<div class="lang-xdr sourcecode" id="section-6.4.1.1-1">
<pre>
void;
</pre><a href="#section-6.4.1.1-1" class="pilcrow">¶</a>
</div>
</section>
</div>
<div id="results-5">
<section id="section-6.4.1.2">
            <h5 id="name-results-6">
<a href="#section-6.4.1.2" class="section-number selfRef">6.4.1.2. </a><a href="#name-results-6" class="section-name selfRef">RESULTS</a>
            </h5>
<div class="lang-xdr sourcecode" id="section-6.4.1.2-1">
<pre>
void;
</pre><a href="#section-6.4.1.2-1" class="pilcrow">¶</a>
</div>
</section>
</div>
<div id="description-5">
<section id="section-6.4.1.3">
            <h5 id="name-description-6">
<a href="#section-6.4.1.3" class="section-number selfRef">6.4.1.3. </a><a href="#name-description-6" class="section-name selfRef">DESCRIPTION</a>
            </h5>
<p id="section-6.4.1.3-1">This is the usual NULL procedure with a void argument and void result.<a href="#section-6.4.1.3-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="implementation-5">
<section id="section-6.4.1.4">
            <h5 id="name-implementation-6">
<a href="#section-6.4.1.4" class="section-number selfRef">6.4.1.4. </a><a href="#name-implementation-6" class="section-name selfRef">IMPLEMENTATION</a>
            </h5>
<p id="section-6.4.1.4-1">It is important that this procedure do no work at all so that clients
can use it to measure the overhead of processing a service request.
By convention, the NULL procedure should never require any
authentication.
A server implmentation may choose to ignore this convention, if
responding to the NULL procedure call acknowledges the existence
of a resource to an unauthenticated client.<a href="#section-6.4.1.4-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="errors-5">
<section id="section-6.4.1.5">
            <h5 id="name-errors-6">
<a href="#section-6.4.1.5" class="section-number selfRef">6.4.1.5. </a><a href="#name-errors-6" class="section-name selfRef">ERRORS</a>
            </h5>
<p id="section-6.4.1.5-1">Since the NULL procedure takes no argument and returns no
result, it can not return an NFS or NFSACL error status code.
However, some server implementations may return RPC errors
based on security or authentication policy settings.<a href="#section-6.4.1.5-1" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
<div id="procedure-1-getacl-retrieve-an-access-control-list-1">
<section id="section-6.4.2">
          <h4 id="name-procedure-1-getacl-retrieve-">
<a href="#section-6.4.2" class="section-number selfRef">6.4.2. </a><a href="#name-procedure-1-getacl-retrieve-" class="section-name selfRef">Procedure 1: GETACL - Retrieve an Access Control List</a>
          </h4>
<div id="arguments-6">
<section id="section-6.4.2.1">
            <h5 id="name-arguments-7">
<a href="#section-6.4.2.1" class="section-number selfRef">6.4.2.1. </a><a href="#name-arguments-7" class="section-name selfRef">ARGUMENTS</a>
            </h5>
<div class="lang-xdr sourcecode" id="section-6.4.2.1-1">
<pre>
struct GETACL3args {
    nfs_fh3 fh;
    u_int mask;
};
</pre><a href="#section-6.4.2.1-1" class="pilcrow">¶</a>
</div>
</section>
</div>
<div id="results-6">
<section id="section-6.4.2.2">
            <h5 id="name-results-7">
<a href="#section-6.4.2.2" class="section-number selfRef">6.4.2.2. </a><a href="#name-results-7" class="section-name selfRef">RESULTS</a>
            </h5>
<div class="lang-xde sourcecode" id="section-6.4.2.2-1">
<pre>
struct GETACL3resok {
    post_op_attr attr;
    secattr acl;
};

struct GETACL3resfail {
    post_op_attr attr;
};

union GETACL3res switch (nfsstat3 status) {
case ACL3_OK:
    GETACL3resok resok;
default:
    GETACL3resfail resfail;
};
</pre><a href="#section-6.4.2.2-1" class="pilcrow">¶</a>
</div>
</section>
</div>
<div id="description-6">
<section id="section-6.4.2.3">
            <h5 id="name-description-7">
<a href="#section-6.4.2.3" class="section-number selfRef">6.4.2.3. </a><a href="#name-description-7" class="section-name selfRef">DESCRIPTION</a>
            </h5>
<p id="section-6.4.2.3-1">The GETACL procedure retrieves Access Control List
information associated with the file system object
specified by the GETACL3args.fh field. The client
obtains this file handle using one of the NFS
version 2 LOOKUP, CREATE, MKDIR, SYMLINK, MKNOD,
or READDIRPLUS procedures, or the MOUNT service,
as described in <span>[<a href="#RFC1813" class="cite xref">RFC1813</a>]</span>.<a href="#section-6.4.2.3-1" class="pilcrow">¶</a></p>
<p id="section-6.4.2.3-2">The GETACL3args.mask field specifies which information
is to be returned in the response:<a href="#section-6.4.2.3-2" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-6.4.2.3-3.1">
                <p id="section-6.4.2.3-3.1.1">If the NA_ACL bit is set, the server fills in the
object's access ACL.<a href="#section-6.4.2.3-3.1.1" class="pilcrow">¶</a></p>
</li>
              <li class="normal" id="section-6.4.2.3-3.2">
                <p id="section-6.4.2.3-3.2.1">If the NA_ACLCNT bit is set, the server fills in
the number of ACEs that are in the object's access ACL.<a href="#section-6.4.2.3-3.2.1" class="pilcrow">¶</a></p>
</li>
              <li class="normal" id="section-6.4.2.3-3.3">
                <p id="section-6.4.2.3-3.3.1">If the NA_DFACL bit is set, the server fills in
the object's default ACL.<a href="#section-6.4.2.3-3.3.1" class="pilcrow">¶</a></p>
</li>
              <li class="normal" id="section-6.4.2.3-3.4">
                <p id="section-6.4.2.3-3.4.1">if the NA_DFACLCNT bit is set, the server fills in
the number of ACEs that are in the object's default ACL.<a href="#section-6.4.2.3-3.4.1" class="pilcrow">¶</a></p>
</li>
            </ul>
<p id="section-6.4.2.3-4">If the GETACL procedure is successful, the server sets the
GETACL3res.status field to ACL3_OK. It fills in the
GETACL3resok.attr field with the file object's post
operation file attributes, as detailed in <span>[<a href="#RFC1813" class="cite xref">RFC1813</a>]</span>.
Lastly, it fills in the GETACL3res.acl field with two
counted arrays of Access Control Entries (ACEs).<a href="#section-6.4.2.3-4" class="pilcrow">¶</a></p>
<p id="section-6.4.2.3-5">Otherwise, GETACL3res.status contains an error status
on failure and no other results are returned.<a href="#section-6.4.2.3-5" class="pilcrow">¶</a></p>
</section>
</div>
<div id="implementation-6">
<section id="section-6.4.2.4">
            <h5 id="name-implementation-7">
<a href="#section-6.4.2.4" class="section-number selfRef">6.4.2.4. </a><a href="#name-implementation-7" class="section-name selfRef">IMPLEMENTATION</a>
            </h5>
<p id="section-6.4.2.4-1">When GETACL3args.fh represents a file object that does
not currently have an ACL associated with it or does not
implement support for ACLs, the server responds by
returning a manufactured minimal NFS ACL that reflects
the current owner, group, and mode bits of the object
(see <a href="#acls-in-operation" class="auto internal xref">Section 3.5.4.2</a>).<a href="#section-6.4.2.4-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="errors-6">
<section id="section-6.4.2.5">
            <h5 id="name-errors-7">
<a href="#section-6.4.2.5" class="section-number selfRef">6.4.2.5. </a><a href="#name-errors-7" class="section-name selfRef">ERRORS</a>
            </h5>
<ul class="normal">
<li class="normal" id="section-6.4.2.5-1.1">
                <p id="section-6.4.2.5-1.1.1">ACL3ERR_IO<a href="#section-6.4.2.5-1.1.1" class="pilcrow">¶</a></p>
</li>
              <li class="normal" id="section-6.4.2.5-1.2">
                <p id="section-6.4.2.5-1.2.1">ACL3ERR_STALE<a href="#section-6.4.2.5-1.2.1" class="pilcrow">¶</a></p>
</li>
              <li class="normal" id="section-6.4.2.5-1.3">
                <p id="section-6.4.2.5-1.3.1">ACL3ERR_BADHANDLE<a href="#section-6.4.2.5-1.3.1" class="pilcrow">¶</a></p>
</li>
              <li class="normal" id="section-6.4.2.5-1.4">
                <p id="section-6.4.2.5-1.4.1">ACL3ERR_SERVERFAULT<a href="#section-6.4.2.5-1.4.1" class="pilcrow">¶</a></p>
</li>
              <li class="normal" id="section-6.4.2.5-1.5">
                <p id="section-6.4.2.5-1.5.1">ACL3ERR_JUKEBOX<a href="#section-6.4.2.5-1.5.1" class="pilcrow">¶</a></p>
</li>
            </ul>
</section>
</div>
</section>
</div>
<div id="setacl-procedure">
<section id="section-6.4.3">
          <h4 id="name-setacl-procedure">
<a href="#section-6.4.3" class="section-number selfRef">6.4.3. </a><a href="#name-setacl-procedure" class="section-name selfRef">SETACL Procedure</a>
          </h4>
<div id="arguments-7">
<section id="section-6.4.3.1">
            <h5 id="name-arguments-8">
<a href="#section-6.4.3.1" class="section-number selfRef">6.4.3.1. </a><a href="#name-arguments-8" class="section-name selfRef">ARGUMENTS</a>
            </h5>
<div class="lang-xdr sourcecode" id="section-6.4.3.1-1">
<pre>
struct SETACL3args {
    nfs_fh3 fh;
    secattr acl;
};
</pre><a href="#section-6.4.3.1-1" class="pilcrow">¶</a>
</div>
</section>
</div>
<div id="results-7">
<section id="section-6.4.3.2">
            <h5 id="name-results-8">
<a href="#section-6.4.3.2" class="section-number selfRef">6.4.3.2. </a><a href="#name-results-8" class="section-name selfRef">RESULTS</a>
            </h5>
<div class="lang-xdr sourcecode" id="section-6.4.3.2-1">
<pre>
struct SETACL3resok {
    post_op_attr attr;
};

struct SETACL3resfail {
    post_op_attr attr;
};

union SETACL3res switch (nfsstat3 status) {
case ACL3_OK:
    SETACL3resok resok;
default:
    SETACL3resfail resfail;
};
</pre><a href="#section-6.4.3.2-1" class="pilcrow">¶</a>
</div>
</section>
</div>
<div id="description-7">
<section id="section-6.4.3.3">
            <h5 id="name-description-8">
<a href="#section-6.4.3.3" class="section-number selfRef">6.4.3.3. </a><a href="#name-description-8" class="section-name selfRef">DESCRIPTION</a>
            </h5>
<p id="section-6.4.3.3-1">The SETACL procedure replaces the Access Control Lists
associated with the file system object specified by the
SETACL3args.fh field with the ACLs specified by the
SETACL3args.acl field.  The client obtains the file
handle using one of the NFS version 3 LOOKUP, CREATE,
MKDIR, MKNOD, SYMLINK, or READDIRPLUS procedures, or
the MOUNT service, as described in <span>[<a href="#RFC1813" class="cite xref">RFC1813</a>]</span>.<a href="#section-6.4.3.3-1" class="pilcrow">¶</a></p>
<aside id="section-6.4.3.3-2">
              <p id="section-6.4.3.3-2.1">How are ACLs removed?<a href="#section-6.4.3.3-2.1" class="pilcrow">¶</a></p>
</aside>
<p id="section-6.4.3.3-3">If the SETACL procedure is successful, the server sets
the SETACL3res.status field to ACL3_OK and fills in the
SETACL3resok.attr field with the file object's post
operation file attributes, as detailed in <span>[<a href="#RFC1813" class="cite xref">RFC1813</a>]</span>.<a href="#section-6.4.3.3-3" class="pilcrow">¶</a></p>
<p id="section-6.4.3.3-4">Otherwise, SETACL3res.status contains an error status
on failure and no other results are returned.<a href="#section-6.4.3.3-4" class="pilcrow">¶</a></p>
</section>
</div>
<div id="implementation-7">
<section id="section-6.4.3.4">
            <h5 id="name-implementation-8">
<a href="#section-6.4.3.4" class="section-number selfRef">6.4.3.4. </a><a href="#name-implementation-8" class="section-name selfRef">IMPLEMENTATION</a>
            </h5>
<p id="section-6.4.3.4-1">On success, the server does not send the reply until
the ACL change is durable locally.<a href="#section-6.4.3.4-1" class="pilcrow">¶</a></p>
<p id="section-6.4.3.4-2">Changing a file object's ACL changes the object's mtime.
The mtime change is reflected in the attributes returned
in the SETACL response.<a href="#section-6.4.3.4-2" class="pilcrow">¶</a></p>
<p id="section-6.4.3.4-3">A high-quality server implementation ensures that a
GETACL procedure running concurrently with a SETACL
procedure does not return partially updated (torn)
ACL contents. However, a failed SETACL may partially
change a file's ACLs.<a href="#section-6.4.3.4-3" class="pilcrow">¶</a></p>
<p id="section-6.4.3.4-4">When SETACL3args.fh represents a file object that does
not implement support for ACLs, the server responds
by setting SETACL3res.status to ACL3ERR_NOTSUPP.<a href="#section-6.4.3.4-4" class="pilcrow">¶</a></p>
<p id="section-6.4.3.4-5">When SETACL3args.acl does not contain at least the
minimal set of ACEs (as described in
<a href="#acls-in-operation" class="auto internal xref">Section 3.5.4.2</a>), the server responds by setting
SETACL3res.status to ACL3ERR_INVAL.<a href="#section-6.4.3.4-5" class="pilcrow">¶</a></p>
</section>
</div>
<div id="errors-7">
<section id="section-6.4.3.5">
            <h5 id="name-errors-8">
<a href="#section-6.4.3.5" class="section-number selfRef">6.4.3.5. </a><a href="#name-errors-8" class="section-name selfRef">ERRORS</a>
            </h5>
<ul class="normal">
<li class="normal" id="section-6.4.3.5-1.1">
                <p id="section-6.4.3.5-1.1.1">ACL3ERR_PERM<a href="#section-6.4.3.5-1.1.1" class="pilcrow">¶</a></p>
</li>
              <li class="normal" id="section-6.4.3.5-1.2">
                <p id="section-6.4.3.5-1.2.1">ACL3ERR_IO<a href="#section-6.4.3.5-1.2.1" class="pilcrow">¶</a></p>
</li>
              <li class="normal" id="section-6.4.3.5-1.3">
                <p id="section-6.4.3.5-1.3.1">ACL3ERR_ACCES<a href="#section-6.4.3.5-1.3.1" class="pilcrow">¶</a></p>
</li>
              <li class="normal" id="section-6.4.3.5-1.4">
                <p id="section-6.4.3.5-1.4.1">ACL3ERR_INVAL<a href="#section-6.4.3.5-1.4.1" class="pilcrow">¶</a></p>
</li>
              <li class="normal" id="section-6.4.3.5-1.5">
                <p id="section-6.4.3.5-1.5.1">ACL3ERR_NOSPC<a href="#section-6.4.3.5-1.5.1" class="pilcrow">¶</a></p>
</li>
              <li class="normal" id="section-6.4.3.5-1.6">
                <p id="section-6.4.3.5-1.6.1">ACL3ERR_ROFS<a href="#section-6.4.3.5-1.6.1" class="pilcrow">¶</a></p>
</li>
              <li class="normal" id="section-6.4.3.5-1.7">
                <p id="section-6.4.3.5-1.7.1">ACL3ERR_DQUOT<a href="#section-6.4.3.5-1.7.1" class="pilcrow">¶</a></p>
</li>
              <li class="normal" id="section-6.4.3.5-1.8">
                <p id="section-6.4.3.5-1.8.1">ACL3ERR_STALE<a href="#section-6.4.3.5-1.8.1" class="pilcrow">¶</a></p>
</li>
              <li class="normal" id="section-6.4.3.5-1.9">
                <p id="section-6.4.3.5-1.9.1">ACL3ERR_BADHANDLE<a href="#section-6.4.3.5-1.9.1" class="pilcrow">¶</a></p>
</li>
              <li class="normal" id="section-6.4.3.5-1.10">
                <p id="section-6.4.3.5-1.10.1">ACL3ERR_SERVERFAULT<a href="#section-6.4.3.5-1.10.1" class="pilcrow">¶</a></p>
</li>
              <li class="normal" id="section-6.4.3.5-1.11">
                <p id="section-6.4.3.5-1.11.1">ACL3ERR_JUKEBOX<a href="#section-6.4.3.5-1.11.1" class="pilcrow">¶</a></p>
</li>
            </ul>
</section>
</div>
</section>
</div>
</section>
</div>
</section>
</div>
<div id="implementation-issues">
<section id="section-7">
      <h2 id="name-implementation-issues">
<a href="#section-7" class="section-number selfRef">7. </a><a href="#name-implementation-issues" class="section-name selfRef">Implementation Issues</a>
      </h2>
<div id="permission-issues">
<section id="section-7.1">
        <h3 id="name-permission-issues">
<a href="#section-7.1" class="section-number selfRef">7.1. </a><a href="#name-permission-issues" class="section-name selfRef">Permission issues</a>
        </h3>
<p id="section-7.1-1">The NFS protocol, strictly speaking, does not
define the permission checking used by NFS servers. However, it
is expected that an NFS server will do normal operating system
permission checking using AUTH_UNIX style authentication as
the basis of its protection mechanism, or another stronger
form of authentication such as RPC_AUTH_GSS. With
AUTH_UNIX authentication, the server gets the client's
effective uid, effective gid, and groups on each call and
uses them to check permission. These are the so-called UNIX
credentials.<a href="#section-7.1-1" class="pilcrow">¶</a></p>
<p id="section-7.1-2">Using uid and gid implies that the client and server share
the same uid list. Every server and client pair must have the
same mapping from user to uid and from group to gid. Since
every client can also be a server, this tends to imply that
the whole network shares the same uid/gid space. If this is
not the case, then it usually falls upon the server to
perform some custom mapping of credentials from one
authentication domain into another. A discussion of
techniques for managing a shared user space or for providing
mechanisms for user ID mapping is beyond the scope of this
specification.<a href="#section-7.1-2" class="pilcrow">¶</a></p>
<p id="section-7.1-3">In POSIX-based operating systems, a particular user (on UNIX, the
uid 0) has access to all files, no matter what permission and
ownership they have. This superuser permission may not be
allowed on the server, since anyone who can become superuser
on their client could gain access to all remote files. A
POSIX-based NFS server by default maps uid 0 to a distinguished
value (for instance, UID_NOBODY), as well as mapping the groups
list, before doing its access checking. A server implementation
may provide a mechanism to change this mapping.<a href="#section-7.1-3" class="pilcrow">¶</a></p>
</section>
</div>
<div id="duplicate-request-cache">
<section id="section-7.2">
        <h3 id="name-duplicate-request-cache">
<a href="#section-7.2" class="section-number selfRef">7.2. </a><a href="#name-duplicate-request-cache" class="section-name selfRef">Duplicate Request Cache</a>
        </h3>
<p id="section-7.2-1">The typical NFS protocol failure recovery model
uses client time-out and retry to handle server crashes,
network partitions, and lost server replies. A retried
request is referred to as a duplicate of the original.<a href="#section-7.2-1" class="pilcrow">¶</a></p>
<p id="section-7.2-2">When used in a file server context, the term idempotent can
be used to distinguish between operation types. An idempotent
request is one that a server can perform more than once with
equivalent results (though it may in fact change, as a side
effect, the access time on a file, say for READ). Some NFS
operations are obviously non-idempotent. They cannot be
reprocessed without special attention simply because they may
fail if tried a second time. A CREATE request, for example,
can be used to create a file for which the owner does not
have write permission. A duplicate of this request cannot
succeed if the original succeeded. Likewise, a file can be
removed only once.<a href="#section-7.2-2" class="pilcrow">¶</a></p>
<p id="section-7.2-3">The side effects caused by performing a duplicate
non-idempotent request can be destructive. A duplicate
file truncation can result in lost writes. It is the
inherent stateless design of the NFS protocol on top
of an unreliable RPC transport that yields the
possibility of destructive replays of non-idempotent
requests. Even in an implementation of the NFS protocol
over a reliable connection-oriented transport,
a connection break with automatic reestablishment
requires duplicate request processing: the client
retransmits requests that were pending before the
connection loss, and the server needs to recognize
and deal with potential duplicate non-idempotent requests.<a href="#section-7.2-3" class="pilcrow">¶</a></p>
<p id="section-7.2-4">Most NFS server implementations maintain a cache of
recent requests, called the duplicate request cache,
for recognizing duplicate non-idempotent requests. If
the server receives a request and recognizes it as a
duplicate of a recently completed request, the server
returns the original completion status instead of
processing the duplicate request again.<a href="#section-7.2-4" class="pilcrow">¶</a></p>
<p id="section-7.2-5">A description of an early implementation of a
duplicate request cache can be found in <span>[<a href="#Juszczak" class="cite xref">Juszczak</a>]</span>.<a href="#section-7.2-5" class="pilcrow">¶</a></p>
<p id="section-7.2-6">For all versions of the NFSACL protocol, the SETACL
procedure is considered to be non-idempotent.<a href="#section-7.2-6" class="pilcrow">¶</a></p>
</section>
</div>
<div id="caching-policies">
<section id="section-7.3">
        <h3 id="name-caching-policies">
<a href="#section-7.3" class="section-number selfRef">7.3. </a><a href="#name-caching-policies" class="section-name selfRef">Caching Policies</a>
        </h3>
<p id="section-7.3-1">The NFS protocol does not define a policy for
caching on the client or server. In particular, there is no
support for strict cache consistency between a client and
server, nor between different clients.<a href="#section-7.3-1" class="pilcrow">¶</a></p>
<p id="section-7.3-2">The NFSACL protocol does not mandate a specific caching
policy for ACLs or information retrieved via the ACCESS
procedure. However, a high-quality client implementation
that seeks good performance might choose to revalidate
cached access control information with the same regularity
that it invalidates normal file attributes.<a href="#section-7.3-2" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
<div id="xdr-protocol-definition">
<section id="section-8">
      <h2 id="name-xdr-protocol-definition">
<a href="#section-8" class="section-number selfRef">8. </a><a href="#name-xdr-protocol-definition" class="section-name selfRef">XDR Protocol Definition</a>
      </h2>
<p id="section-8-1">This section contains a description of the core features of the
NFSACL protocol, version 2 and 3, expressed in the XDR language
<span>[<a href="#RFC4506" class="cite xref">RFC4506</a>]</span>.<a href="#section-8-1" class="pilcrow">¶</a></p>
<p id="section-8-2">This description is provided in a way that makes it simple to
extract into ready-to-compile form.  The reader can apply the
following shell script to this document to produce a
machine-readable XDR description of the NFSACL protocol.<a href="#section-8-2" class="pilcrow">¶</a></p>
<div class="lang-sh sourcecode" id="section-8-3">
<pre>
#!/bin/sh
grep '^ *///' | sed 's?^ /// ??' | sed 's?^ *///$??'
</pre><a href="#section-8-3" class="pilcrow">¶</a>
</div>
<p id="section-8-4">That is, if the above script is stored in a file called
"extract.sh" and this document is in a file called "spec.txt",
then the reader can do the following to extract an XDR
description file:<a href="#section-8-4" class="pilcrow">¶</a></p>
<div class="lang-sh sourcecode" id="section-8-5">
<pre>
sh extract.sh &lt; spec.txt &gt; nfsacl.x
</pre><a href="#section-8-5" class="pilcrow">¶</a>
</div>
<div id="code-component-license">
<section id="section-8.1">
        <h3 id="name-code-component-license">
<a href="#section-8.1" class="section-number selfRef">8.1. </a><a href="#name-code-component-license" class="section-name selfRef">Code Component License</a>
        </h3>
<p id="section-8.1-1">Code components extracted from this document must include
the following license text.  When the extracted XDR code
is combined with other complementary XDR code which itself
has an identical license, only a single copy of the license
text need be preserved.<a href="#section-8.1-1" class="pilcrow">¶</a></p>
<div class="breakable lang-xdr sourcecode" id="section-8.1-2">
<pre>
/// /*
///  * Copyright (c) 2024 IETF Trust and the persons
///  * identified as authors of the code.  All rights reserved.
///  *
///  * The authors of the code are:
///  * Oracle
///  *
///  * Redistribution and use in source and binary forms, with
///  * or without modification, are permitted provided that the
///  * following conditions are met:
///  *
///  * - Redistributions of source code must retain the above
///  *   copyright notice, this list of conditions and the
///  *   following disclaimer.
///  *
///  * - Redistributions in binary form must reproduce the above
///  *   copyright notice, this list of conditions and the
///  *   following disclaimer in the documentation and/or other
///  *   materials provided with the distribution.
///  *
///  * - Neither the name of Internet Society, IETF or IETF
///  *   Trust, nor the names of specific contributors, may be
///  *   used to endorse or promote products derived from this
///  *   software without specific prior written permission.
///  *
///  *   THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS
///  *   AND CONTRIBUTORS "AS IS" AND ANY EXPRESS OR IMPLIED
///  *   WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
///  *   IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS
///  *   FOR A PARTICULAR PURPOSE ARE DISCLAIMED.  IN NO
///  *   EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE
///  *   LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
///  *   EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT
///  *   NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR
///  *   SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS
///  *   INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
///  *   LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
///  *   OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING
///  *   IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF
///  *   ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
///  */
///
/// const NFS_ACL_MAX_ENTRIES = 1024;
///
/// typedef int uid;
/// typedef unsigned short o_mode;
///
/// /*
///  * This is the format of an ACL which is passed over the network.
///  */
/// struct aclent {
///     int type;
///     uid id;
///     o_mode perm;
/// };
///
/// /*
///  * The values for the type element of the aclent structure.
///  */
/// const NA_USER_OBJ = 0x1;            /* object owner */
/// const NA_USER = 0x2;                /* additional users */
/// const NA_GROUP_OBJ = 0x4;           /* owning group of the object */
/// const NA_GROUP = 0x8;               /* additional groups */
/// const NA_CLASS_OBJ = 0x10;          /* file group class and mask entry */
/// const NA_OTHER_OBJ = 0x20;          /* other entry for the object */
/// const NA_ACL_DEFAULT = 0x1000;      /* default flag */
///
/// /*
///  * The bit field values for the perm element of the aclent
///  * structure.  The three values can be combined to form any
///  * of the 8 combinations.
///  */
/// const NA_READ = 0x4;                /* read permission */
/// const NA_WRITE = 0x2;               /* write permission */
/// const NA_EXEC = 0x1;                /* exec permission */
///
/// /*
///  * This is the structure which contains the ACL entries for a
///  * particular entity.  It contains the ACL entries which apply
///  * to this object plus any default ACL entries which are
///  * inherited by its children.
///  *
///  * The values for the mask field are defined below.
///  */
/// struct secattr {
///     u_int mask;
///     int aclcnt;
///     aclent aclent&lt;NFS_ACL_MAX_ENTRIES&gt;;
///     int dfaclcnt;
///     aclent dfaclent&lt;NFS_ACL_MAX_ENTRIES&gt;;
/// };
///
/// /*
///  * The values for the mask element of the secattr struct as well
///  * as for the mask element in the arguments in the GETACL2 and
///  * GETACL3 procedures.
///  */
/// const NA_ACL = 0x1;                 /* aclent contains a valid list */
/// const NA_ACLCNT = 0x2;              /* number of entries in the aclent list */
/// const NA_DFACL = 0x4;               /* dfaclent contains a valid list */
/// const NA_DFACLCNT = 0x8;            /* number of entries in the dfaclent list */
///
/// /*
///  * XDR data types inherited from the NFS version 2 protocol
///  */
///
/// enum ftype {
///     NFNON = 0,
///     NFREG = 1,
///     NFDIR = 2,
///     NFBLK = 3,
///     NFCHR = 4,
///     NFLNK = 5,
/// };
///
/// typedef opaque fhandle[FHSIZE];
///
/// struct timeval {
///     unsigned int seconds;
///     unsigned int useconds;
/// };
///
/// struct fattr {
///     ftype        type;
///     unsigned int mode;
///     unsigned int nlink;
///     unsigned int uid;
///     unsigned int gid;
///     unsigned int size;
///     unsigned int blocksize;
///     unsigned int rdev;
///     unsigned int blocks;
///     unsigned int fsid;
///     unsigned int fileid;
///     timeval      atime;
///     timeval      mtime;
///     timeval      ctime;
/// };
///
/// /*
///  * ACL error codes; the numeric values match codes with the same
///  * name used in NFS version 2.
///  */
/// enum aclstat2 {
///     ACL2_OK = 0,
///     ACL2ERR_PERM = 1,
///     ACL2ERR_IO = 5,
///     ACL2ERR_ACCES = 13,
///     ACL2ERR_NOSPC = 28,
///     ACL2ERR_ROFS = 30,
///     ACL2ERR_DQUOT = 69,
///     ACL2ERR_STALE = 70,
/// };
///
/// /*
///  * NFSACL version 2 procedure arguments and results
///  */
///
/// struct GETACL2args {
///     fhandle_t fh;
///     u_int mask;
/// };
///
/// struct GETACL2resok {
///     struct nfsfattr attr;
///     secattr acl;
/// };
///
/// union GETACL2res switch (enum nfsstat status) {
/// case ACL2_OK:
///     GETACL2resok resok;
/// default:
///     void;
/// };
///
/// struct SETACL2args {
///     fhandle_t fh;
///     secattr acl;
/// };
///
/// struct SETACL2resok {
///     struct nfsfattr attr;
/// };
///
/// union SETACL2res switch (enum nfsstat status) {
/// case ACL2_OK:
///     SETACL2resok resok;
/// default:
///     void;
/// };
///
/// struct GETATTR2args {
///     fhandle_t fh;
/// };
///
/// struct GETATTR2resok {
///     struct nfsfattr attr;
/// };
///
/// union GETATTR2res switch (enum nfsstat status) {
/// case ACL2_OK:
///     GETATTR2resok resok;
/// default:
///     void;
/// };
///
/// struct ACCESS2args {
///     fhandle_t fh;
///     uint32 access;
/// };
///
/// const ACCESS2_READ = 0x1;           /* read data or readdir a directory */
/// const ACCESS2_LOOKUP = 0x2;         /* lookup a name in a directory */
/// const ACCESS2_MODIFY = 0x4;         /* rewrite existing file data or */
///                                     /* modify existing directory entries */
/// const ACCESS2_EXTEND = 0x8;         /* write new data or add directory entries */
/// const ACCESS2_DELETE = 0x10;        /* delete existing directory entry */
/// const ACCESS2_EXECUTE = 0x20;       /* execute file (no meaning for a directory) */
///
/// struct ACCESS2resok {
///     struct nfsfattr attr;
///     uint32 access;
/// };
///
/// union ACCESS2res switch (enum nfsstat status) {
/// case ACL2_OK:
///     ACCESS2resok resok;
/// default:
///     void;
/// };
///
/// /*
///  * XDR data types inherited from the NFS version 3 protocol
///  */
///
/// typedef unsigned hyper uint64;
/// typedef unsigned long uint32;
/// typedef uint64 fileid3;
/// typedef uint32 uid3;
/// typedef uint32 gid3;
/// typedef uint64 size3;
/// typedef uint32 mode3;
///
/// enum ftype3 {
///     NF3REG    = 1,
///     NF3DIR    = 2,
///     NF3BLK    = 3,
///     NF3CHR    = 4,
///     NF3LNK    = 5,
///     NF3SOCK   = 6,
///     NF3FIFO   = 7
/// };
///
/// struct specdata3 {
///     uint32     specdata1;
///     uint32     specdata2;
/// };
///
/// const NFS3_FHSIZE = 64;
///
/// struct nfs_fh3 {
///     opaque       data&lt;NFS3_FHSIZE&gt;;
/// };
///
/// struct nfstime3 {
///     uint32   seconds;
///     uint32   nseconds;
/// };
///
/// struct fattr3 {
///     ftype3     type;
///     mode3      mode;
///     uint32     nlink;
///     uid3       uid;
///     gid3       gid;
///     size3      size;
///     size3      used;
///     specdata3  rdev;
///     uint64     fsid;
///     fileid3    fileid;
///     nfstime3   atime;
///     nfstime3   mtime;
///     nfstime3   ctime;
/// };
///
/// union post_op_attr switch (bool attributes_follow) {
/// case TRUE:
///     fattr3   attributes;
/// case FALSE:
///     void;
/// };
///
/// /*
///  * ACL error codes; the numeric values match codes with the same
///  * name used in NFS version 3.
///  */
/// enum aclstat3 {
///     ACL3_OK = 0,
///     ACL3ERR_PERM = 1,
///     ACL33ERR_NOENT = 2,
///     ACL3ERR_IO = 5,
///     ACL3ERR_ACCES = 13,
///     ACL3ERR_INVAL = 22,
///     ACL3ERR_NOSPC = 28,
///     ACL3ERR_ROFS = 30,
///     ACL3ERR_DQUOT = 69,
///     ACL3ERR_STALE = 70,
///     ACL3ERR_BADHANDLE = 10001,
///     ACL3ERR_NOTSUPP = 10004,
///     ACL3ERR_SERVERFAULT = 10006,
///     ACL3ERR_JUKEBOX = 10008,
/// };
///
/// /*
///  * NFSACL version 3 procedure arguments and results
///  */
///
/// struct GETACL3args {
///     nfs_fh3 fh;
///     u_int mask;
/// };
///
/// struct GETACL3resok {
///     post_op_attr attr;
///     secattr acl;
/// };
///
/// struct GETACL3resfail {
///     post_op_attr attr;
/// };
///
/// union GETACL3res switch (nfsstat3 status) {
/// case ACL3_OK:
///     GETACL3resok resok;
/// default:
///     GETACL3resfail resfail;
/// };
///
/// struct SETACL3args {
///     nfs_fh3 fh;
///     secattr acl;
/// };
///
/// struct SETACL3resok {
///     post_op_attr attr;
/// };
///
/// struct SETACL3resfail {
///     post_op_attr attr;
/// };
///
/// union SETACL3res switch (nfsstat3 status) {
/// case ACL3_OK:
///     SETACL3resok resok;
/// default:
///     SETACL3resfail resfail;
/// };
///
/// /*
///  * Share the port with the NFS service.
///  */
/// const NFS_ACL_PORT = 2049;
///
/// program NFS_ACL_PROGRAM {
///     version NFS_ACL_V2 {
///         void
///             ACLPROC2_NULL(void) = 0;
///         GETACL2res
///             ACLPROC2_GETACL(GETACL2args) = 1;
///         SETACL2res
///             ACLPROC2_SETACL(SETACL2args) = 2;
///         GETATTR2res
///             ACLPROC2_GETATTR(GETATTR2args) = 3;
///         ACCESS2res
///             ACLPROC2_ACCESS(ACCESS2args) = 4;
///     } = 2;
///     version NFS_ACL_V3 {
///         void
///             ACLPROC3_NULL(void) = 0;
///         GETACL3res
///             ACLPROC3_GETACL(GETACL3args) = 1;
///         SETACL3res
///             ACLPROC3_SETACL(SETACL3args) = 2;
///     } = 3;
/// } = 100227;
</pre><a href="#section-8.1-2" class="pilcrow">¶</a>
</div>
</section>
</div>
</section>
</div>
<div id="implementation-status">
<section id="section-9">
      <h2 id="name-implementation-status">
<a href="#section-9" class="section-number selfRef">9. </a><a href="#name-implementation-status" class="section-name selfRef">Implementation Status</a>
      </h2>
<aside id="section-9-1">
        <p id="section-9-1.1">This section is to be removed before publishing this document as an RFC.<a href="#section-9-1.1" class="pilcrow">¶</a></p>
</aside>
<p id="section-9-2">This section records the status of known implementations of the
protocol defined by this specification at the time of posting of this
Internet-Draft, and is based on a proposal described in
<span>[<a href="#RFC7942" class="cite xref">RFC7942</a>]</span>. The description of implementations in this section is
intended to assist the IETF in its decision processes in progressing
drafts to RFCs.<a href="#section-9-2" class="pilcrow">¶</a></p>
<p id="section-9-3">Please note that the listing of any individual implementation here
does not imply endorsement by the IETF. Furthermore, no effort has
been spent to verify the information presented here that was supplied
by IETF contributors. This is not intended as, and must not be
construed to be, a catalog of available implementations or their
features. Readers are advised to note that other implementations may
exist.<a href="#section-9-3" class="pilcrow">¶</a></p>
<div id="solaris-nfs-server-and-client">
<section id="section-9.1">
        <h3 id="name-solaris-nfs-server-and-clie">
<a href="#section-9.1" class="section-number selfRef">9.1. </a><a href="#name-solaris-nfs-server-and-clie" class="section-name selfRef">Solaris NFS server and client</a>
        </h3>
<p id="section-9.1-1">Organization: Oracle<a href="#section-9.1-1" class="pilcrow">¶</a></p>
<p id="section-9.1-2">URL:       <a href="https://www.oracle.com">https://www.oracle.com</a><a href="#section-9.1-2" class="pilcrow">¶</a></p>
<p id="section-9.1-3">Maturity:  Complete.<a href="#section-9.1-3" class="pilcrow">¶</a></p>
<p id="section-9.1-4">Coverage:  All procedures are implemented.<a href="#section-9.1-4" class="pilcrow">¶</a></p>
<p id="section-9.1-5">Licensing: CDDL<a href="#section-9.1-5" class="pilcrow">¶</a></p>
<p id="section-9.1-6">Implementation experience:<a href="#section-9.1-6" class="pilcrow">¶</a></p>
</section>
</div>
<div id="linux-nfs-server-and-client">
<section id="section-9.2">
        <h3 id="name-linux-nfs-server-and-client">
<a href="#section-9.2" class="section-number selfRef">9.2. </a><a href="#name-linux-nfs-server-and-client" class="section-name selfRef">Linux NFS server and client</a>
        </h3>
<p id="section-9.2-1">Organization:  The Linux Foundation<a href="#section-9.2-1" class="pilcrow">¶</a></p>
<p id="section-9.2-2">URL:       <a href="https://www.kernel.org">https://www.kernel.org</a><a href="#section-9.2-2" class="pilcrow">¶</a></p>
<p id="section-9.2-3">Maturity:  Complete.<a href="#section-9.2-3" class="pilcrow">¶</a></p>
<p id="section-9.2-4">Coverage:  All procedures described in this document are implemented in both versions of the protocol.<a href="#section-9.2-4" class="pilcrow">¶</a></p>
<p id="section-9.2-5">Licensing: GPLv2<a href="#section-9.2-5" class="pilcrow">¶</a></p>
<p id="section-9.2-6">Implementation experience:  The initial Linux implementation
of the NFSACL protocol is described in <span>[<a href="#Gruenbacher" class="cite xref">Gruenbacher</a>]</span>, and
subsequent modifications can be found in the Linux kernel
source code repository <span>[<a href="#Linux" class="cite xref">Linux</a>]</span>.<a href="#section-9.2-6" class="pilcrow">¶</a></p>
<p id="section-9.2-7"><span>[<a href="#Gruenbacher" class="cite xref">Gruenbacher</a>]</span> notes several minor differences between the
Linux and Solaris implementations of ACLs, and remarks that:
&gt; Solaris ACLs are based on an earlier draft of POSIX 1003.1e,
&gt; so its handling of the mask ACL entry is slightly different
&gt; than in draft 17 for ACLs with only four ACL entries. This
&gt; is a corner case that occurs only rarely, so the semantic
&gt; differences may not be noticeable.<a href="#section-9.2-7" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
<div id="security-considerations">
<section id="section-10">
      <h2 id="name-security-considerations">
<a href="#section-10" class="section-number selfRef">10. </a><a href="#name-security-considerations" class="section-name selfRef">Security Considerations</a>
      </h2>
<p id="section-10-1">An attacker can alter the content of an ACL as it transits
an open network, giving the attacker access to file content
that the ACL is supposed to protect.<a href="#section-10-1" class="pilcrow">¶</a></p>
<p id="section-10-2">Therefore, implementations of NFSACL should protect the
integrity of ACL content when it transits a network. The
use of an integrity-preserving transport layer security
service, such as the GSS Kerberos integrity service, is
strongly recommended.<a href="#section-10-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="iana-considerations">
<section id="section-11">
      <h2 id="name-iana-considerations">
<a href="#section-11" class="section-number selfRef">11. </a><a href="#name-iana-considerations" class="section-name selfRef">IANA Considerations</a>
      </h2>
<p id="section-11-1">In accordance with <span><a href="https://rfc-editor.org/rfc/rfc5531#section-13" class="relref">Section 13</a> of [<a href="#RFC5531" class="cite xref">RFC5531</a>]</span>, the editor
requests that IANA update the entry for the NFS ACL
service in the RPC Program Numbers registry to add
the current document as a Reference.<a href="#section-11-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="sec-combined-references">
<section id="section-12">
      <h2 id="name-references">
<a href="#section-12" class="section-number selfRef">12. </a><a href="#name-references" class="section-name selfRef">References</a>
      </h2>
<div id="sec-normative-references">
<section id="section-12.1">
        <h3 id="name-normative-references">
<a href="#section-12.1" class="section-number selfRef">12.1. </a><a href="#name-normative-references" class="section-name selfRef">Normative References</a>
        </h3>
<dl class="references">
<dt id="RFC2119">[RFC2119]</dt>
        <dd>
<span class="refAuthor">Bradner, S.</span>, <span class="refTitle">"Key words for use in RFCs to Indicate Requirement Levels"</span>, <span class="seriesInfo">BCP 14</span>, <span class="seriesInfo">RFC 2119</span>, <span class="seriesInfo">DOI 10.17487/RFC2119</span>, <time datetime="1997-03" class="refDate">March 1997</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc2119">https://www.rfc-editor.org/rfc/rfc2119</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC4506">[RFC4506]</dt>
        <dd>
<span class="refAuthor">Eisler, M., Ed.</span>, <span class="refTitle">"XDR: External Data Representation Standard"</span>, <span class="seriesInfo">STD 67</span>, <span class="seriesInfo">RFC 4506</span>, <span class="seriesInfo">DOI 10.17487/RFC4506</span>, <time datetime="2006-05" class="refDate">May 2006</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc4506">https://www.rfc-editor.org/rfc/rfc4506</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC5531">[RFC5531]</dt>
        <dd>
<span class="refAuthor">Thurlow, R.</span>, <span class="refTitle">"RPC: Remote Procedure Call Protocol Specification Version 2"</span>, <span class="seriesInfo">RFC 5531</span>, <span class="seriesInfo">DOI 10.17487/RFC5531</span>, <time datetime="2009-05" class="refDate">May 2009</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc5531">https://www.rfc-editor.org/rfc/rfc5531</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC7942">[RFC7942]</dt>
        <dd>
<span class="refAuthor">Sheffer, Y.</span> and <span class="refAuthor">A. Farrel</span>, <span class="refTitle">"Improving Awareness of Running Code: The Implementation Status Section"</span>, <span class="seriesInfo">BCP 205</span>, <span class="seriesInfo">RFC 7942</span>, <span class="seriesInfo">DOI 10.17487/RFC7942</span>, <time datetime="2016-07" class="refDate">July 2016</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc7942">https://www.rfc-editor.org/rfc/rfc7942</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8174">[RFC8174]</dt>
      <dd>
<span class="refAuthor">Leiba, B.</span>, <span class="refTitle">"Ambiguity of Uppercase vs Lowercase in RFC 2119 Key Words"</span>, <span class="seriesInfo">BCP 14</span>, <span class="seriesInfo">RFC 8174</span>, <span class="seriesInfo">DOI 10.17487/RFC8174</span>, <time datetime="2017-05" class="refDate">May 2017</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc8174">https://www.rfc-editor.org/rfc/rfc8174</a>&gt;</span>. </dd>
<dd class="break"></dd>
</dl>
</section>
</div>
<div id="sec-informative-references">
<section id="section-12.2">
        <h3 id="name-informative-references">
<a href="#section-12.2" class="section-number selfRef">12.2. </a><a href="#name-informative-references" class="section-name selfRef">Informative References</a>
        </h3>
<dl class="references">
<dt id="Gruenbacher">[Gruenbacher]</dt>
        <dd>
<span class="refAuthor">Grünbacher, A.</span>, <span class="refTitle">"POSIX Access Control Lists on Linux"</span>, <span class="seriesInfo">Proceedings of the FREENIX Track: 2003 USENIX Annual Technical Conference, pp. 259-272</span>, <span class="seriesInfo">ISBN 1-931971-11-0</span>, <time datetime="2003-01" class="refDate">January 2003</time>. </dd>
<dd class="break"></dd>
<dt id="IEEE">[IEEE]</dt>
        <dd>
<span class="refAuthor">Institute of Electrical and Electronics Engineers</span>, <span class="refTitle">"IEEE 1003.1e and 1003.2c: Draft Standard for Information Technology-- Portable Operating System Interface (POSIX)-- Part 1: System Application Program Interface (API) and Part 2: Shell and Utilities, draft 17"</span>, <time datetime="1997-01" class="refDate">January 1997</time>. </dd>
<dd class="break"></dd>
<dt id="Juszczak">[Juszczak]</dt>
        <dd>
<span class="refAuthor">Juszcak, C.</span>, <span class="refTitle">"Improving the Performance and Correctness of an NFS Server"</span>, <span class="seriesInfo">USENIX Conference Proceedings, USENIX Association, Berkeley, CA, pp. 53-63</span>, <time datetime="1989-01" class="refDate">January 1989</time>. </dd>
<dd class="break"></dd>
<dt id="Linux">[Linux]</dt>
        <dd>
<span class="refTitle">"Linux kernel source code"</span>, <span>n.d.</span>, <span>&lt;<a href="https://www.kernel.org">https://www.kernel.org</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="OpenSolaris">[OpenSolaris]</dt>
        <dd>
<span class="refTitle">"Archived OpenSolaris source code"</span>, <span>n.d.</span>, <span>&lt;<a href="https://github.com/kofemann/opensolaris">https://github.com/kofemann/opensolaris</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="POSIX">[POSIX]</dt>
        <dd>
<span class="refAuthor">Institute of Electrical and Electronics Engineers</span>, <span class="refTitle">"IEEE Std 1003.1-2001 (Open Group Technical Standard, Issue 6), Standard for Information Technology-- Portable Operating System Interface (POSIX)"</span>, <span class="seriesInfo">ISBN 0-7381-3010-9</span>, <time datetime="2001" class="refDate">2001</time>. </dd>
<dd class="break"></dd>
<dt id="RFC1094">[RFC1094]</dt>
        <dd>
<span class="refAuthor">Nowicki, B.</span>, <span class="refTitle">"NFS: Network File System Protocol specification"</span>, <span class="seriesInfo">RFC 1094</span>, <span class="seriesInfo">DOI 10.17487/RFC1094</span>, <time datetime="1989-03" class="refDate">March 1989</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc1094">https://www.rfc-editor.org/rfc/rfc1094</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC1813">[RFC1813]</dt>
        <dd>
<span class="refAuthor">Callaghan, B.</span>, <span class="refAuthor">Pawlowski, B.</span>, and <span class="refAuthor">P. Staubach</span>, <span class="refTitle">"NFS Version 3 Protocol Specification"</span>, <span class="seriesInfo">RFC 1813</span>, <span class="seriesInfo">DOI 10.17487/RFC1813</span>, <time datetime="1995-06" class="refDate">June 1995</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc1813">https://www.rfc-editor.org/rfc/rfc1813</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC1833">[RFC1833]</dt>
        <dd>
<span class="refAuthor">Srinivasan, R.</span>, <span class="refTitle">"Binding Protocols for ONC RPC Version 2"</span>, <span class="seriesInfo">RFC 1833</span>, <span class="seriesInfo">DOI 10.17487/RFC1833</span>, <time datetime="1995-08" class="refDate">August 1995</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc1833">https://www.rfc-editor.org/rfc/rfc1833</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8881">[RFC8881]</dt>
      <dd>
<span class="refAuthor">Noveck, D., Ed.</span> and <span class="refAuthor">C. Lever</span>, <span class="refTitle">"Network File System (NFS) Version 4 Minor Version 1 Protocol"</span>, <span class="seriesInfo">RFC 8881</span>, <span class="seriesInfo">DOI 10.17487/RFC8881</span>, <time datetime="2020-08" class="refDate">August 2020</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc8881">https://www.rfc-editor.org/rfc/rfc8881</a>&gt;</span>. </dd>
<dd class="break"></dd>
</dl>
</section>
</div>
</section>
</div>
<div id="source-material">
<section id="appendix-A">
      <h2 id="name-source-material">
<a href="#appendix-A" class="section-number selfRef">Appendix A. </a><a href="#name-source-material" class="section-name selfRef">Source Material</a>
      </h2>
<p id="appendix-A-1">The on-the-wire protocol described here is intended to
match existing de factor implementations of NFSACL.<a href="#appendix-A-1" class="pilcrow">¶</a></p>
<p id="appendix-A-2">The source for the XDR specification provided in this
document is the nfs_acl.x file as found in published
versions of the OpenSolaris source code base <span>[<a href="#OpenSolaris" class="cite xref">OpenSolaris</a>]</span>,
an open source descendant of Solaris.<a href="#appendix-A-2" class="pilcrow">¶</a></p>
<p id="appendix-A-3">However, there are a few changes to the protocol as it
was originally described in the OpenSolaris source code
base.<a href="#appendix-A-3" class="pilcrow">¶</a></p>
<div id="redaction-of-nfsacl-version-4">
<section id="appendix-A.1">
        <h3 id="name-redaction-of-nfsacl-version">
<a href="#appendix-A.1" class="section-number selfRef">A.1. </a><a href="#name-redaction-of-nfsacl-version" class="section-name selfRef">Redaction of NFSACL Version 4</a>
        </h3>
<p id="appendix-A.1-1">Version 4 of NFSACL is described in the original nfs_acl.x source
file is described this way:<a href="#appendix-A.1-1" class="pilcrow">¶</a></p>
<ul class="normal ulEmpty">
<li class="normal ulEmpty" id="appendix-A.1-2.1">
            <p id="appendix-A.1-2.1.1">This is a transitional interface to enable Solaris NFSv4
clients to manipulate ACLs on Solaris servers until the
spec is complete enough to implement this inside the
NFSv4 protocol itself.  NFSv4 does handle extended
attributes in-band.<a href="#appendix-A.1-2.1.1" class="pilcrow">¶</a></p>
</li>
        </ul>
<p id="appendix-A.1-3">Because the two non-NULL procedures in this version of the NFSACL
protocol were used only as part of a Solaris a prototype and there
are no other implementations of NFSACL version 4, it is not included
in the protocol description appearing in this document.<a href="#appendix-A.1-3" class="pilcrow">¶</a></p>
</section>
</div>
<div id="redaction-of-getxattrdir-procedures">
<section id="appendix-A.2">
        <h3 id="name-redaction-of-getxattrdir-pr">
<a href="#appendix-A.2" class="section-number selfRef">A.2. </a><a href="#name-redaction-of-getxattrdir-pr" class="section-name selfRef">Redaction of GETXATTRDIR Procedures</a>
        </h3>
<p id="appendix-A.2-1">The original NFSACL protocol contained a GETXATTRDIR procedure
that was meant to provide clients access to named attributes
(auxiliary streams) stored with each shared file. These
procedures were later introduced in NFS version 4 <span>[<a href="#RFC8881" class="cite xref">RFC8881</a>]</span>.<a href="#appendix-A.2-1" class="pilcrow">¶</a></p>
<p id="appendix-A.2-2">As far as this editor is aware, named attribute support was
only ever implemented in Solaris, and the procedures here
were strictly prototypes. There is little to no public
documentation beyond what can be found in the original
nfs_acl.x file.<a href="#appendix-A.2-2" class="pilcrow">¶</a></p>
<p id="appendix-A.2-3">Therefore, the GETXATTRDIR procedures are not included in
the protocol description appearing in this document.<a href="#appendix-A.2-3" class="pilcrow">¶</a></p>
</section>
</div>
<div id="code-compilation-requirements">
<section id="appendix-A.3">
        <h3 id="name-code-compilation-requiremen">
<a href="#appendix-A.3" class="section-number selfRef">A.3. </a><a href="#name-code-compilation-requiremen" class="section-name selfRef">Code Compilation Requirements</a>
        </h3>
<p id="appendix-A.3-1">The original nfs_acl.x file that appears in the OpenSolaris code
base did not compile using the widely-available rpcgen tool).<a href="#appendix-A.3-1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="appendix-A.3-2.1">
            <p id="appendix-A.3-2.1.1">The file does not include a definition of the ACL2_OK or
ACL3_OK constants used in definitions of result unions.<a href="#appendix-A.3-2.1.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="appendix-A.3-2.2">
            <p id="appendix-A.3-2.2.1">The file does not include definitions of NFS protocol elements
that are shared with the NFSACL protocol, such as fhandle_t and
post_op_attr.<a href="#appendix-A.3-2.2.1" class="pilcrow">¶</a></p>
</li>
        </ul>
<p id="appendix-A.3-3">The XDR specification provided in this document rectifies those
omissions to provide a complete and compilable XDR language
description of the NFSACL protocol.<a href="#appendix-A.3-3" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
<div id="open-questions">
<section id="appendix-B">
      <h2 id="name-open-questions">
<a href="#appendix-B" class="section-number selfRef">Appendix B. </a><a href="#name-open-questions" class="section-name selfRef">Open Questions</a>
      </h2>
<p id="appendix-B-1">Should the CDDL .x file be explicitly cited, or otherwise
referenced, in this document?<a href="#appendix-B-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="acknowledgments">
<section id="appendix-C">
      <h2 id="name-acknowledgments">
<a href="#name-acknowledgments" class="section-name selfRef">Acknowledgments</a>
      </h2>
<p id="appendix-C-1">The editor is grateful to
Bill Baker,
Wim Coekaerts,
Andreas Gruenbacher,
Rick Macklem,
Greg Marsden,
Martin Thomson,
and
Jim Wright
for their input and support.<a href="#appendix-C-1" class="pilcrow">¶</a></p>
<p id="appendix-C-2">Special thanks to
Transport Area Directors
Martin Duke
and
Zaheduzzaman Sarker,
NFSV4 Working Group Chairs
Chris Inacio
and
Brian Pawlowski,
and
NFSV4 Working Group Secretary
Thomas Haynes
for their patience, guidance, and oversight.<a href="#appendix-C-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="authors-addresses">
<section id="appendix-D">
      <h2 id="name-authors-address">
<a href="#name-authors-address" class="section-name selfRef">Author's Address</a>
      </h2>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Chuck Lever (<span class="role">editor</span>)</span></div>
<div dir="auto" class="left"><span class="org">Oracle Corporation</span></div>
<div dir="auto" class="left"><span class="country-name">United States of America</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:chuck.lever@oracle.com" class="email">chuck.lever@oracle.com</a>
</div>
</address>
</section>
</div>
<script>const toc = document.getElementById("toc");
toc.querySelector("h2").addEventListener("click", e => {
  toc.classList.toggle("active");
});
toc.querySelector("nav").addEventListener("click", e => {
  toc.classList.remove("active");
});
</script>
</body>
</html>
